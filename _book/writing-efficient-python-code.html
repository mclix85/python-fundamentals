<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Writing Efficient Python Code | Python Fundamenals</title>
<meta name="author" content="Dat Tran">
<meta name="description" content="Logan Thomas Logan is a member of the Technical Training team at Enthought – an organization that provides digital transformation, software consulting, and training services to individuals and...">
<meta name="generator" content="bookdown 0.31 with bs4_book()">
<meta property="og:title" content="Writing Efficient Python Code | Python Fundamenals">
<meta property="og:type" content="book">
<meta property="og:description" content="Logan Thomas Logan is a member of the Technical Training team at Enthought – an organization that provides digital transformation, software consulting, and training services to individuals and...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Writing Efficient Python Code | Python Fundamenals">
<meta name="twitter:description" content="Logan Thomas Logan is a member of the Technical Training team at Enthought – an organization that provides digital transformation, software consulting, and training services to individuals and...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Python Fundamenals</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Run the Codes</a></li>
<li class="book-part">Python Fundamentals</li>
<li><a class="" href="introduction-to-python.html">Introduction to Python</a></li>
<li><a class="" href="intermediate-python.html">Intermediate Python</a></li>
<li><a class="" href="python-data-science-toolbox-part-1.html">Python Data Science Toolbox (Part 1)</a></li>
<li><a class="" href="python-data-science-toolbox-part-2.html">Python Data Science Toolbox (Part 2)</a></li>
<li class="book-part">Python programming</li>
<li><a class="active" href="writing-efficient-python-code.html">Writing Efficient Python Code</a></li>
<li><a class="" href="writing-functions-in-python.html">Writing Functions in Python</a></li>
<li><a class="" href="object-oriented-programming-in-python.html">Object-Oriented Programming in Python</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/mcllix85/https://github.com/mclix85/python-fundamentals">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="writing-efficient-python-code" class="section level1 unnumbered">
<h1>Writing Efficient Python Code<a class="anchor" aria-label="anchor" href="#writing-efficient-python-code"><i class="fas fa-link"></i></a>
</h1>
<p><strong>Logan Thomas</strong></p>
<p class="course__instructor-description display-none-mobile-course-page-experiment">
Logan is a member of the Technical Training team at Enthought – an organization that provides digital transformation, software consulting, and training services to individuals and companies worldwide. As a Scientific Software Technical Trainer, he focuses on helping students write robust, scalable, and efficient Python code. As a self-proclaimed Python enthusiast, Logan enjoys attending meetups and conferences in the Austin, Texas area to share his knowledge with others.
</p>
<p><strong>Course Description</strong></p>
<p>As a Data Scientist, the majority of your time should be spent gleaning actionable insights from data – not waiting for your code to finish running. Writing efficient Python code can help reduce runtime and save computational resources, ultimately freeing you up to do the things you love as a Data Scientist. In this course, you’ll learn how to use Python’s built-in data structures, functions, and modules to write cleaner, faster, and more efficient code. We’ll explore how to time and profile code in order to find bottlenecks. Then, you’ll practice eliminating these bottlenecks, and other bad design patterns, using Python’s Standard Library, NumPy, and pandas. After completing this course, you’ll have the necessary tools to start writing efficient Python code!</p>
<div id="foundations-for-efficiencies" class="section level2 unnumbered">
<h2>Foundations for efficiencies<a class="anchor" aria-label="anchor" href="#foundations-for-efficiencies"><i class="fas fa-link"></i></a>
</h2>
<p class="chapter__description">
In this chapter, you’ll learn what it means to write efficient Python code. You’ll explore Python’s Standard Library, learn about NumPy arrays, and practice using some of Python’s built-in tools. This chapter builds a foundation for the concepts covered ahead.
</p>
<div id="welcome" class="section level3 unnumbered">
<h3>Welcome!<a class="anchor" aria-label="anchor" href="#welcome"><i class="fas fa-link"></i></a>
</h3>
<div id="pop-quiz-what-is-efficient" class="section level4 unnumbered">
<h4>Pop quiz: what is efficient<a class="anchor" aria-label="anchor" href="#pop-quiz-what-is-efficient"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
In the context of this course, what is meant by <em>efficient Python code</em>?
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled checked>Code that executes quickly for the task at hand, minimizes the memory footprint and follows Python’s coding style principles.</li>
<li>
<input type="checkbox" disabled>Code that has a fast runtime, consumes a small amount of memory and can be verbose/hard to interpret (readability doesn’t matter).</li>
<li>
<input type="checkbox" disabled>Code that returns a correct result regardless of the execution time and resource consumption.</li>
</ul>
<p class="dc-completion-pane__message dc-u-maxw-100pc">
Correct! Writing efficient Python code minimizes runtime and memory usage while also following the idioms in the <em>Zen of Python</em>.
</p>
</div>
<div id="a-taste-of-things-to-come" class="section level4 unnumbered">
<h4>A taste of things to come<a class="anchor" aria-label="anchor" href="#a-taste-of-things-to-come"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
In this exercise, you’ll explore both the <em>Non-Pythonic</em> and <em>Pythonic</em> ways of looping over a list.
</p>
<pre><code>names = ['Jerry', 'Kramer', 'Elaine', 'George', 'Newman']
</code></pre>
<p>
Suppose you wanted to collect the names in the above list that have six letters or more. In other programming languages, the typical approach is to create an index variable (<code>i</code>), use <code>i</code> to iterate over the list, and use an if statement to collect the names with six letters or more:
</p>
<pre><code>i = 0
new_list= []
while i &lt; len(names):
    if len(names[i]) &gt;= 6:
        new_list.append(names[i])
    i += 1
</code></pre>
<p>
Let’s explore some more <em>Pythonic</em> ways of doing this.
</p>
</div>
<div class="exercise--instructions__content">
<p>
Print the list, <code>new_list</code>, that was created using a <em>Non-Pythonic</em> approach.
</p>
</div>
<div>
<div class="sourceCode" id="cb544"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb544-1"><a href="writing-efficient-python-code.html#cb544-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb544-2"><a href="writing-efficient-python-code.html#cb544-2" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> [<span class="st">'Jerry'</span>, <span class="st">'Kramer'</span>, <span class="st">'Elaine'</span>, <span class="st">'George'</span>, <span class="st">'Newman'</span>]</span>
<span id="cb544-3"><a href="writing-efficient-python-code.html#cb544-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb544-4"><a href="writing-efficient-python-code.html#cb544-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the list created using the Non-Pythonic approach</span></span>
<span id="cb544-5"><a href="writing-efficient-python-code.html#cb544-5" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb544-6"><a href="writing-efficient-python-code.html#cb544-6" aria-hidden="true" tabindex="-1"></a>new_list<span class="op">=</span> []</span>
<span id="cb544-7"><a href="writing-efficient-python-code.html#cb544-7" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(names):</span>
<span id="cb544-8"><a href="writing-efficient-python-code.html#cb544-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(names[i]) <span class="op">&gt;=</span> <span class="dv">6</span>:</span>
<span id="cb544-9"><a href="writing-efficient-python-code.html#cb544-9" aria-hidden="true" tabindex="-1"></a>        new_list.append(names[i])</span>
<span id="cb544-10"><a href="writing-efficient-python-code.html#cb544-10" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb544-11"><a href="writing-efficient-python-code.html#cb544-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(new_list)</span></code></pre></div>
<pre><code>## ['Kramer', 'Elaine', 'George', 'Newman']</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
A more <em>Pythonic</em> approach would loop over the contents of <code>names</code>, rather than using an index variable. Print <code>better_list</code>.
</p>
</div>
<div>
<div class="sourceCode" id="cb546"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb546-1"><a href="writing-efficient-python-code.html#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the list created by looping over the contents of names</span></span>
<span id="cb546-2"><a href="writing-efficient-python-code.html#cb546-2" aria-hidden="true" tabindex="-1"></a>better_list <span class="op">=</span> []</span>
<span id="cb546-3"><a href="writing-efficient-python-code.html#cb546-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> name <span class="kw">in</span> names:</span>
<span id="cb546-4"><a href="writing-efficient-python-code.html#cb546-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(name) <span class="op">&gt;=</span> <span class="dv">6</span>:</span>
<span id="cb546-5"><a href="writing-efficient-python-code.html#cb546-5" aria-hidden="true" tabindex="-1"></a>        better_list.append(name)</span>
<span id="cb546-6"><a href="writing-efficient-python-code.html#cb546-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(better_list)</span></code></pre></div>
<pre><code>## ['Kramer', 'Elaine', 'George', 'Newman']</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
The best <em>Pythonic</em> way of doing this is by using list comprehension. Print <code>best_list</code>.
</p>
</div>
<div>
<div class="sourceCode" id="cb548"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb548-1"><a href="writing-efficient-python-code.html#cb548-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the list created by using list comprehension</span></span>
<span id="cb548-2"><a href="writing-efficient-python-code.html#cb548-2" aria-hidden="true" tabindex="-1"></a>best_list <span class="op">=</span> [name <span class="cf">for</span> name <span class="kw">in</span> names <span class="cf">if</span> <span class="bu">len</span>(name) <span class="op">&gt;=</span> <span class="dv">6</span>]</span>
<span id="cb548-3"><a href="writing-efficient-python-code.html#cb548-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(best_list)</span></code></pre></div>
<pre><code>## ['Kramer', 'Elaine', 'George', 'Newman']</code></pre>
</div>
<p class>
Great work! Don’t get too caught up in the coding concepts just yet (you’ll practice using lists, for loops, and list comprehensions later on). The important thing to notice here is that following some of Python’s guiding principles allows you to write cleaner and more efficient code. <br><br> Remember, <code>Pythonic code == efficient code</code>. You’ll explore these, and other, Pythonic concepts later on in the course, but for now, this is just a taste of things to come!
</p>
</div>
<div id="zen-of-python" class="section level4 unnumbered">
<h4>Zen of Python<a class="anchor" aria-label="anchor" href="#zen-of-python"><i class="fas fa-link"></i></a>
</h4>
<div class>
<p>
In the video, we covered the <em>Zen of Python</em> written by Tim Peters, which lists 19 idioms that serve as guiding principles for any Pythonista. Python has hundreds of <em>Python Enhancement Proposals</em>, commonly referred to as <em>PEPs</em>. The <em>Zen of Python</em> is one of these <em>PEPs</em> and is documented as <a href="https://www.python.org/dev/peps/pep-0020/">PEP20</a>.
</p>
<p>
One little Easter Egg in Python is the ability to print the <em>Zen of Python</em> using the command <code>import this</code>. Let’s take a look at one of the idioms listed in these guiding principles.
</p>
<p>
Type and run the command <code>import this</code> within your IPython console and answer the following question:
</p>
<hr>
<p>
What is the 7th idiom of the Zen of Python?
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>Flat is better than nested.</li>
<li>
<input type="checkbox" disabled>Beautiful is better than ugly.</li>
<li>
<input type="checkbox" disabled checked>Readability counts.</li>
<li>
<input type="checkbox" disabled>Python is the best programming language ever.</li>
</ul>
<p class>
That’s correct! Python has a design philosophy that emphasizes readability. Throughout the course, you’ll see that writing efficient Python code goes hand in hand with writing code that is easy to understand. Faster code is good, but faster &amp; readable code is best!
</p>
</div>
</div>
<div id="building-with-built-ins" class="section level3 unnumbered">
<h3>Building with built-ins<a class="anchor" aria-label="anchor" href="#building-with-built-ins"><i class="fas fa-link"></i></a>
</h3>
<div id="built-in-practice-range" class="section level4 unnumbered">
<h4>Built-in practice: range()<a class="anchor" aria-label="anchor" href="#built-in-practice-range"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
In this exercise, you will practice using Python’s built-in function <code><a href="https://rdrr.io/r/base/range.html">range()</a></code>. Remember that you can use <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> in a few different ways:
</p>
<p>
<strong>1)</strong> Create a sequence of numbers from 0 to a stop value (which is <em>exclusive</em>). This is useful when you want to create a simple sequence of numbers starting at zero:
</p>
<pre><code>range(stop)</code>

<code># Example
list(range(11))

[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
</code></pre>
<p>
<strong>2)</strong> Create a sequence of numbers from a start value to a stop value (which is <em>exclusive</em>) with a step size. This is useful when you want to create a sequence of numbers that increments by some value other than one. For example, a list of even numbers:
</p>
<pre><code>range(start, stop, step)</code>

<code># Example
list(range(2,11,2))

[2, 4, 6, 8, 10]
</code></pre>
</div>
<li>
Create a <em>range object</em> that starts at zero and ends at five. Only use a <code>stop</code> argument.
</li>
<li>
Convert the <code>nums</code> variable into a list called <code>nums_list</code>.
</li>
<li>
Create a new list called <code>nums_list2</code> that starts at <strong>one</strong>, ends at <strong>eleven</strong>, and increments by <strong>two</strong> by unpacking a <em>range object</em> using the star character (<code>*</code>).
</li>
<div>
<div class="sourceCode" id="cb550"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb550-1"><a href="writing-efficient-python-code.html#cb550-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a range object that goes from 0 to 5</span></span>
<span id="cb550-2"><a href="writing-efficient-python-code.html#cb550-2" aria-hidden="true" tabindex="-1"></a>nums <span class="op">=</span> <span class="bu">range</span>(<span class="dv">6</span>)</span>
<span id="cb550-3"><a href="writing-efficient-python-code.html#cb550-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(nums))</span>
<span id="cb550-4"><a href="writing-efficient-python-code.html#cb550-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb550-5"><a href="writing-efficient-python-code.html#cb550-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert nums to a list</span></span></code></pre></div>
<pre><code>## &lt;class 'range'&gt;</code></pre>
<div class="sourceCode" id="cb552"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb552-1"><a href="writing-efficient-python-code.html#cb552-1" aria-hidden="true" tabindex="-1"></a>nums_list <span class="op">=</span> <span class="bu">list</span>(nums)</span>
<span id="cb552-2"><a href="writing-efficient-python-code.html#cb552-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nums_list)</span></code></pre></div>
<pre><code>## [0, 1, 2, 3, 4, 5]</code></pre>
</div>
<div>
<div class="sourceCode" id="cb554"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb554-1"><a href="writing-efficient-python-code.html#cb554-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new list of odd numbers from 1 to 11 by unpacking a range object</span></span>
<span id="cb554-2"><a href="writing-efficient-python-code.html#cb554-2" aria-hidden="true" tabindex="-1"></a>nums_list2 <span class="op">=</span> [<span class="op">*</span><span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">12</span>,<span class="dv">2</span>)]</span>
<span id="cb554-3"><a href="writing-efficient-python-code.html#cb554-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nums_list2)</span></code></pre></div>
<pre><code>## [1, 3, 5, 7, 9, 11]</code></pre>
</div>
<p class>
Nicely done! Notice that using Python’s <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> function allows you to create a <em>range object</em> of numbers without explicitly typing them out. You can convert the <em>range object</em> into a list by using the <code><a href="https://rdrr.io/r/base/list.html">list()</a></code> function or by unpacking it into a list using the star character (<code>*</code>). Cool!
</p>
</div>
<div id="built-in-practice-enumerate" class="section level4 unnumbered">
<h4>Built-in practice: enumerate()<a class="anchor" aria-label="anchor" href="#built-in-practice-enumerate"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
In this exercise, you’ll practice using Python’s built-in function <code>enumerate()</code>. This function is useful for obtaining an indexed list. For example, suppose you had a list of people that arrived at a party you are hosting. The list is ordered by arrival (Jerry was the first to arrive, followed by Kramer, etc.):
</p>
<pre><code>names = ['Jerry', 'Kramer', 'Elaine', 'George', 'Newman']
</code></pre>
<p>
If you wanted to attach an index representing a person’s arrival order, you <em>could</em> use the following for loop:
</p>
<pre><code>indexed_names = []
for i in range(len(names)):
    index_name = (i, names[i])
    indexed_names.append(index_name)

[(0,'Jerry'),(1,'Kramer'),(2,'Elaine'),(3,'George'),(4,'Newman')]
</code></pre>
<p>
But, that’s not the most efficient solution. Let’s explore how to use <code>enumerate()</code> to make this more efficient.
</p>
</div>
<li>
Instead of using <code>for i in range(len(names))</code>, update the for loop to use <code>i</code> as the index variable and <code>name</code> as the iterator variable and use <code>enumerate()</code>.
</li>
<li>
Rewrite the previous for loop using <code>enumerate()</code> and list comprehension to create a new list, <code>indexed_names_comp</code>.
</li>
<li>
Create another list (<code>indexed_names_unpack</code>) by using the star character (<code>*</code>) to unpack the <em>enumerate object</em> created from using <code>enumerate()</code> on <code>names</code>. This time, <strong>start the index for</strong> <code>enumerate()</code> <strong>at one instead of zero.</strong>
</li>
<div>
<div class="sourceCode" id="cb556"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb556-1"><a href="writing-efficient-python-code.html#cb556-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rewrite the for loop to use enumerate</span></span>
<span id="cb556-2"><a href="writing-efficient-python-code.html#cb556-2" aria-hidden="true" tabindex="-1"></a>indexed_names <span class="op">=</span> []</span>
<span id="cb556-3"><a href="writing-efficient-python-code.html#cb556-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,name <span class="kw">in</span> <span class="bu">enumerate</span>(names):</span>
<span id="cb556-4"><a href="writing-efficient-python-code.html#cb556-4" aria-hidden="true" tabindex="-1"></a>    index_name <span class="op">=</span> (i,name)</span>
<span id="cb556-5"><a href="writing-efficient-python-code.html#cb556-5" aria-hidden="true" tabindex="-1"></a>    indexed_names.append(index_name) </span>
<span id="cb556-6"><a href="writing-efficient-python-code.html#cb556-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(indexed_names)</span></code></pre></div>
<pre><code>## [(0, 'Jerry'), (1, 'Kramer'), (2, 'Elaine'), (3, 'George'), (4, 'Newman')]</code></pre>
</div>
<div>
<div class="sourceCode" id="cb558"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb558-1"><a href="writing-efficient-python-code.html#cb558-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rewrite the above for loop using list comprehension</span></span>
<span id="cb558-2"><a href="writing-efficient-python-code.html#cb558-2" aria-hidden="true" tabindex="-1"></a>indexed_names_comp <span class="op">=</span> [(i,name) <span class="cf">for</span> i,name <span class="kw">in</span> <span class="bu">enumerate</span>(names)]</span>
<span id="cb558-3"><a href="writing-efficient-python-code.html#cb558-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(indexed_names_comp)</span></code></pre></div>
<pre><code>## [(0, 'Jerry'), (1, 'Kramer'), (2, 'Elaine'), (3, 'George'), (4, 'Newman')]</code></pre>
</div>
<div>
<div class="sourceCode" id="cb560"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb560-1"><a href="writing-efficient-python-code.html#cb560-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unpack an enumerate object with a starting index of one</span></span>
<span id="cb560-2"><a href="writing-efficient-python-code.html#cb560-2" aria-hidden="true" tabindex="-1"></a>indexed_names_unpack <span class="op">=</span> [<span class="op">*</span><span class="bu">enumerate</span>(names, <span class="dv">1</span>)]</span>
<span id="cb560-3"><a href="writing-efficient-python-code.html#cb560-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(indexed_names_unpack)</span></code></pre></div>
<pre><code>## [(1, 'Jerry'), (2, 'Kramer'), (3, 'Elaine'), (4, 'George'), (5, 'Newman')]</code></pre>
</div>
<p class>
Awesome! Using Python’s built-in <code>enumerate()</code> function allows you to create an index for each item in the object you give it. You can use list comprehension, or even unpack the <em>enumerate object</em> directly into a list, to write a nice simple one-liner.
</p>
</div>
<div id="built-in-practice-map" class="section level4 unnumbered">
<h4>Built-in practice: map()<a class="anchor" aria-label="anchor" href="#built-in-practice-map"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
In this exercise, you’ll practice using Python’s built-in <code>map()</code> function to apply a function to every element of an object. Let’s look at a list of party guests:
</p>
<pre><code>names = ['Jerry', 'Kramer', 'Elaine', 'George', 'Newman']
</code></pre>
<p>
Suppose you wanted to create a new list (called <code>names_uppercase</code>) that converted all the letters in each name to uppercase. you could accomplish this with the below for loop:
</p>
<pre><code>names_uppercase = []

for name in names:
  names_uppercase.append(name.upper())

['JERRY', 'KRAMER', 'ELAINE', 'GEORGE', 'NEWMAN']
</code></pre>
<p>
Let’s explore using the <code>map()</code> function to do this more efficiently in one line of code.
</p>
</div>
<li>
Use <code>map()</code> and the method <code>str.upper()</code> to convert each name in the list <code>names</code> to uppercase. Save this to the variable <code>names_map</code>.
</li>
<li>
Print the data type of <code>names_map</code>.
</li>
<li>
Unpack the contents of <code>names_map</code> into a list called <code>names_uppercase</code> using the star character (<code>*</code>).
</li>
<li>
Print <code>names_uppercase</code> and observe its contents.
</li>
<div>
<div class="sourceCode" id="cb562"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb562-1"><a href="writing-efficient-python-code.html#cb562-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use map to apply str.upper to each element in names</span></span>
<span id="cb562-2"><a href="writing-efficient-python-code.html#cb562-2" aria-hidden="true" tabindex="-1"></a>names_map  <span class="op">=</span> <span class="bu">map</span>(<span class="bu">str</span>.upper, names)</span>
<span id="cb562-3"><a href="writing-efficient-python-code.html#cb562-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb562-4"><a href="writing-efficient-python-code.html#cb562-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the type of the names_map</span></span>
<span id="cb562-5"><a href="writing-efficient-python-code.html#cb562-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(names_map))</span></code></pre></div>
<pre><code>## &lt;class 'map'&gt;</code></pre>
</div>
<div>
<div class="sourceCode" id="cb564"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb564-1"><a href="writing-efficient-python-code.html#cb564-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unpack names_map into a list</span></span>
<span id="cb564-2"><a href="writing-efficient-python-code.html#cb564-2" aria-hidden="true" tabindex="-1"></a>names_uppercase <span class="op">=</span> [<span class="op">*</span>names_map]</span>
<span id="cb564-3"><a href="writing-efficient-python-code.html#cb564-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb564-4"><a href="writing-efficient-python-code.html#cb564-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the list created above</span></span>
<span id="cb564-5"><a href="writing-efficient-python-code.html#cb564-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(names_uppercase)</span></code></pre></div>
<pre><code>## ['JERRY', 'KRAMER', 'ELAINE', 'GEORGE', 'NEWMAN']</code></pre>
</div>
<p class>
Well done! You used Python’s built-in <code>map()</code> function to apply the <code>str.upper()</code> method to each element in the <code>names</code> object. Later on in the course, you’ll explore how using <code>map()</code> can provide some efficiency improvements to your code.
</p>
</div>
</div>
<div id="the-power-of-numpy-arrays" class="section level3 unnumbered">
<h3>The power of NumPy arrays<a class="anchor" aria-label="anchor" href="#the-power-of-numpy-arrays"><i class="fas fa-link"></i></a>
</h3>
<div id="practice-with-numpy-arrays" class="section level4 unnumbered">
<h4>Practice with NumPy arrays<a class="anchor" aria-label="anchor" href="#practice-with-numpy-arrays"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Let’s practice slicing <code>numpy</code> arrays and using NumPy’s broadcasting concept. Remember, broadcasting refers to a <code>numpy</code> array’s ability to vectorize operations, so they are performed on all elements of an object at once.
</p>
<p>
A two-dimensional <code>numpy</code> array has been loaded into your session (called <code>nums</code>) and printed into the console for your convenience. <code>numpy</code> has been imported into your session as <code>np</code>.
</p>
</div>
<div>
<div class="sourceCode" id="cb566"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb566-1"><a href="writing-efficient-python-code.html#cb566-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb566-2"><a href="writing-efficient-python-code.html#cb566-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb566-3"><a href="writing-efficient-python-code.html#cb566-3" aria-hidden="true" tabindex="-1"></a>nums <span class="op">=</span> np.array([[ <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">4</span>,  <span class="dv">5</span>], [ <span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span>,  <span class="dv">9</span>, <span class="dv">10</span>]])</span></code></pre></div>
</div>
<li>
Print the second row of <code>nums</code>.
</li>
<li>
Print the items of <code>nums</code> that are greater than six.
</li>
<li>
Create <code>nums_dbl</code> that doubles each number in <code>nums</code>.
</li>
<li>
Replace the third column in <code>nums</code> with a new column that adds <code>1</code> to each item in the original column.
</li>
<div>
<div class="sourceCode" id="cb567"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb567-1"><a href="writing-efficient-python-code.html#cb567-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print second row of nums</span></span>
<span id="cb567-2"><a href="writing-efficient-python-code.html#cb567-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nums[<span class="dv">1</span>,:])</span>
<span id="cb567-3"><a href="writing-efficient-python-code.html#cb567-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb567-4"><a href="writing-efficient-python-code.html#cb567-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print all elements of nums that are greater than six</span></span></code></pre></div>
<pre><code>## [ 6  7  8  9 10]</code></pre>
<div class="sourceCode" id="cb569"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb569-1"><a href="writing-efficient-python-code.html#cb569-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nums[nums <span class="op">&gt;</span> <span class="dv">6</span>])</span></code></pre></div>
<pre><code>## [ 7  8  9 10]</code></pre>
</div>
<div>
<div class="sourceCode" id="cb571"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb571-1"><a href="writing-efficient-python-code.html#cb571-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double every element of nums</span></span>
<span id="cb571-2"><a href="writing-efficient-python-code.html#cb571-2" aria-hidden="true" tabindex="-1"></a>nums_dbl <span class="op">=</span> nums <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb571-3"><a href="writing-efficient-python-code.html#cb571-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nums_dbl)</span></code></pre></div>
<pre><code>## [[ 2  4  6  8 10]
##  [12 14 16 18 20]]</code></pre>
</div>
<div>
<div class="sourceCode" id="cb573"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb573-1"><a href="writing-efficient-python-code.html#cb573-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace the third column of nums</span></span>
<span id="cb573-2"><a href="writing-efficient-python-code.html#cb573-2" aria-hidden="true" tabindex="-1"></a>nums[:,<span class="dv">2</span>] <span class="op">=</span> nums[:,<span class="dv">2</span>] <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb573-3"><a href="writing-efficient-python-code.html#cb573-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nums)</span></code></pre></div>
<pre><code>## [[ 1  2  4  4  5]
##  [ 6  7  9  9 10]]</code></pre>
</div>
<div>
<p>
When compared to a list object, what are two advantages of using a <code>numpy</code> array?
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>A <code>numpy</code> array is the only data structure that can be used with the <code>numpy</code> package and often has less verbose indexing syntax.</li>
<li>
<input type="checkbox" disabled checked>A <code>numpy</code> array contains homogeneous data types (which reduces memory consumption) and provides the ability to apply operations on all elements through broadcasting.</li>
<li>
<input type="checkbox" disabled>A <code>numpy</code> array supports boolean indexing and has much better one-dimensional indexing capabilities.</li>
<li>
<input type="checkbox" disabled>Both a list object and a <code>numpy</code> array are identical.</li>
</ul>
<p class>
Well done! You’re slicing <code>numpy</code> arrays like a pro and learning how to take advantage of NumPy’s broadcasting concept. Using <code>numpy</code> arrays allows you to take advantage of an array’s memory efficient nature and easily perform mathematical operations on your data.
</p>
</div>
<div id="bringing-it-all-together-festivus" class="section level4 unnumbered">
<h4>Bringing it all together: Festivus!<a class="anchor" aria-label="anchor" href="#bringing-it-all-together-festivus"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
In this exercise, you will be throwing a party—a Festivus if you will!
</p>
<p>
You have a list of guests (the <code>names</code> list). Each guest, for whatever reason, has decided to show up to the party in 10-minute increments. For example, Jerry shows up to Festivus 10 minutes into the party’s start time, Kramer shows up 20 minutes into the party, and so on and so forth.
</p>
<p>
We want to write a few simple lines of code, using the built-ins we have covered, to welcome each of your guests and let them know how many minutes late they are to your party. Note that <code>numpy</code> has been imported into your session as <code>np</code> and the <code>names</code> list has been loaded as well.
</p>
<p>
Let’s welcome your guests!
</p>
</div>
<div>
<div class="sourceCode" id="cb575"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb575-1"><a href="writing-efficient-python-code.html#cb575-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb575-2"><a href="writing-efficient-python-code.html#cb575-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> welcome_guest(guest_and_time):</span>
<span id="cb575-3"><a href="writing-efficient-python-code.html#cb575-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb575-4"><a href="writing-efficient-python-code.html#cb575-4" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns a welcome string for the guest_and_time tuple.</span></span>
<span id="cb575-5"><a href="writing-efficient-python-code.html#cb575-5" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb575-6"><a href="writing-efficient-python-code.html#cb575-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb575-7"><a href="writing-efficient-python-code.html#cb575-7" aria-hidden="true" tabindex="-1"></a><span class="co">        guest_and_time (tuple): The guest and time tuple to create</span></span>
<span id="cb575-8"><a href="writing-efficient-python-code.html#cb575-8" aria-hidden="true" tabindex="-1"></a><span class="co">            a welcome string for.</span></span>
<span id="cb575-9"><a href="writing-efficient-python-code.html#cb575-9" aria-hidden="true" tabindex="-1"></a><span class="co">            </span></span>
<span id="cb575-10"><a href="writing-efficient-python-code.html#cb575-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb575-11"><a href="writing-efficient-python-code.html#cb575-11" aria-hidden="true" tabindex="-1"></a><span class="co">        welcome_string (str): A string welcoming the guest to Festivus.</span></span>
<span id="cb575-12"><a href="writing-efficient-python-code.html#cb575-12" aria-hidden="true" tabindex="-1"></a><span class="co">        'Welcome to Festivus {guest}... You're {time} min late.'</span></span>
<span id="cb575-13"><a href="writing-efficient-python-code.html#cb575-13" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb575-14"><a href="writing-efficient-python-code.html#cb575-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb575-15"><a href="writing-efficient-python-code.html#cb575-15" aria-hidden="true" tabindex="-1"></a>    guest <span class="op">=</span> guest_and_time[<span class="dv">0</span>]</span>
<span id="cb575-16"><a href="writing-efficient-python-code.html#cb575-16" aria-hidden="true" tabindex="-1"></a>    arrival_time <span class="op">=</span> guest_and_time[<span class="dv">1</span>]</span>
<span id="cb575-17"><a href="writing-efficient-python-code.html#cb575-17" aria-hidden="true" tabindex="-1"></a>    welcome_string <span class="op">=</span> <span class="st">"Welcome to Festivus </span><span class="sc">{}</span><span class="st">... You're </span><span class="sc">{}</span><span class="st"> min late."</span>.<span class="bu">format</span>(guest,arrival_time)</span>
<span id="cb575-18"><a href="writing-efficient-python-code.html#cb575-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> welcome_string</span></code></pre></div>
</div>
<li>
Use <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> to create a list of arrival times (10 through 50 incremented by 10). Create the list <code>arrival_times</code> by unpacking the <em>range object</em>.
</li>
<div>
<div class="sourceCode" id="cb576"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb576-1"><a href="writing-efficient-python-code.html#cb576-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of arrival times</span></span>
<span id="cb576-2"><a href="writing-efficient-python-code.html#cb576-2" aria-hidden="true" tabindex="-1"></a>arrival_times <span class="op">=</span> [<span class="op">*</span><span class="bu">range</span>(<span class="dv">10</span>, <span class="dv">60</span>, <span class="dv">10</span>)]</span>
<span id="cb576-3"><a href="writing-efficient-python-code.html#cb576-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb576-4"><a href="writing-efficient-python-code.html#cb576-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arrival_times)</span></code></pre></div>
<pre><code>## [10, 20, 30, 40, 50]</code></pre>
</div>
<li>
You realize your clock is three minutes fast. Convert the <code>arrival_times</code> list into a <code>numpy</code> array (called <code>arrival_times_np</code>) and use NumPy broadcasting to subtract three minutes from each arrival time.
</li>
<div>
<div class="sourceCode" id="cb578"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb578-1"><a href="writing-efficient-python-code.html#cb578-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of arrival times</span></span>
<span id="cb578-2"><a href="writing-efficient-python-code.html#cb578-2" aria-hidden="true" tabindex="-1"></a>arrival_times <span class="op">=</span> [<span class="op">*</span><span class="bu">range</span>(<span class="dv">10</span>,<span class="dv">60</span>,<span class="dv">10</span>)]</span>
<span id="cb578-3"><a href="writing-efficient-python-code.html#cb578-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb578-4"><a href="writing-efficient-python-code.html#cb578-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert arrival_times to an array and update the times</span></span>
<span id="cb578-5"><a href="writing-efficient-python-code.html#cb578-5" aria-hidden="true" tabindex="-1"></a>arrival_times_np <span class="op">=</span> np.array(arrival_times)</span>
<span id="cb578-6"><a href="writing-efficient-python-code.html#cb578-6" aria-hidden="true" tabindex="-1"></a>new_times <span class="op">=</span> arrival_times_np <span class="op">-</span> <span class="dv">3</span></span>
<span id="cb578-7"><a href="writing-efficient-python-code.html#cb578-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb578-8"><a href="writing-efficient-python-code.html#cb578-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(new_times)</span></code></pre></div>
<pre><code>## [ 7 17 27 37 47]</code></pre>
</div>
<li>
Use list comprehension with <code>enumerate()</code> to pair each guest in the <code>names</code> list to their updated arrival time in the <code>new_times</code> array. You’ll need to use the index variable created from using <code>enumerate()</code> on <code>new_times</code> to index the <code>names</code> list.
</li>
<div>
<div class="sourceCode" id="cb580"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb580-1"><a href="writing-efficient-python-code.html#cb580-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of arrival times</span></span>
<span id="cb580-2"><a href="writing-efficient-python-code.html#cb580-2" aria-hidden="true" tabindex="-1"></a>arrival_times <span class="op">=</span> [<span class="op">*</span><span class="bu">range</span>(<span class="dv">10</span>,<span class="dv">60</span>,<span class="dv">10</span>)]</span>
<span id="cb580-3"><a href="writing-efficient-python-code.html#cb580-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb580-4"><a href="writing-efficient-python-code.html#cb580-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert arrival_times to an array and update the times</span></span>
<span id="cb580-5"><a href="writing-efficient-python-code.html#cb580-5" aria-hidden="true" tabindex="-1"></a>arrival_times_np <span class="op">=</span> np.array(arrival_times)</span>
<span id="cb580-6"><a href="writing-efficient-python-code.html#cb580-6" aria-hidden="true" tabindex="-1"></a>new_times <span class="op">=</span> arrival_times_np <span class="op">-</span> <span class="dv">3</span></span>
<span id="cb580-7"><a href="writing-efficient-python-code.html#cb580-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb580-8"><a href="writing-efficient-python-code.html#cb580-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use list comprehension and enumerate to pair guests to new times</span></span>
<span id="cb580-9"><a href="writing-efficient-python-code.html#cb580-9" aria-hidden="true" tabindex="-1"></a>guest_arrivals <span class="op">=</span> [(names[i],time) <span class="cf">for</span> i,time <span class="kw">in</span> <span class="bu">enumerate</span>(new_times)]</span>
<span id="cb580-10"><a href="writing-efficient-python-code.html#cb580-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb580-11"><a href="writing-efficient-python-code.html#cb580-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(guest_arrivals)</span></code></pre></div>
<pre><code>## [('Jerry', 7), ('Kramer', 17), ('Elaine', 27), ('George', 37), ('Newman', 47)]</code></pre>
</div>
<li>
A function named <code>welcome_guest()</code> has been pre-loaded into your session. Use <code>map()</code> to apply this function to each element of the <code>guest_arrivals</code> list and save it as the variable <code>welcome_map</code>.
</li>
<div>
<div class="sourceCode" id="cb582"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb582-1"><a href="writing-efficient-python-code.html#cb582-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of arrival times</span></span>
<span id="cb582-2"><a href="writing-efficient-python-code.html#cb582-2" aria-hidden="true" tabindex="-1"></a>arrival_times <span class="op">=</span> [<span class="op">*</span><span class="bu">range</span>(<span class="dv">10</span>,<span class="dv">60</span>,<span class="dv">10</span>)]</span>
<span id="cb582-3"><a href="writing-efficient-python-code.html#cb582-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-4"><a href="writing-efficient-python-code.html#cb582-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert arrival_times to an array and update the times</span></span>
<span id="cb582-5"><a href="writing-efficient-python-code.html#cb582-5" aria-hidden="true" tabindex="-1"></a>arrival_times_np <span class="op">=</span> np.array(arrival_times)</span>
<span id="cb582-6"><a href="writing-efficient-python-code.html#cb582-6" aria-hidden="true" tabindex="-1"></a>new_times <span class="op">=</span> arrival_times_np <span class="op">-</span> <span class="dv">3</span></span>
<span id="cb582-7"><a href="writing-efficient-python-code.html#cb582-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-8"><a href="writing-efficient-python-code.html#cb582-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use list comprehension and enumerate to pair guests to new times</span></span>
<span id="cb582-9"><a href="writing-efficient-python-code.html#cb582-9" aria-hidden="true" tabindex="-1"></a>guest_arrivals <span class="op">=</span> [(names[i],time) <span class="cf">for</span> i,time <span class="kw">in</span> <span class="bu">enumerate</span>(new_times)]</span>
<span id="cb582-10"><a href="writing-efficient-python-code.html#cb582-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-11"><a href="writing-efficient-python-code.html#cb582-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Map the welcome_guest function to each (guest,time) pair</span></span>
<span id="cb582-12"><a href="writing-efficient-python-code.html#cb582-12" aria-hidden="true" tabindex="-1"></a>welcome_map <span class="op">=</span> <span class="bu">map</span>(welcome_guest, guest_arrivals)</span>
<span id="cb582-13"><a href="writing-efficient-python-code.html#cb582-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb582-14"><a href="writing-efficient-python-code.html#cb582-14" aria-hidden="true" tabindex="-1"></a>guest_welcomes <span class="op">=</span> [<span class="op">*</span>welcome_map]</span>
<span id="cb582-15"><a href="writing-efficient-python-code.html#cb582-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>guest_welcomes, sep<span class="op">=</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## Welcome to Festivus Jerry... You're 7 min late.
## Welcome to Festivus Kramer... You're 17 min late.
## Welcome to Festivus Elaine... You're 27 min late.
## Welcome to Festivus George... You're 37 min late.
## Welcome to Festivus Newman... You're 47 min late.</code></pre>
</div>
<p class>
Congratulations and happy Festivus! You’re using Python built-ins like a pro and well on your way to writing efficient Python code. Believe it or not, there is a way to make these simple lines of code even more efficient! We’ll cover this in a future chapter, so continue on to see how!
</p>
</div>
</div>
</div>
<div id="timing-and-profiling-code" class="section level2 unnumbered">
<h2>Timing and profiling code<a class="anchor" aria-label="anchor" href="#timing-and-profiling-code"><i class="fas fa-link"></i></a>
</h2>
<p class>
In this chapter, you will learn how to gather and compare runtimes between different coding approaches. You’ll practice using the line_profiler and memory_profiler packages to profile your code base and spot bottlenecks. Then, you’ll put your learnings to practice by replacing these bottlenecks with efficient Python code.
</p>
<div id="examining-runtime" class="section level3 unnumbered">
<h3>Examining runtime<a class="anchor" aria-label="anchor" href="#examining-runtime"><i class="fas fa-link"></i></a>
</h3>
<div id="using-timeit-your-turn" class="section level4 unnumbered">
<h4>Using %timeit: your turn!<a class="anchor" aria-label="anchor" href="#using-timeit-your-turn"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
You’d like to create a list of integers from 0 to 50 using the <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> function. However, you are unsure whether using list comprehension or unpacking the <em>range object</em> into a list is faster. Let’s use <code>%timeit</code> to find the best implementation.
</p>
<p>
For your convenience, a reference table of time orders of magnitude is provided below (faster at the top).
</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th>
symbol
</th>
<th>
name
</th>
<th>
unit (s)
</th>
</tr></thead>
<tbody>
<tr>
<td>
ns
</td>
<td>
nanosecond
</td>
<td>
10<sup>-9</sup>
</td>
</tr>
<tr>
<td>
µs (us)
</td>
<td>
microsecond
</td>
<td>
10<sup>-6</sup>
</td>
</tr>
<tr>
<td>
ms
</td>
<td>
millisecond
</td>
<td>
10<sup>-3</sup>
</td>
</tr>
<tr>
<td>
s
</td>
<td>
second
</td>
<td>
10<sup>0</sup>
</td>
</tr>
</tbody>
</table></div>
</div>
<li>
Use list comprehension and <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> to create a list of integers from 0 to 50 called <code>nums_list_comp</code>.
</li>
<div>
<div class="sourceCode" id="cb584"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb584-1"><a href="writing-efficient-python-code.html#cb584-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of integers (0-50) using list comprehension</span></span>
<span id="cb584-2"><a href="writing-efficient-python-code.html#cb584-2" aria-hidden="true" tabindex="-1"></a>nums_list_comp <span class="op">=</span> [num <span class="cf">for</span> num <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">51</span>)]</span>
<span id="cb584-3"><a href="writing-efficient-python-code.html#cb584-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nums_list_comp)</span></code></pre></div>
<pre><code>## [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50]</code></pre>
</div>
<li>
Use <code><a href="https://rdrr.io/r/base/range.html">range()</a></code> to create a list of integers from 0 to 50 and unpack its contents into a list called <code>nums_unpack</code>.
</li>
<div>
<div class="sourceCode" id="cb586"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb586-1"><a href="writing-efficient-python-code.html#cb586-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of integers (0-50) using list comprehension</span></span>
<span id="cb586-2"><a href="writing-efficient-python-code.html#cb586-2" aria-hidden="true" tabindex="-1"></a>nums_list_comp <span class="op">=</span> [num <span class="cf">for</span> num <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">51</span>)]</span>
<span id="cb586-3"><a href="writing-efficient-python-code.html#cb586-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nums_list_comp)</span></code></pre></div>
<pre><code>## [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50]</code></pre>
</div>
<div>
<div class="sourceCode" id="cb588"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb588-1"><a href="writing-efficient-python-code.html#cb588-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of integers (0-50) by unpacking range</span></span>
<span id="cb588-2"><a href="writing-efficient-python-code.html#cb588-2" aria-hidden="true" tabindex="-1"></a>nums_unpack <span class="op">=</span> [<span class="op">*</span><span class="bu">range</span>(<span class="dv">51</span>)]</span>
<span id="cb588-3"><a href="writing-efficient-python-code.html#cb588-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nums_unpack)</span></code></pre></div>
<pre><code>## [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50]</code></pre>
</div>
<div>
<p>
Use <code>%timeit</code> <strong>within your IPython console</strong> (i.e. <strong>not</strong> within the script.py window) to compare the runtimes for creating a list of integers from 0 to 50 using list comprehension vs. unpacking the <em>range object</em>. Don’t include the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> statements when timing.
</p>
<p>
<strong>Which method was faster?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>List comprehension was faster than unpacking <code><a href="https://rdrr.io/r/base/range.html">range()</a></code>.</li>
<li>
<input type="checkbox" disabled checked>Unpacking the <em>range object</em> was faster than list comprehension.</li>
<li>
<input type="checkbox" disabled>Both methods had the same runtime.</li>
</ul>
<p class>
Nice work! You used <code>%timeit</code> to gather and compare runtimes! Although list comprehension is a useful and powerful tool, sometimes unpacking an object can save time and looks a little cleaner.
</p>
</div>
<div id="using-timeit-specifying-number-of-runs-and-loops" class="section level4 unnumbered">
<h4>Using %timeit: specifying number of runs and loops<a class="anchor" aria-label="anchor" href="#using-timeit-specifying-number-of-runs-and-loops"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
A list of 480 superheroes has been loaded into your session (called <code>heroes</code>). You’d like to analyze the runtime for converting this <code>heroes</code> list into a set. Instead of relying on the default settings for <code>%timeit</code>, you’d like to only use 5 runs and 25 loops per each run.
</p>
<p>
<strong>What is the correct syntax when using <code>%timeit</code> and only using 5 runs with 25 loops per each run?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled><code>timeit -runs5 -loops25 set(heroes)</code>
</li>
<li>
<input type="checkbox" disabled><code>%%timeit -r5 -n25 set(heroes)</code>
</li>
<li>
<input type="checkbox" disabled><code>%timeit set(heroes), 5, 25</code>
</li>
<li>
<input type="checkbox" disabled checked><code>%timeit -r5 -n25 set(heroes)</code>
</li>
</ul>
<p class>
Correct! <code>%timeit</code> lets you specify the number of runs and number of loops you want to consider with the <code>-r</code> and <code>-n</code> flags. You can use <code>-r5</code> and <code>-n25</code> to specify 5 iterations each with 25 loops when calculating the average and standard deviation of runtime for your code.
</p>
</div>
<div id="using-timeit-formal-name-or-literal-syntax" class="section level4 unnumbered">
<h4>Using %timeit: formal name or literal syntax<a class="anchor" aria-label="anchor" href="#using-timeit-formal-name-or-literal-syntax"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Python allows you to create data structures using <strong>either</strong> a <em>formal name</em> or a <em>literal syntax</em>. In this exercise, you’ll explore how using a <em>literal syntax</em> for creating a data structure can speed up runtimes.
</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr>
<th>
data structure
</th>
<th>
formal name
</th>
<th>
literal syntax
</th>
</tr></thead>
<tbody>
<tr>
<td>
list
</td>
<td>
<code><a href="https://rdrr.io/r/base/list.html">list()</a></code>
</td>
<td>
<code>[]</code>
</td>
</tr>
<tr>
<td>
dictionary
</td>
<td>
<code>dict()</code>
</td>
<td>
<code><a href="https://rdrr.io/r/base/Paren.html">{}</a></code>
</td>
</tr>
<tr>
<td>
tuple
</td>
<td>
<code>tuple()</code>
</td>
<td>
<code>()</code>
</td>
</tr>
</tbody>
</table></div>
</div>
<li>
Create an empty list called <code>formal_list</code> using the formal name (<code><a href="https://rdrr.io/r/base/list.html">list()</a></code>).
</li>
<li>
Create an empty list called <code>literal_list</code> using the literal syntax (<code>[]</code>).
</li>
<div>
<div class="sourceCode" id="cb590"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb590-1"><a href="writing-efficient-python-code.html#cb590-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list using the formal name</span></span>
<span id="cb590-2"><a href="writing-efficient-python-code.html#cb590-2" aria-hidden="true" tabindex="-1"></a>formal_list <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb590-3"><a href="writing-efficient-python-code.html#cb590-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(formal_list)</span></code></pre></div>
<pre><code>## []</code></pre>
</div>
<div>
<div class="sourceCode" id="cb592"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb592-1"><a href="writing-efficient-python-code.html#cb592-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list using the literal syntax</span></span>
<span id="cb592-2"><a href="writing-efficient-python-code.html#cb592-2" aria-hidden="true" tabindex="-1"></a>literal_list <span class="op">=</span> []</span>
<span id="cb592-3"><a href="writing-efficient-python-code.html#cb592-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(literal_list)</span></code></pre></div>
<pre><code>## []</code></pre>
</div>
<li>
Print out the type of <code>formal_list</code> and <code>literal_list</code> to show that both naming conventions create a list.
</li>
<div>
<div class="sourceCode" id="cb594"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb594-1"><a href="writing-efficient-python-code.html#cb594-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list using the formal name</span></span>
<span id="cb594-2"><a href="writing-efficient-python-code.html#cb594-2" aria-hidden="true" tabindex="-1"></a>formal_list <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb594-3"><a href="writing-efficient-python-code.html#cb594-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(formal_list)</span></code></pre></div>
<pre><code>## []</code></pre>
</div>
<div>
<div class="sourceCode" id="cb596"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb596-1"><a href="writing-efficient-python-code.html#cb596-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list using the literal syntax</span></span>
<span id="cb596-2"><a href="writing-efficient-python-code.html#cb596-2" aria-hidden="true" tabindex="-1"></a>literal_list <span class="op">=</span> []</span>
<span id="cb596-3"><a href="writing-efficient-python-code.html#cb596-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(literal_list)</span></code></pre></div>
<pre><code>## []</code></pre>
</div>
<div>
<div class="sourceCode" id="cb598"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb598-1"><a href="writing-efficient-python-code.html#cb598-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print out the type of formal_list</span></span>
<span id="cb598-2"><a href="writing-efficient-python-code.html#cb598-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(formal_list))</span></code></pre></div>
<pre><code>## &lt;class 'list'&gt;</code></pre>
</div>
<div>
<div class="sourceCode" id="cb600"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb600-1"><a href="writing-efficient-python-code.html#cb600-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print out the type of literal_list</span></span>
<span id="cb600-2"><a href="writing-efficient-python-code.html#cb600-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(literal_list))</span></code></pre></div>
<pre><code>## &lt;class 'list'&gt;</code></pre>
</div>
<div>
<p>
Use <code>%timeit</code> <strong>in your IPython console</strong> to compare runtimes between creating a list using the formal name (<code><a href="https://rdrr.io/r/base/list.html">list()</a></code>) and the literal syntax (<code>[]</code>). Don’t include the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> statements when timing.
</p>
<p>
<strong>Which naming convention is faster?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>Using the formal name (<code><a href="https://rdrr.io/r/base/list.html">list()</a></code>) to create a list is faster.</li>
<li>
<input type="checkbox" disabled checked>Using the literal syntax (<code>[]</code>) to create a list is faster.</li>
<li>
<input type="checkbox" disabled>Both naming conventions have the same runtime.</li>
</ul>
<p class>
Great job! Using Python’s literal syntax to define a data structure can speed up your runtime. Consider using the literal syntaxes (like <code>[]</code> instead of <code><a href="https://rdrr.io/r/base/list.html">list()</a></code>, <code><a href="https://rdrr.io/r/base/Paren.html">{}</a></code> instead of <code>dict()</code>, or <code>()</code> instead of <code>tuple()</code>), where applicable, to gain some speed.
</p>
</div>
<div id="using-cell-magic-mode-timeit" class="section level4 unnumbered">
<h4>Using cell magic mode (%%timeit)<a class="anchor" aria-label="anchor" href="#using-cell-magic-mode-timeit"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
From here on out, you’ll be working with a superheroes dataset. For this exercise, a list of each hero’s weight in kilograms (called <code>wts</code>) is loaded into your session. You’d like to convert these weights into pounds.
</p>
<p>
You could accomplish this using the below for loop:
</p>
<pre><code>hero_wts_lbs = []
for wt in wts:
    hero_wts_lbs.append(wt * 2.20462)
</code></pre>
<p>
Or you could use a <code>numpy</code> array to accomplish this task:
</p>
<pre><code>wts_np = np.array(wts)
hero_wts_lbs_np = wts_np * 2.20462
</code></pre>
<p>
Use <code>%%timeit</code> <strong>in your IPython console</strong> to compare runtimes between these two approaches. Make sure to press <code>SHIFT+ENTER</code> after the magic command to add a new line before writing the code you wish to time. After you’ve finished coding, answer the following question:
</p>
<p>
<strong>Which of the above techniques is faster?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>The for loop technique was faster.</li>
<li>
<input type="checkbox" disabled checked>The <code>numpy</code> technique was faster.</li>
<li>
<input type="checkbox" disabled>Both techniques had similar runtimes.</li>
</ul>
<p class>
Nice work! You used <code>%%timeit</code> (<em>cell magic mode</em>) to time multiple lines of code. Converting the <code>wts</code> list into a NumPy array and taking advantage of NumPy array broadcasting saved you some time! Moving forward, remember that you can use <code>%timeit</code> to gather runtime for a single line of code (<em>line magic mode</em>) and <code>%%timeit</code> to get the runtime for multiple lines of code.
</p>
</div>
</div>
<div id="code-profiling-for-runtime" class="section level3 unnumbered">
<h3>Code profiling for runtime<a class="anchor" aria-label="anchor" href="#code-profiling-for-runtime"><i class="fas fa-link"></i></a>
</h3>
<div id="pop-quiz-steps-for-using-lprun" class="section level4 unnumbered">
<h4>Pop quiz: steps for using %lprun<a class="anchor" aria-label="anchor" href="#pop-quiz-steps-for-using-lprun"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Below is the <code>convert_units()</code> function, which converts the heights and weights of our favorite superheroes from metric units to Imperial units.
</p>
<pre><code>def convert_units(heroes, heights, weights):

    new_hts = [ht * 0.39370  for ht in heights]
    new_wts = [wt * 2.20462  for wt in weights]

    hero_data = {}

    for i,hero in enumerate(heroes):
        hero_data[hero] = (new_hts[i], new_wts[i])

    return hero_data
</code></pre>
<p>
Suppose you have a list of superheroes (named <code>heroes</code>) along with each hero’s height (in centimeters) and weight (in kilograms) loaded as NumPy arrays (named <code>hts</code> and <code>wts</code> respectively).
</p>
<p>
<strong>What are the necessary steps you need to take in order to profile the <code>convert_units()</code> function acting on your superheroes data if you’d like to see line-by-line runtimes?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>Use <code>%load_ext line_profiler</code> to load the <code>line_profiler</code> within your IPython session.</li>
<li>
<input type="checkbox" disabled>Use <code>%lprun -f convert_units convert_units(heroes, hts, wts)</code> to get line-by-line runtimes.</li>
<li>
<input type="checkbox" disabled>Use <code>%timeit convert_units(heroes, hts, wts)</code> to gather runtimes.</li>
<li>
<input type="checkbox" disabled>The first and second options from above are necessary.</li>
</ul>
<p class="dc-completion-pane__message dc-u-maxw-100pc">
Great job! Now that you’ve reviewed the necessary steps for profiling a function for runtime, it’s time for you to practice profiling on your own!
</p>
</div>
<div id="using-lprun-spot-bottlenecks" class="section level4 unnumbered">
<h4>Using %lprun: spot bottlenecks<a class="anchor" aria-label="anchor" href="#using-lprun-spot-bottlenecks"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Profiling a function allows you to dig deeper into the function’s source code and potentially spot bottlenecks. When you see certain lines of code taking up the majority of the function’s runtime, it is an indication that you may want to deploy a different, more efficient technique.
</p>
<p>
Lets dig deeper into the <code>convert_units()</code> function.
</p>
<pre><code>def convert_units(heroes, heights, weights):

    new_hts = [ht * 0.39370  for ht in heights]
    new_wts = [wt * 2.20462  for wt in weights]

    hero_data = {}

    for i,hero in enumerate(heroes):
        hero_data[hero] = (new_hts[i], new_wts[i])

    return hero_data
</code></pre>
<p>
Load the <code>line_profiler</code> package into your IPython session. Then, use <code>%lprun</code> to profile the <code>convert_units()</code> function acting on your superheroes data. Remember to use the special syntax for working with <code>%lprun</code> (you’ll have to provide a <code>-f</code> flag specifying the function you’d like to profile).
</p>
<p>
The <code>convert_units()</code> function, <code>heroes</code> list, <code>hts</code> array, and <code>wts</code> array have been loaded into your session. After you’ve finished coding, answer the following question:
</p>
<p>
<strong>What percentage of time is spent on the <code>new_hts</code> list comprehension line of code relative to the total amount of time spent in the <code>convert_units()</code> function?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>0% - 10%</li>
<li>
<input type="checkbox" disabled checked>11% - 20%</li>
<li>
<input type="checkbox" disabled>21% - 50%</li>
<li>
<input type="checkbox" disabled>51% - 100%</li>
</ul>
<p class>
That’s right! This seems like it may be a potential bottleneck in your function. Can you think of a way to make this more efficient? You’ll explore a possible upgrade in the next exercise.
</p>
</div>
<div id="using-lprun-fix-the-bottleneck" class="section level4 unnumbered">
<h4>Using %lprun: fix the bottleneck<a class="anchor" aria-label="anchor" href="#using-lprun-fix-the-bottleneck"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
In the previous exercise, you profiled the <code>convert_units()</code> function and saw that the <code>new_hts</code> list comprehension could be a potential bottleneck. Did you notice that the <code>new_wts</code> list comprehension also accounted for a similar percentage of the runtime? This is an indication that you may want to create the <code>new_hts</code> and <code>new_wts</code> objects using a different technique.
</p>
<p>
Since the height and weight of each hero is stored in a <code>numpy</code> array, you can use array broadcasting rather than list comprehension to convert the heights and weights. This has been implemented in the below function:
</p>
<pre><code>def convert_units_broadcast(heroes, heights, weights):

    # Array broadcasting instead of list comprehension
    new_hts = heights * 0.39370
    new_wts = weights * 2.20462

    hero_data = {}

    for i,hero in enumerate(heroes):
        hero_data[hero] = (new_hts[i], new_wts[i])

    return hero_data
</code></pre>
<p>
Load the <code>line_profiler</code> package into your IPython session. Then, use <code>%lprun</code> to profile the <code>convert_units_broadcast()</code> function acting on your superheroes data. The <code>convert_units_broadcast()</code> function, <code>heroes</code> list, <code>hts</code> array, and <code>wts</code> array have been loaded into your session. After you’ve finished coding, answer the following question:
</p>
<p>
<strong>What percentage of time is spent on the <code>new_hts</code> array broadcasting line of code relative to the total amount of time spent in the <code>convert_units_broadcast()</code> function?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled checked>0% - 10%</li>
<li>
<input type="checkbox" disabled>11% - 20%</li>
<li>
<input type="checkbox" disabled>21% - 50%</li>
<li>
<input type="checkbox" disabled>51% - 100%</li>
</ul>
<p class>
That’s correct! By profiling the <code>convert_units()</code> function, you were able to see that using list comprehension was not the most efficient solution for creating the <code>new_hts</code> and <code>new_wts</code> objects. You also saw that using array broadcasting in the <code>convert_units_broadcast()</code> function dramatically decreased the percentage of time spent executing these lines of code. You may have noticed that your function still takes a while to iterate through the for loop. Don’t worry; you’ll cover how to make this loop more efficient in a later chapter.
</p>
</div>
</div>
<div id="code-profiling-for-memory-usage" class="section level3 unnumbered">
<h3>Code profiling for memory usage<a class="anchor" aria-label="anchor" href="#code-profiling-for-memory-usage"><i class="fas fa-link"></i></a>
</h3>
<div id="pop-quiz-steps-for-using-mprun" class="section level4 unnumbered">
<h4>Pop quiz: steps for using %mprun<a class="anchor" aria-label="anchor" href="#pop-quiz-steps-for-using-mprun"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Suppose you have a list of superheroes (named <code>heroes</code>) along with each hero’s height (in centimeters) and weight (in kilograms) loaded as NumPy arrays (named <code>hts</code> and <code>wts</code>, respectively). You also have a <code>convert_units()</code> function saved in a file titled <code>hero_funcs.py</code>.
</p>
<p>
<strong>What are the necessary steps you need to take in order to profile the <code>convert_units()</code> function acting on your superheroes data if you’d like to see the line-by-line memory consumption of <code>convert_units()</code>?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>Use the command <code>from hero_funcs import convert_units</code> to load the function you’d like to profile.</li>
<li>
<input type="checkbox" disabled>Use <code>%load_ext memory_profiler</code> to load the <code>memory_profiler</code> within your IPython session.</li>
<li>
<input type="checkbox" disabled>Use <code>%mprun -f convert_units convert_units(heroes, hts, wts)</code> to get line-by-line memory allocations.</li>
<li>
<input type="checkbox" disabled checked>All of the above.</li>
</ul>
<p class="dc-completion-pane__message dc-u-maxw-100pc">
Great job! Remember that using <code>%mprun</code> requires one additional step compared to using <code>%lprun</code> (i.e., you need to import the function in order to use <code>%mprun</code> on it). Now that you’ve reviewed these necessary steps, practice profiling for memory usage!
</p>
</div>
<div id="using-mprun-hero-bmi" class="section level4 unnumbered">
<h4>Using %mprun: Hero BMI<a class="anchor" aria-label="anchor" href="#using-mprun-hero-bmi"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
You’d like to calculate the body mass index (BMI) for a selected sample of heroes. BMI can be calculated using the below formula:
</p>
<div class="inline-figure">
<img src="https://assets.datacamp.com/production/repositories/3581/datasets/9d4abcd3b3d8c4911f8733bcf1b675fb1dbd023e/bmi_formula_pic.png" alt="BMI = mass(kg) / height(m)^2" width="150" height="60">
</div>
<p>
A random sample of 25,000 superheroes has been loaded into your session as an array called <code>sample_indices</code>. This sample is a list of <em>indices</em> that corresponds to each superhero’s index selected from the <code>heroes</code> list.
</p>
<p>
A function named <code>calc_bmi_lists</code> has also been created and saved to a file titled <code>bmi_lists.py</code>. For convenience, it is displayed below:
</p>
<pre><code>def calc_bmi_lists(sample_indices, hts, wts):

    # Gather sample heights and weights as lists
    s_hts = [hts[i] for i in sample_indices]
    s_wts = [wts[i] for i in sample_indices]

    # Convert heights from cm to m and square with list comprehension
    s_hts_m_sqr = [(ht / 100) ** 2 for ht in s_hts]

    # Calculate BMIs as a list with list comprehension
    bmis = [s_wts[i] / s_hts_m_sqr[i] for i in range(len(sample_indices))]

    return bmis
</code></pre>
<p>
Notice that this function performs all necessary calculations using <strong>list comprehension</strong> (hence the name <code>calc_bmi_lists()</code>). Dig deeper into this function and analyze the memory footprint for performing your calculations using <strong>lists</strong>:
</p>
<ul>
<li>
Load the <code>memory_profiler</code> package into your IPython session.
</li>
<li>
Import <code>calc_bmi_lists</code> from <code>bmi_lists</code>.
</li>
<li>
Once you’ve completed the above steps, use <code>%mprun</code> to profile the <code>calc_bmi_lists()</code> function acting on your superheroes data.
The <code>hts</code> array and <code>wts</code> array have already been loaded into your session.
</li>
</ul>
<p>
After you’ve finished coding, answer the following question:
</p>
<p>
<strong>How much memory do the list comprehension lines of code consume in the <code>calc_bmi_lists()</code> function? (i.e., what is the total sum of the <code>Increment</code> column for these four lines of code?)</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>20.0 MiB - 30.0 MiB</li>
<li>
<input type="checkbox" disabled checked>0.1 MiB - 2.0 MiB</li>
<li>
<input type="checkbox" disabled>10.0 MiB - 15.0 MiB</li>
<li>
<input type="checkbox" disabled>0.0 MiB</li>
</ul>
<p class>
Correct! Using a list comprehension approach allocates anywhere from 0.1 MiB to 2 MiB of memory to calculate your BMIs.<br><br>If you run <code>%mprun</code> multiple times within your session, you may notice that the <code>Increment</code> column reports <code>0.0 MiB</code> for all lines of code. This is due to a limitation with the magic command. After running <code>%mprun</code> once, the memory allocation analyzed previously is taken into account for all consecutive runs and <code>%mprun</code> will start from the place the first run left off.<br><br>Now that we’ve profiled the <code>calc_bmi_lists()</code> function, let’s see if you can do better with a different approach.
</p>
</div>
<div id="using-mprun-hero-bmi-2.0" class="section level4 unnumbered">
<h4>Using %mprun: Hero BMI 2.0<a class="anchor" aria-label="anchor" href="#using-mprun-hero-bmi-2.0"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Let’s see if using a different approach to calculate the BMIs can save some memory. If you remember, each hero’s height and weight is stored in a <code>numpy</code> array. That means you can use NumPy’s handy array indexing capabilities and broadcasting to perform your calculations. A function named <code>calc_bmi_arrays</code> has been created and saved to a file titled <code>bmi_arrays.py</code>. For convenience, it is displayed below:
</p>
<pre><code>def calc_bmi_arrays(sample_indices, hts, wts):

    # Gather sample heights and weights as arrays
    s_hts = hts[sample_indices]
    s_wts = wts[sample_indices]

    # Convert heights from cm to m and square with broadcasting
    s_hts_m_sqr = (s_hts / 100) ** 2

    # Calculate BMIs as an array using broadcasting
    bmis = s_wts / s_hts_m_sqr

    return bmis
</code></pre>
<p>
Notice that this function performs all necessary calculations using <strong>arrays</strong>.
</p>
<p>
Let’s see if this updated array approach decreases your memory footprint:
</p>
<ul>
<li>
Load the <code>memory_profiler</code> package into your IPython session.
</li>
<li>
Import <code>calc_bmi_arrays</code> from <code>bmi_arrays</code>.
</li>
<li>
Once you’ve completed the above steps, use <code>%mprun</code> to profile the <code>calc_bmi_arrays()</code> function acting on your superheroes data.
The <code>sample_indices</code> array, <code>hts</code> array, and <code>wts</code> array have been loaded into your session.
</li>
</ul>
<p>
After you’ve finished coding, answer the following question:
</p>
<p>
<strong>How much memory do the array indexing and broadcasting lines of code consume in the <code>calc_bmi_array()</code> function? (i.e., what is the total sum of the <code>Increment</code> column for these four lines of code?)</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>10.0 MiB - 15.0 MiB</li>
<li>
<input type="checkbox" disabled>0.0 MiB</li>
<li>
<input type="checkbox" disabled>20.0 MiB - 30.0 MiB</li>
<li>
<input type="checkbox" disabled checked>0.1 MiB - 2.0 MiB</li>
</ul>
<p class>
That’s right! By implementing an array approach, you were able to shave off a few MiBs. Although this isn’t a colossal gain, it still decreases your code’s overhead. If your input data grows over time, these small improvements could add up to some major efficiency gains.
</p>
</div>
<div id="bringing-it-all-together-star-wars-profiling" class="section level4 unnumbered">
<h4>Bringing it all together: Star Wars profiling<a class="anchor" aria-label="anchor" href="#bringing-it-all-together-star-wars-profiling"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
A list of 480 superheroes has been loaded into your session (called <code>heroes</code>) as well as a list of each hero’s corresponding publisher (called <code>publishers</code>).
</p>
<p>
You’d like to filter the <code>heroes</code> list based on a hero’s specific publisher, but are unsure which of the below functions is more efficient.
</p>
<pre><code>def get_publisher_heroes(heroes, publishers, desired_publisher):

    desired_heroes = []

    for i,pub in enumerate(publishers):
        if pub == desired_publisher:
            desired_heroes.append(heroes[i])

    return desired_heroes
</code></pre>
<pre><code>def get_publisher_heroes_np(heroes, publishers, desired_publisher):

    heroes_np = np.array(heroes)
    pubs_np = np.array(publishers)

    desired_heroes = heroes_np[pubs_np == desired_publisher]

    return desired_heroes
</code></pre>
</div>
<div>
<div class="sourceCode" id="cb602"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb602-1"><a href="writing-efficient-python-code.html#cb602-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb602-2"><a href="writing-efficient-python-code.html#cb602-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb602-3"><a href="writing-efficient-python-code.html#cb602-3" aria-hidden="true" tabindex="-1"></a>heroes <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/heroes.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb602-4"><a href="writing-efficient-python-code.html#cb602-4" aria-hidden="true" tabindex="-1"></a>publishers <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/publishers.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb602-5"><a href="writing-efficient-python-code.html#cb602-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-6"><a href="writing-efficient-python-code.html#cb602-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_publisher_heroes(heroes, publishers, desired_publisher):</span>
<span id="cb602-7"><a href="writing-efficient-python-code.html#cb602-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-8"><a href="writing-efficient-python-code.html#cb602-8" aria-hidden="true" tabindex="-1"></a>    desired_heroes <span class="op">=</span> []</span>
<span id="cb602-9"><a href="writing-efficient-python-code.html#cb602-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-10"><a href="writing-efficient-python-code.html#cb602-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i,pub <span class="kw">in</span> <span class="bu">enumerate</span>(publishers):</span>
<span id="cb602-11"><a href="writing-efficient-python-code.html#cb602-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> pub <span class="op">==</span> desired_publisher:</span>
<span id="cb602-12"><a href="writing-efficient-python-code.html#cb602-12" aria-hidden="true" tabindex="-1"></a>            desired_heroes.append(heroes[i])</span>
<span id="cb602-13"><a href="writing-efficient-python-code.html#cb602-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-14"><a href="writing-efficient-python-code.html#cb602-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> desired_heroes</span>
<span id="cb602-15"><a href="writing-efficient-python-code.html#cb602-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb602-16"><a href="writing-efficient-python-code.html#cb602-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_publisher_heroes_np(heroes, publishers, desired_publisher):</span>
<span id="cb602-17"><a href="writing-efficient-python-code.html#cb602-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-18"><a href="writing-efficient-python-code.html#cb602-18" aria-hidden="true" tabindex="-1"></a>    heroes_np <span class="op">=</span> np.array(heroes)</span>
<span id="cb602-19"><a href="writing-efficient-python-code.html#cb602-19" aria-hidden="true" tabindex="-1"></a>    pubs_np <span class="op">=</span> np.array(publishers)</span>
<span id="cb602-20"><a href="writing-efficient-python-code.html#cb602-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-21"><a href="writing-efficient-python-code.html#cb602-21" aria-hidden="true" tabindex="-1"></a>    desired_heroes <span class="op">=</span> heroes_np[pubs_np <span class="op">==</span> desired_publisher]</span>
<span id="cb602-22"><a href="writing-efficient-python-code.html#cb602-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb602-23"><a href="writing-efficient-python-code.html#cb602-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> desired_heroes</span></code></pre></div>
</div>
<li>
Use the <code>get_publisher_heroes()</code> function and the <code>get_publisher_heroes_np()</code> function to collect heroes from the Star Wars universe. The <code>desired_publisher</code> for Star Wars is <code>‘George Lucas’</code>.
</li>
<div>
<div class="sourceCode" id="cb603"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb603-1"><a href="writing-efficient-python-code.html#cb603-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use get_publisher_heroes() to gather Star Wars heroes</span></span>
<span id="cb603-2"><a href="writing-efficient-python-code.html#cb603-2" aria-hidden="true" tabindex="-1"></a>star_wars_heroes <span class="op">=</span> get_publisher_heroes(heroes, publishers, <span class="st">'George Lucas'</span>)</span>
<span id="cb603-3"><a href="writing-efficient-python-code.html#cb603-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb603-4"><a href="writing-efficient-python-code.html#cb603-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(star_wars_heroes)</span></code></pre></div>
<pre><code>## ['Darth Vader', 'Han Solo', 'Luke Skywalker', 'Yoda']</code></pre>
<div class="sourceCode" id="cb605"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb605-1"><a href="writing-efficient-python-code.html#cb605-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(star_wars_heroes))</span></code></pre></div>
<pre><code>## &lt;class 'list'&gt;</code></pre>
</div>
<div>
<div class="sourceCode" id="cb607"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb607-1"><a href="writing-efficient-python-code.html#cb607-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use get_publisher_heroes_np() to gather Star Wars heroes</span></span>
<span id="cb607-2"><a href="writing-efficient-python-code.html#cb607-2" aria-hidden="true" tabindex="-1"></a>star_wars_heroes_np <span class="op">=</span> get_publisher_heroes_np(heroes, publishers, <span class="st">'George Lucas'</span>)</span>
<span id="cb607-3"><a href="writing-efficient-python-code.html#cb607-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb607-4"><a href="writing-efficient-python-code.html#cb607-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(star_wars_heroes_np)</span></code></pre></div>
<pre><code>## ['Darth Vader' 'Han Solo' 'Luke Skywalker' 'Yoda']</code></pre>
<div class="sourceCode" id="cb609"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb609-1"><a href="writing-efficient-python-code.html#cb609-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(star_wars_heroes_np))</span></code></pre></div>
<pre><code>## &lt;class 'numpy.ndarray'&gt;</code></pre>
</div>
<div>
<ul>
<li>
<strong>Within your IPython console</strong>, load the <code>line_profiler</code> and use <code>%lprun</code> to profile the two functions for line-by-line runtime. When using <code>%lprun</code>, use each function to gather the Star Wars heroes as you did in the previous step. After you’ve finished profiling, answer the following question:
</li>
</ul>
<p>
<strong>Which function has the fastest runtime?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled><code>get_publisher_heroes()</code> is faster.</li>
<li>
<input type="checkbox" disabled checked><code>get_publisher_heroes_np()</code> is faster.</li>
<li>
<input type="checkbox" disabled>Both functions have the same runtime.</li>
</ul>
<div>
<ul>
<li>
<strong>Within your IPython console</strong>, load the <code>memory_profiler</code> and use <code>%mprun</code> to profile the two functions for line-by-line memory consumption.
</li>
</ul>
<p>
The <code>get_publisher_heroes()</code> function and <code>get_publisher_heroes_np()</code> function have been saved within a file titled <code>hero_funcs.py</code> (i.e., you can import both functions from <code>hero_funcs</code>). When using <code>%mprun</code>, use each function to gather the Star Wars heroes as you did in the previous step. After you’ve finished profiling, answer the following question:
</p>
<p>
<strong>Which function uses the least amount of memory?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled><code>get_publisher_heroes()</code> consumes less memory.</li>
<li>
<input type="checkbox" disabled><code>get_publisher_heroes_np()</code> consumes less memory.</li>
<li>
<input type="checkbox" disabled checked>Both functions have the same memory consumption.</li>
</ul>
<div>
<p>
Based on your runtime profiling and memory allocation profiling, which function would you choose to gather Star Wars heroes?
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>I would use <code>get_publisher_heroes()</code>.</li>
<li>
<input type="checkbox" disabled checked>I would use <code>get_publisher_heroes_np()</code>.</li>
<li>
<input type="checkbox" disabled>I could use either function since their runtimes, and memory usage were identical.</li>
</ul>
<p class>
The Force is strong with this one! You’re timing and profiling like a true Jedi. Now that you have the tools to evaluate code efficiencies, it’s time to put them to use and start writing efficient Python code.
</p>
</div>
</div>
</div>
<div id="gaining-efficiencies" class="section level2 unnumbered">
<h2>Gaining efficiencies<a class="anchor" aria-label="anchor" href="#gaining-efficiencies"><i class="fas fa-link"></i></a>
</h2>
<p class>
This chapter covers more complex efficiency tips and tricks. You’ll learn a few useful built-in modules for writing efficient code and practice using set theory. You’ll then learn about looping patterns in Python and how to make them more efficient.
</p>
<div id="efficiently-combining-counting-and-iterating" class="section level3 unnumbered">
<h3>Efficiently combining, counting, and iterating<a class="anchor" aria-label="anchor" href="#efficiently-combining-counting-and-iterating"><i class="fas fa-link"></i></a>
</h3>
<div id="combining-pokémon-names-and-types" class="section level4 unnumbered">
<h4>Combining Pokémon names and types<a class="anchor" aria-label="anchor" href="#combining-pok%C3%A9mon-names-and-types"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Three lists have been loaded into your session from a dataset that contains 720 Pokémon:
</p>
<ul>
<li>
The <code>names</code> list contains the names of each Pokémon.
</li>
<li>
The <code>primary_types</code> list contains the corresponding <strong>primary</strong> type of each Pokémon.
</li>
<li>
The <code>secondary_types</code> list contains the corresponding <strong>secondary</strong> type of each Pokémon (<code>nan</code> if the Pokémon has only one type).
</li>
</ul>
<p>
We want to combine each Pokémon’s name and types together so that you easily see a description of each Pokémon. Practice using <code><a href="https://rdrr.io/r/utils/zip.html">zip()</a></code> to accomplish this task.
</p>
</div>
<div class="exercise--instructions__content">
<p>
Combine the <code>names</code> list and the <code>primary_types</code> list into a new list object (called <code>names_type1</code>).
</p>
</div>
<div>
<div class="sourceCode" id="cb611"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb611-1"><a href="writing-efficient-python-code.html#cb611-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb611-2"><a href="writing-efficient-python-code.html#cb611-2" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/names.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb611-3"><a href="writing-efficient-python-code.html#cb611-3" aria-hidden="true" tabindex="-1"></a>primary_types <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/primary_types.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb611-4"><a href="writing-efficient-python-code.html#cb611-4" aria-hidden="true" tabindex="-1"></a>secondary_types <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/secondary_types.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb611-5"><a href="writing-efficient-python-code.html#cb611-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-6"><a href="writing-efficient-python-code.html#cb611-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine names and primary_types</span></span>
<span id="cb611-7"><a href="writing-efficient-python-code.html#cb611-7" aria-hidden="true" tabindex="-1"></a>names_type1 <span class="op">=</span> [<span class="op">*</span><span class="bu">zip</span>(names, primary_types)]</span>
<span id="cb611-8"><a href="writing-efficient-python-code.html#cb611-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb611-9"><a href="writing-efficient-python-code.html#cb611-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>names_type1[:<span class="dv">5</span>], sep<span class="op">=</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## ('Abomasnow', 'Bug')
## ('Abra', 'Bug')
## ('Absol', 'Poison')
## ('Accelgor', 'Psychic')
## ('Aerodactyl', 'Fire')</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
Combine <code>names</code>, <code>primary_types</code>, and <code>secondary_types</code> (in that order) using <code><a href="https://rdrr.io/r/utils/zip.html">zip()</a></code> and unpack the <em>zip object</em> into a new list.
</p>
</div>
<div>
<div class="sourceCode" id="cb613"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb613-1"><a href="writing-efficient-python-code.html#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all three lists together</span></span>
<span id="cb613-2"><a href="writing-efficient-python-code.html#cb613-2" aria-hidden="true" tabindex="-1"></a>names_types <span class="op">=</span> [<span class="op">*</span><span class="bu">zip</span>(names, primary_types, secondary_types)]</span>
<span id="cb613-3"><a href="writing-efficient-python-code.html#cb613-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb613-4"><a href="writing-efficient-python-code.html#cb613-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>names_types[:<span class="dv">5</span>], sep<span class="op">=</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## ('Abomasnow', 'Bug', 'Ice')
## ('Abra', 'Bug', 'Flying')
## ('Absol', 'Poison', 'Rock')
## ('Accelgor', 'Psychic', 'Flying')
## ('Aerodactyl', 'Fire', 'Ice')</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
Use <code><a href="https://rdrr.io/r/utils/zip.html">zip()</a></code> to combine the <strong>first five items</strong> from the <code>names</code> list and the <strong>first three items</strong> from the <code>primary_types</code> list.
</p>
</div>
<div>
<div class="sourceCode" id="cb615"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb615-1"><a href="writing-efficient-python-code.html#cb615-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine five items from names and three items from primary_types</span></span>
<span id="cb615-2"><a href="writing-efficient-python-code.html#cb615-2" aria-hidden="true" tabindex="-1"></a>differing_lengths <span class="op">=</span> [<span class="op">*</span><span class="bu">zip</span>(names[:<span class="dv">5</span>], primary_types[:<span class="dv">3</span>])]</span>
<span id="cb615-3"><a href="writing-efficient-python-code.html#cb615-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-4"><a href="writing-efficient-python-code.html#cb615-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>differing_lengths, sep<span class="op">=</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## ('Abomasnow', 'Bug')
## ('Abra', 'Bug')
## ('Absol', 'Poison')</code></pre>
</div>
<p class>
Good job! You practiced using <code><a href="https://rdrr.io/r/utils/zip.html">zip()</a></code> to combine multiple objects together. This is a nice function that allows you to easily combine two or more objects. <br><br> Did you notice that if you provide <code><a href="https://rdrr.io/r/utils/zip.html">zip()</a></code> with objects of differing lengths, it will only combine until the smallest lengthed object is exhausted?
</p>
</div>
<div id="counting-pokémon-from-a-sample" class="section level4 unnumbered">
<h4>Counting Pokémon from a sample<a class="anchor" aria-label="anchor" href="#counting-pok%C3%A9mon-from-a-sample"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
A sample of 500 Pokémon has been generated, and three lists from this sample have been loaded into your session:
</p>
<ul>
<li>
The <code>names</code> list contains the names of each Pokémon in the sample.
</li>
<li>
The <code>primary_types</code> list containing the corresponding <strong>primary</strong> type of each Pokémon in the sample.
</li>
<li>
The <code>generations</code> list contains the corresponding <strong>generation</strong> of each Pokémon in the sample.
</li>
</ul>
<p>
You want to quickly gather a few counts from these lists to better understand the sample that was generated. Use <code>Counter</code> from the <code>collections</code> module to explore what types of Pokémon are in your sample, what generations they come from, and how many Pokémon have a name that starts with a specific letter.
</p>
<p>
<code>Counter</code> has already been imported into your session for convenience.
</p>
</div>
<div>
<div class="sourceCode" id="cb617"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb617-1"><a href="writing-efficient-python-code.html#cb617-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb617-2"><a href="writing-efficient-python-code.html#cb617-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> Counter</span>
<span id="cb617-3"><a href="writing-efficient-python-code.html#cb617-3" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/names.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb617-4"><a href="writing-efficient-python-code.html#cb617-4" aria-hidden="true" tabindex="-1"></a>primary_types <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/primary_types.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb617-5"><a href="writing-efficient-python-code.html#cb617-5" aria-hidden="true" tabindex="-1"></a>generations <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/generations.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span></code></pre></div>
</div>
<li>
Collect the count of each primary type from the sample.
</li>
<li>
Collect the count of each generation from the sample.
</li>
<li>
Use list comprehension to collect the first letter of each Pokémon in the <code>names</code> list. Save this as <code>starting_letters</code>.
</li>
<li>
Collect the count of starting letters from the <code>starting_letters</code> list. Save this as <code>starting_letters_count</code>.
</li>
<div>
<div class="sourceCode" id="cb618"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb618-1"><a href="writing-efficient-python-code.html#cb618-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect the count of primary types</span></span>
<span id="cb618-2"><a href="writing-efficient-python-code.html#cb618-2" aria-hidden="true" tabindex="-1"></a>type_count <span class="op">=</span> Counter(primary_types)</span>
<span id="cb618-3"><a href="writing-efficient-python-code.html#cb618-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(type_count, <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## Counter({'Water': 79, 'Normal': 52, 'Psychic': 50, 'Bug': 46, 'Grass': 46, 'Fire': 34, 'Rock': 32, 'Electric': 26, 'Ground': 24, 'Poison': 18, 'Dark': 16, 'Dragon': 15, 'Ice': 15, 'Steel': 14, 'Ghost': 14, 'Fairy': 10, 'Fighting': 9})</code></pre>
</div>
<div>
<div class="sourceCode" id="cb620"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb620-1"><a href="writing-efficient-python-code.html#cb620-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect the count of generations</span></span>
<span id="cb620-2"><a href="writing-efficient-python-code.html#cb620-2" aria-hidden="true" tabindex="-1"></a>gen_count <span class="op">=</span> Counter(generations)</span>
<span id="cb620-3"><a href="writing-efficient-python-code.html#cb620-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gen_count, <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## Counter({3: 107, 1: 96, 5: 95, 4: 84, 2: 69, 6: 49})</code></pre>
</div>
<div>
<div class="sourceCode" id="cb622"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb622-1"><a href="writing-efficient-python-code.html#cb622-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use list comprehension to get each Pokémon's starting letter</span></span>
<span id="cb622-2"><a href="writing-efficient-python-code.html#cb622-2" aria-hidden="true" tabindex="-1"></a>starting_letters <span class="op">=</span> [name[<span class="dv">0</span>] <span class="cf">for</span> name <span class="kw">in</span> names]</span>
<span id="cb622-3"><a href="writing-efficient-python-code.html#cb622-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb622-4"><a href="writing-efficient-python-code.html#cb622-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect the count of Pokémon for each starting_letter</span></span>
<span id="cb622-5"><a href="writing-efficient-python-code.html#cb622-5" aria-hidden="true" tabindex="-1"></a>starting_letters_count <span class="op">=</span> Counter(starting_letters)</span>
<span id="cb622-6"><a href="writing-efficient-python-code.html#cb622-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(starting_letters_count)</span></code></pre></div>
<pre><code>## Counter({'S': 102, 'M': 58, 'C': 55, 'P': 47, 'G': 46, 'D': 41, 'B': 39, 'T': 35, 'L': 33, 'A': 32, 'R': 30, 'H': 27, 'F': 26, 'K': 25, 'W': 23, 'V': 22, 'E': 21, 'N': 16, 'Z': 9, 'J': 7, 'O': 6, 'I': 5, 'U': 5, 'Q': 4, 'Y': 4, 'X': 2})</code></pre>
</div>
<p class>
Great job! You used <code>Counter</code> from the <code>collections</code> module to better understand the sample of 500 Pokémon that was generated. The sample’s most common Pokémon type was <code>‘Water’</code> and the sample’s least common Pokémon types were <code>‘Ghost’</code> and <code>‘Dark’</code>. Did you also notice that most of the Pokémon in the sample came from generation <code>5</code> and had a starting letter of <code>‘S’</code>?
</p>
</div>
<div id="combinations-of-pokémon" class="section level4 unnumbered">
<h4>Combinations of Pokémon<a class="anchor" aria-label="anchor" href="#combinations-of-pok%C3%A9mon"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Ash, a Pokémon trainer, encounters a group of five Pokémon. These Pokémon have been loaded into a list within your session (called <code>pokemon</code>) and printed into the console for your convenience.
</p>
<p>
Ash would like to try to catch some of these Pokémon, but his Pokédex can only store <strong>two</strong> Pokémon at a time. Let’s use <code>combinations</code> from the <code>itertools</code> module to see what the possible pairs of Pokémon are that Ash could catch.
</p>
</div>
<div>
<div class="sourceCode" id="cb624"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb624-1"><a href="writing-efficient-python-code.html#cb624-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb624-2"><a href="writing-efficient-python-code.html#cb624-2" aria-hidden="true" tabindex="-1"></a>pokemon <span class="op">=</span> [<span class="st">'Geodude'</span>, <span class="st">'Cubone'</span>, <span class="st">'Lickitung'</span>, <span class="st">'Persian'</span>, <span class="st">'Diglett'</span>]</span></code></pre></div>
</div>
<li>
Import <code>combinations</code> from <code>itertools</code>.
</li>
<li>
Create a <em>combinations object</em> called <code>combos_obj</code> that contains all possible pairs of Pokémon from the <code>pokemon</code> list. A pair has <code>2</code> Pokémon.
</li>
<li>
Unpack <code>combos_obj</code> into a list called <code>combos_2</code>.
</li>
<li>
Ash upgraded his Pokédex so that it can now store <strong>four</strong> Pokémon. Use <code>combinations</code> to collect all possible combinations of <code>4</code> different Pokémon. Save these combinations <strong>directly into a list</strong> called <code>combos_4</code> using the star character (<code>*</code>).
</li>
<div>
<div class="sourceCode" id="cb625"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb625-1"><a href="writing-efficient-python-code.html#cb625-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import combinations from itertools</span></span>
<span id="cb625-2"><a href="writing-efficient-python-code.html#cb625-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations</span>
<span id="cb625-3"><a href="writing-efficient-python-code.html#cb625-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb625-4"><a href="writing-efficient-python-code.html#cb625-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a combination object with pairs of Pokémon</span></span>
<span id="cb625-5"><a href="writing-efficient-python-code.html#cb625-5" aria-hidden="true" tabindex="-1"></a>combos_obj <span class="op">=</span> combinations(pokemon, <span class="dv">2</span>)</span>
<span id="cb625-6"><a href="writing-efficient-python-code.html#cb625-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(combos_obj), <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## &lt;class 'itertools.combinations'&gt;</code></pre>
</div>
<div>
<div class="sourceCode" id="cb627"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb627-1"><a href="writing-efficient-python-code.html#cb627-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert combos_obj to a list by unpacking</span></span>
<span id="cb627-2"><a href="writing-efficient-python-code.html#cb627-2" aria-hidden="true" tabindex="-1"></a>combos_2 <span class="op">=</span> [<span class="op">*</span>combos_obj]</span>
<span id="cb627-3"><a href="writing-efficient-python-code.html#cb627-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(combos_2, <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## [('Geodude', 'Cubone'), ('Geodude', 'Lickitung'), ('Geodude', 'Persian'), ('Geodude', 'Diglett'), ('Cubone', 'Lickitung'), ('Cubone', 'Persian'), ('Cubone', 'Diglett'), ('Lickitung', 'Persian'), ('Lickitung', 'Diglett'), ('Persian', 'Diglett')]</code></pre>
</div>
<div>
<div class="sourceCode" id="cb629"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb629-1"><a href="writing-efficient-python-code.html#cb629-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect all possible combinations of 4 Pokémon directly into a list</span></span>
<span id="cb629-2"><a href="writing-efficient-python-code.html#cb629-2" aria-hidden="true" tabindex="-1"></a>combos_4 <span class="op">=</span> [<span class="op">*</span>combinations(pokemon, <span class="dv">4</span>)]</span>
<span id="cb629-3"><a href="writing-efficient-python-code.html#cb629-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(combos_4)</span></code></pre></div>
<pre><code>## [('Geodude', 'Cubone', 'Lickitung', 'Persian'), ('Geodude', 'Cubone', 'Lickitung', 'Diglett'), ('Geodude', 'Cubone', 'Persian', 'Diglett'), ('Geodude', 'Lickitung', 'Persian', 'Diglett'), ('Cubone', 'Lickitung', 'Persian', 'Diglett')]</code></pre>
</div>
<p class>
Awesome! You used <code>combinations()</code> from <code>itertools</code> to collect various combination-tuples from a list. <code>combinations()</code> allows you to specify any size of combinations by passing an integer as the second argument. Ash has <code>10</code> combination options when his Pokédex can store only two Pokémon. He has <code>5</code> combination options when his Pokédex can store four Pokémon.
</p>
</div>
</div>
<div id="set-theory" class="section level3 unnumbered">
<h3>Set theory<a class="anchor" aria-label="anchor" href="#set-theory"><i class="fas fa-link"></i></a>
</h3>
<div id="comparing-pokédexes" class="section level4 unnumbered">
<h4>Comparing Pokédexes<a class="anchor" aria-label="anchor" href="#comparing-pok%C3%A9dexes"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Two Pokémon trainers, Ash and Misty, would like to compare their individual collections of Pokémon. Let’s see what Pokémon they have in common and what Pokémon Ash has that Misty does not.
</p>
<p>
Both Ash and Misty’s Pokédex (their collection of Pokémon) have been loaded into your session as lists called <code>ash_pokedex</code> and <code>misty_pokedex</code>. They have been printed into the console for your convenience.
</p>
</div>
<div>
<div class="sourceCode" id="cb631"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb631-1"><a href="writing-efficient-python-code.html#cb631-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb631-2"><a href="writing-efficient-python-code.html#cb631-2" aria-hidden="true" tabindex="-1"></a>ash_pokedex <span class="op">=</span> [<span class="st">'Pikachu'</span>, <span class="st">'Bulbasaur'</span>, <span class="st">'Koffing'</span>, <span class="st">'Spearow'</span>, <span class="st">'Vulpix'</span>, <span class="st">'Wigglytuff'</span>, <span class="st">'Zubat'</span>, <span class="st">'Rattata'</span>, <span class="st">'Psyduck'</span>, <span class="st">'Squirtle'</span>] </span>
<span id="cb631-3"><a href="writing-efficient-python-code.html#cb631-3" aria-hidden="true" tabindex="-1"></a>misty_pokedex <span class="op">=</span> [<span class="st">'Krabby'</span>, <span class="st">'Horsea'</span>, <span class="st">'Slowbro'</span>, <span class="st">'Tentacool'</span>, <span class="st">'Vaporeon'</span>, <span class="st">'Magikarp'</span>, <span class="st">'Poliwag'</span>, <span class="st">'Starmie'</span>, <span class="st">'Psyduck'</span>, <span class="st">'Squirtle'</span>]</span></code></pre></div>
</div>
<li>
Convert both lists (<code>ash_pokedex</code> and <code>misty_pokedex</code>) to sets called <code>ash_set</code> and <code>misty_set</code> respectively.
</li>
<li>
Find the Pokémon that both Ash and Misty have in common using a set method.
</li>
<li>
Find the Pokémon that are within Ash’s Pokédex but <strong>are not</strong> within Misty’s Pokédex with a set method.
</li>
<li>
Use a set method to find the Pokémon that are unique to <strong>either</strong> Ash or Misty (i.e., the Pokémon that exist in <strong>exactly one</strong> of the Pokédexes but not both).
</li>
<div>
<div class="sourceCode" id="cb632"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb632-1"><a href="writing-efficient-python-code.html#cb632-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert both lists to sets</span></span>
<span id="cb632-2"><a href="writing-efficient-python-code.html#cb632-2" aria-hidden="true" tabindex="-1"></a>ash_set <span class="op">=</span> <span class="bu">set</span>(ash_pokedex)</span>
<span id="cb632-3"><a href="writing-efficient-python-code.html#cb632-3" aria-hidden="true" tabindex="-1"></a>misty_set <span class="op">=</span> <span class="bu">set</span>(misty_pokedex)</span>
<span id="cb632-4"><a href="writing-efficient-python-code.html#cb632-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb632-5"><a href="writing-efficient-python-code.html#cb632-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the Pokémon that exist in both sets</span></span>
<span id="cb632-6"><a href="writing-efficient-python-code.html#cb632-6" aria-hidden="true" tabindex="-1"></a>both <span class="op">=</span> ash_set.intersection(misty_set)</span>
<span id="cb632-7"><a href="writing-efficient-python-code.html#cb632-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(both)</span></code></pre></div>
<pre><code>## {'Psyduck', 'Squirtle'}</code></pre>
</div>
<div>
<div class="sourceCode" id="cb634"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb634-1"><a href="writing-efficient-python-code.html#cb634-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the Pokémon that Ash has, and Misty does not have</span></span>
<span id="cb634-2"><a href="writing-efficient-python-code.html#cb634-2" aria-hidden="true" tabindex="-1"></a>ash_only <span class="op">=</span> ash_set.difference(misty_set)</span>
<span id="cb634-3"><a href="writing-efficient-python-code.html#cb634-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ash_only)</span></code></pre></div>
<pre><code>## {'Bulbasaur', 'Rattata', 'Zubat', 'Pikachu', 'Koffing', 'Wigglytuff', 'Spearow', 'Vulpix'}</code></pre>
</div>
<div>
<div class="sourceCode" id="cb636"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb636-1"><a href="writing-efficient-python-code.html#cb636-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find the Pokémon that are in only one set (not both)</span></span>
<span id="cb636-2"><a href="writing-efficient-python-code.html#cb636-2" aria-hidden="true" tabindex="-1"></a>unique_to_set <span class="op">=</span> ash_set.symmetric_difference(misty_set)</span>
<span id="cb636-3"><a href="writing-efficient-python-code.html#cb636-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(unique_to_set)</span></code></pre></div>
<pre><code>## {'Poliwag', 'Krabby', 'Bulbasaur', 'Rattata', 'Zubat', 'Slowbro', 'Magikarp', 'Pikachu', 'Koffing', 'Starmie', 'Vulpix', 'Wigglytuff', 'Spearow', 'Tentacool', 'Horsea', 'Vaporeon'}</code></pre>
</div>
<p class>
Great work! Using sets lets you do some cool comparisons between objects without the need to write a for loop. With a few lines of code, you were able to see that both Ash and Misty have <code>‘Psyduck’</code> and <code>‘Squirtle’</code> in their Pokédex. You were also able to see that Ash has <code>8</code> Pokémon that Misty does not have.
</p>
</div>
<div id="searching-for-pokémon" class="section level4 unnumbered">
<h4>Searching for Pokémon<a class="anchor" aria-label="anchor" href="#searching-for-pok%C3%A9mon"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Two Pokémon trainers, Ash and Brock, have a collection of ten Pokémon each. Each trainer’s Pokédex (their collection of Pokémon) has been loaded into your session as lists called <code>ash_pokedex</code> and <code>brock_pokedex</code> respectively.
</p>
<p>
You’d like to see if certain Pokémon are members of either Ash or Brock’s Pokédex.
</p>
<p>
Let’s compare using a <code>set</code> versus using a <code>list</code> when performing this membership testing.
</p>
</div>
<div>
<div class="sourceCode" id="cb638"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb638-1"><a href="writing-efficient-python-code.html#cb638-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb638-2"><a href="writing-efficient-python-code.html#cb638-2" aria-hidden="true" tabindex="-1"></a>brock_pokedex <span class="op">=</span> [<span class="st">'Onix'</span>, <span class="st">'Geodude'</span>, <span class="st">'Zubat'</span>, <span class="st">'Golem'</span>, <span class="st">'Vulpix'</span>, <span class="st">'Tauros'</span>, <span class="st">'Kabutops'</span>, <span class="st">'Omastar'</span>, <span class="st">'Machop'</span>, <span class="st">'Dugtrio'</span>]</span></code></pre></div>
</div>
<li>
Convert Brock’s Pokédex list (<code>brock_pokedex</code>) to a set called <code>brock_pokedex_set</code>.
</li>
<div>
<div class="sourceCode" id="cb639"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb639-1"><a href="writing-efficient-python-code.html#cb639-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Brock's Pokédex to a set</span></span>
<span id="cb639-2"><a href="writing-efficient-python-code.html#cb639-2" aria-hidden="true" tabindex="-1"></a>brock_pokedex_set <span class="op">=</span> <span class="bu">set</span>(brock_pokedex)</span>
<span id="cb639-3"><a href="writing-efficient-python-code.html#cb639-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(brock_pokedex_set)</span></code></pre></div>
<pre><code>## {'Kabutops', 'Omastar', 'Zubat', 'Machop', 'Dugtrio', 'Onix', 'Golem', 'Vulpix', 'Tauros', 'Geodude'}</code></pre>
</div>
<li>
Check if <code>‘Psyduck’</code> is in Ash’s Pokédex list (<code>ash_pokedex</code>) and if <code>‘Psyduck’</code> is in Brock’s Pokédex <strong>set</strong> (<code>brock_pokedex_set</code>).
</li>
<div>
<div class="sourceCode" id="cb641"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb641-1"><a href="writing-efficient-python-code.html#cb641-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Brock's Pokédex to a set</span></span>
<span id="cb641-2"><a href="writing-efficient-python-code.html#cb641-2" aria-hidden="true" tabindex="-1"></a>brock_pokedex_set <span class="op">=</span> <span class="bu">set</span>(brock_pokedex)</span>
<span id="cb641-3"><a href="writing-efficient-python-code.html#cb641-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(brock_pokedex_set)</span></code></pre></div>
<pre><code>## {'Kabutops', 'Omastar', 'Zubat', 'Machop', 'Dugtrio', 'Onix', 'Golem', 'Vulpix', 'Tauros', 'Geodude'}</code></pre>
</div>
<div>
<div class="sourceCode" id="cb643"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb643-1"><a href="writing-efficient-python-code.html#cb643-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if Psyduck is in Ash's list and Brock's set</span></span>
<span id="cb643-2"><a href="writing-efficient-python-code.html#cb643-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Psyduck'</span> <span class="kw">in</span> ash_pokedex)</span></code></pre></div>
<pre><code>## True</code></pre>
<div class="sourceCode" id="cb645"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb645-1"><a href="writing-efficient-python-code.html#cb645-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Psyduck'</span> <span class="kw">in</span> brock_pokedex_set)</span></code></pre></div>
<pre><code>## False</code></pre>
</div>
<li>
Check if <code>‘Machop’</code> is in Ash’s Pokédex list (<code>ash_pokedex</code>) and if <code>‘Machop’</code> is in Brock’s Pokédex <strong>set</strong> (<code>brock_pokedex_set</code>).
</li>
<div>
<div class="sourceCode" id="cb647"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb647-1"><a href="writing-efficient-python-code.html#cb647-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Brock's Pokédex to a set</span></span>
<span id="cb647-2"><a href="writing-efficient-python-code.html#cb647-2" aria-hidden="true" tabindex="-1"></a>brock_pokedex_set <span class="op">=</span> <span class="bu">set</span>(brock_pokedex)</span>
<span id="cb647-3"><a href="writing-efficient-python-code.html#cb647-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(brock_pokedex_set)</span></code></pre></div>
<pre><code>## {'Kabutops', 'Omastar', 'Zubat', 'Machop', 'Dugtrio', 'Onix', 'Golem', 'Vulpix', 'Tauros', 'Geodude'}</code></pre>
</div>
<div>
<div class="sourceCode" id="cb649"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb649-1"><a href="writing-efficient-python-code.html#cb649-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if Psyduck is in Ash's list and Brock's set</span></span>
<span id="cb649-2"><a href="writing-efficient-python-code.html#cb649-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Psyduck'</span> <span class="kw">in</span> ash_pokedex)</span></code></pre></div>
<pre><code>## True</code></pre>
<div class="sourceCode" id="cb651"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb651-1"><a href="writing-efficient-python-code.html#cb651-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Psyduck'</span> <span class="kw">in</span> brock_pokedex_set)</span></code></pre></div>
<pre><code>## False</code></pre>
</div>
<div>
<div class="sourceCode" id="cb653"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb653-1"><a href="writing-efficient-python-code.html#cb653-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if Machop is in Ash's list and Brock's set</span></span>
<span id="cb653-2"><a href="writing-efficient-python-code.html#cb653-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Machop'</span> <span class="kw">in</span> ash_pokedex)</span></code></pre></div>
<pre><code>## False</code></pre>
<div class="sourceCode" id="cb655"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb655-1"><a href="writing-efficient-python-code.html#cb655-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Machop'</span> <span class="kw">in</span> brock_pokedex_set)</span></code></pre></div>
<pre><code>## True</code></pre>
</div>
<div>
<p>
<strong>Within your IPython console</strong>, use <code>%timeit</code> to compare membership testing for <code>‘Psyduck’</code> in <code>ash_pokedex</code>, <code>‘Psyduck’</code> in <code>brock_pokedex_set</code>, <code>‘Machop’</code> in <code>ash_pokedex</code>, and <code>‘Machop’</code> in <code>brock_pokedex_set</code> (a total of <strong>four different timings</strong>).
</p>
<p>
Don’t include the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> function. Only time the commands that you wrote <strong>inside</strong> the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> function in the previous steps.
</p>
<p>
<strong>Which membership testing was faster?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>Using a list is faster than using a set for membership testing in all four cases.</li>
<li>
<input type="checkbox" disabled>Member testing using a list and a set have the same runtimes for all four cases.</li>
<li>
<input type="checkbox" disabled checked>Member testing using a set is faster than using a list in all four cases.</li>
</ul>
<p class>
Awesome! Membership testing is much faster when you use sets. Did you notice that using a set for member testing is faster than using a list regardless if the item you are checking is in the set? Checking for ‘Psyduck’ (which was not in Brock’s set) is still faster than checking for ‘Psyduck’ in Ash’s list!
</p>
</div>
<div id="gathering-unique-pokémon" class="section level4 unnumbered">
<h4>Gathering unique Pokémon<a class="anchor" aria-label="anchor" href="#gathering-unique-pok%C3%A9mon"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
A sample of 500 Pokémon has been created <strong>with replacement</strong> (meaning a Pokémon could be selected more than once and duplicates exist within the sample).
</p>
<p>
Three lists have been loaded into your session:
</p>
<ul>
<li>
The <code>names</code> list contains the names of each Pokémon in the sample.
</li>
<li>
The <code>primary_types</code> list containing the corresponding <strong>primary</strong> type of each Pokémon in the sample.
</li>
<li>
The <code>generations</code> list contains the corresponding <strong>generation</strong> of each Pokémon in the sample.
</li>
</ul>
<p>
The below function was written to gather unique values from each list:
</p>
<pre><code>def find_unique_items(data):
    uniques = []

    for item in data:
        if item not in uniques:
            uniques.append(item)

    return uniques
</code></pre>
<p>
Let’s compare the above function to using the <code>set</code> data type for collecting unique items.
</p>
</div>
<div>
<div class="sourceCode" id="cb657"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb657-1"><a href="writing-efficient-python-code.html#cb657-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb657-2"><a href="writing-efficient-python-code.html#cb657-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> Counter</span>
<span id="cb657-3"><a href="writing-efficient-python-code.html#cb657-3" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/names.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb657-4"><a href="writing-efficient-python-code.html#cb657-4" aria-hidden="true" tabindex="-1"></a>primary_types <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/primary_types.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb657-5"><a href="writing-efficient-python-code.html#cb657-5" aria-hidden="true" tabindex="-1"></a>generations <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/generations.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb657-6"><a href="writing-efficient-python-code.html#cb657-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-7"><a href="writing-efficient-python-code.html#cb657-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_unique_items(data):</span>
<span id="cb657-8"><a href="writing-efficient-python-code.html#cb657-8" aria-hidden="true" tabindex="-1"></a>    uniques <span class="op">=</span> []</span>
<span id="cb657-9"><a href="writing-efficient-python-code.html#cb657-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-10"><a href="writing-efficient-python-code.html#cb657-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> item <span class="kw">in</span> data:</span>
<span id="cb657-11"><a href="writing-efficient-python-code.html#cb657-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> item <span class="kw">not</span> <span class="kw">in</span> uniques:</span>
<span id="cb657-12"><a href="writing-efficient-python-code.html#cb657-12" aria-hidden="true" tabindex="-1"></a>            uniques.append(item)</span>
<span id="cb657-13"><a href="writing-efficient-python-code.html#cb657-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb657-14"><a href="writing-efficient-python-code.html#cb657-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> uniques</span></code></pre></div>
</div>
<li>
Use the provided function to collect the unique Pokémon in the <code>names</code> list. Save this as <code>uniq_names_func</code>.
</li>
<div>
<div class="sourceCode" id="cb658"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb658-1"><a href="writing-efficient-python-code.html#cb658-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the provided function to collect unique Pokémon names</span></span>
<span id="cb658-2"><a href="writing-efficient-python-code.html#cb658-2" aria-hidden="true" tabindex="-1"></a>uniq_names_func <span class="op">=</span> find_unique_items(names)</span>
<span id="cb658-3"><a href="writing-efficient-python-code.html#cb658-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(uniq_names_func))</span></code></pre></div>
<pre><code>## 720</code></pre>
</div>
<li>
Use a <code>set</code> data type to collect the unique Pokémon in the <code>names</code> list. Save this as <code>uniq_names_set</code>.
</li>
<div>
<div class="sourceCode" id="cb660"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb660-1"><a href="writing-efficient-python-code.html#cb660-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use find_unique_items() to collect unique Pokémon names</span></span>
<span id="cb660-2"><a href="writing-efficient-python-code.html#cb660-2" aria-hidden="true" tabindex="-1"></a>uniq_names_func <span class="op">=</span> find_unique_items(names)</span>
<span id="cb660-3"><a href="writing-efficient-python-code.html#cb660-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(uniq_names_func))</span></code></pre></div>
<pre><code>## 720</code></pre>
</div>
<div>
<div class="sourceCode" id="cb662"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb662-1"><a href="writing-efficient-python-code.html#cb662-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the names list to a set to collect unique Pokémon names</span></span>
<span id="cb662-2"><a href="writing-efficient-python-code.html#cb662-2" aria-hidden="true" tabindex="-1"></a>uniq_names_set <span class="op">=</span> <span class="bu">set</span>(names)</span>
<span id="cb662-3"><a href="writing-efficient-python-code.html#cb662-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(uniq_names_set))</span></code></pre></div>
<pre><code>## 720</code></pre>
</div>
<div>
<div class="sourceCode" id="cb664"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb664-1"><a href="writing-efficient-python-code.html#cb664-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check that both unique collections are equivalent</span></span>
<span id="cb664-2"><a href="writing-efficient-python-code.html#cb664-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(uniq_names_func) <span class="op">==</span> <span class="bu">sorted</span>(uniq_names_set))</span></code></pre></div>
<pre><code>## True</code></pre>
</div>
<div>
<p>
<strong>Within your IPython console</strong>, use <code>%timeit</code> to compare the <code>find_unique_items()</code> function with using a <code>set</code> data type to collect unique Pokémon character names in <code>names</code>.
</p>
<p>
<strong>Which membership testing was faster?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled checked>Using a <code>set</code> to collect unique values is faster.</li>
<li>
<input type="checkbox" disabled>Using the provided function that uses a loop to gather unique items is faster.</li>
<li>
<input type="checkbox" disabled>Both approaches have the same runtime.</li>
</ul>
<li>
Use the most efficient approach for gathering unique items to collect the unique Pokémon types (from the <code>primary_types</code> list) and Pokémon generations (from the <code>generations</code> list).
</li>
<div>
<div class="sourceCode" id="cb666"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb666-1"><a href="writing-efficient-python-code.html#cb666-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use find_unique_items() to collect unique Pokémon names</span></span>
<span id="cb666-2"><a href="writing-efficient-python-code.html#cb666-2" aria-hidden="true" tabindex="-1"></a>uniq_names_func <span class="op">=</span> find_unique_items(names)</span>
<span id="cb666-3"><a href="writing-efficient-python-code.html#cb666-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(uniq_names_func))</span></code></pre></div>
<pre><code>## 720</code></pre>
</div>
<div>
<div class="sourceCode" id="cb668"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb668-1"><a href="writing-efficient-python-code.html#cb668-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the names list to a set to collect unique Pokémon names</span></span>
<span id="cb668-2"><a href="writing-efficient-python-code.html#cb668-2" aria-hidden="true" tabindex="-1"></a>uniq_names_set <span class="op">=</span> <span class="bu">set</span>(names)</span>
<span id="cb668-3"><a href="writing-efficient-python-code.html#cb668-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(uniq_names_set))</span></code></pre></div>
<pre><code>## 720</code></pre>
</div>
<div>
<div class="sourceCode" id="cb670"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb670-1"><a href="writing-efficient-python-code.html#cb670-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check that both unique collections are equivalent</span></span>
<span id="cb670-2"><a href="writing-efficient-python-code.html#cb670-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(uniq_names_func) <span class="op">==</span> <span class="bu">sorted</span>(uniq_names_set))</span></code></pre></div>
<pre><code>## True</code></pre>
</div>
<div>
<div class="sourceCode" id="cb672"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb672-1"><a href="writing-efficient-python-code.html#cb672-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the best approach to collect unique primary types and generations</span></span>
<span id="cb672-2"><a href="writing-efficient-python-code.html#cb672-2" aria-hidden="true" tabindex="-1"></a>uniq_types <span class="op">=</span> <span class="bu">set</span>(primary_types) </span>
<span id="cb672-3"><a href="writing-efficient-python-code.html#cb672-3" aria-hidden="true" tabindex="-1"></a>uniq_gens <span class="op">=</span> <span class="bu">set</span>(generations)</span>
<span id="cb672-4"><a href="writing-efficient-python-code.html#cb672-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(uniq_types, uniq_gens, sep<span class="op">=</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>) </span></code></pre></div>
<pre><code>## {'Fire', 'Ghost', 'Electric', 'Fairy', 'Rock', 'Water', 'Ground', 'Grass', 'Dragon', 'Steel', 'Psychic', 'Fighting', 'Poison', 'Dark', 'Ice', 'Bug', 'Normal'}
## {1, 2, 3, 4, 5, 6}</code></pre>
</div>
<p class>
Nice work! Using a <code>set</code> data type to collect unique values is much faster than using a for loop (like in the <code>find_unique_items()</code> function). Since a set is defined as a collection of distinct elements, it is an efficient way to collect unique items from an existing object. Here you took advantage of a <code>set</code> to find the distinct Pokémon from the sample (eliminating duplicate Pokémon) and saw what unique Pokémon types and generations were included in the sample.
</p>
</div>
</div>
<div id="eliminating-loops" class="section level3 unnumbered">
<h3>Eliminating loops<a class="anchor" aria-label="anchor" href="#eliminating-loops"><i class="fas fa-link"></i></a>
</h3>
<div id="gathering-pokémon-without-a-loop" class="section level4 unnumbered">
<h4>Gathering Pokémon without a loop<a class="anchor" aria-label="anchor" href="#gathering-pok%C3%A9mon-without-a-loop"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
A list containing 720 Pokémon has been loaded into your session as <code>poke_names</code>. Another list containing each Pokémon’s corresponding generation has been loaded as <code>poke_gens</code>.
</p>
<p>
A for loop has been created to filter the Pokémon that belong to generation one or two, and collect the number of letters in each Pokémon’s name:
</p>
<pre><code>gen1_gen2_name_lengths_loop = []

for name,gen in zip(poke_names, poke_gens):
    if gen &lt; 3:
        name_length = len(name)
        poke_tuple = (name, name_length)
        gen1_gen2_name_lengths_loop.append(poke_tuple)
</code></pre>
</div>
<div>
<div class="sourceCode" id="cb674"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb674-1"><a href="writing-efficient-python-code.html#cb674-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb674-2"><a href="writing-efficient-python-code.html#cb674-2" aria-hidden="true" tabindex="-1"></a>poke_names <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/poke_names.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb674-3"><a href="writing-efficient-python-code.html#cb674-3" aria-hidden="true" tabindex="-1"></a>poke_gens <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/poke_gens.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb674-4"><a href="writing-efficient-python-code.html#cb674-4" aria-hidden="true" tabindex="-1"></a>gen1_gen2_name_lengths_loop <span class="op">=</span> []</span></code></pre></div>
</div>
<li>
Eliminate the above for loop using list comprehension and the <code>map()</code> function:
<ul>
<li>
Use list comprehension to collect each Pokémon that belongs to generation 1 or generation 2. Save this as <code>gen1_gen2_pokemon</code>.
</li>
<li>
Use the <code>map()</code> function to collect the number of letters in each Pokémon’s name within the <code>gen1_gen2_pokemon</code> list. Save this <em>map object</em> as <code>name_lengths_map</code>.
</li>
<li>
Combine <code>gen1_gen2_pokemon</code> and <code>name_length_map</code> into a list called <code>gen1_gen2_name_lengths</code>.
</li>
</ul>
</li>
<div>
<div class="sourceCode" id="cb675"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb675-1"><a href="writing-efficient-python-code.html#cb675-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect Pokémon that belong to generation 1 or generation 2</span></span>
<span id="cb675-2"><a href="writing-efficient-python-code.html#cb675-2" aria-hidden="true" tabindex="-1"></a>gen1_gen2_pokemon <span class="op">=</span> [name <span class="cf">for</span> name,gen <span class="kw">in</span> <span class="bu">zip</span>(poke_names, poke_gens) <span class="cf">if</span> gen <span class="op">&lt;</span> <span class="dv">3</span>]</span>
<span id="cb675-3"><a href="writing-efficient-python-code.html#cb675-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-4"><a href="writing-efficient-python-code.html#cb675-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a map object that stores the name lengths</span></span>
<span id="cb675-5"><a href="writing-efficient-python-code.html#cb675-5" aria-hidden="true" tabindex="-1"></a>name_lengths_map <span class="op">=</span> <span class="bu">map</span>(<span class="bu">len</span>, gen1_gen2_pokemon)</span>
<span id="cb675-6"><a href="writing-efficient-python-code.html#cb675-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-7"><a href="writing-efficient-python-code.html#cb675-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine gen1_gen2_pokemon and name_lengths_map into a list</span></span>
<span id="cb675-8"><a href="writing-efficient-python-code.html#cb675-8" aria-hidden="true" tabindex="-1"></a>gen1_gen2_name_lengths <span class="op">=</span> [<span class="op">*</span><span class="bu">zip</span>(gen1_gen2_pokemon, name_lengths_map)]</span>
<span id="cb675-9"><a href="writing-efficient-python-code.html#cb675-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb675-10"><a href="writing-efficient-python-code.html#cb675-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gen1_gen2_name_lengths_loop[:<span class="dv">5</span>])</span></code></pre></div>
<pre><code>## []</code></pre>
<div class="sourceCode" id="cb677"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb677-1"><a href="writing-efficient-python-code.html#cb677-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gen1_gen2_name_lengths[:<span class="dv">5</span>])</span></code></pre></div>
<pre><code>## [('Abra', 4), ('Aerodactyl', 10), ('Aipom', 5), ('Alakazam', 8), ('Ampharos', 8)]</code></pre>
</div>
<p class>
Great job! You successfully used list comprehension and the <code>map()</code> function to eliminate a for loop. If you compared runtimes between the for loop and using list comprehension with a <code>map()</code> function, you’d see that the for loop took quite a bit longer. <br><br> If you’re an experienced Pythonista, you may have noticed that you could replace the entire for loop with one list comprehension: <code>[(name, len(name)) for name,gen in zip(poke_names, poke_gens) if gen &lt; 3]</code>
</p>
</div>
<div id="pokémon-totals-and-averages-without-a-loop" class="section level4 unnumbered">
<h4>Pokémon totals and averages without a loop<a class="anchor" aria-label="anchor" href="#pok%C3%A9mon-totals-and-averages-without-a-loop"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
A list of 720 Pokémon has been loaded into your session called <code>names</code>. Each Pokémon’s corresponding statistics has been loaded as a NumPy array called <code>stats</code>. Each row of <code>stats</code> corresponds to a Pokémon in <code>names</code> and each column represents an individual Pokémon stat (<code>HP</code>, <code>Attack</code>, <code>Defense</code>, <code>Special Attack</code>, <code>Special Defense</code>, and <code>Speed</code> respectively.)
</p>
<p>
You want to gather each Pokémon’s total stat value (i.e., the sum of each row in <code>stats</code>) and each Pokémon’s average stat value (i.e., the mean of each row in <code>stats</code>) so that you find the strongest Pokémon.
</p>
<p>
The below for loop was written to collect these values:
</p>
<pre><code>poke_list = []

for pokemon,row in zip(names, stats):
    total_stats = np.sum(row)
    avg_stats = np.mean(row)
    poke_list.append((pokemon, total_stats, avg_stats))
</code></pre>
</div>
<div>
<div class="sourceCode" id="cb679"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb679-1"><a href="writing-efficient-python-code.html#cb679-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb679-2"><a href="writing-efficient-python-code.html#cb679-2" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/names.csv"</span>, header <span class="op">=</span> <span class="va">None</span>).iloc[:,<span class="dv">0</span>].tolist()</span>
<span id="cb679-3"><a href="writing-efficient-python-code.html#cb679-3" aria-hidden="true" tabindex="-1"></a>stats_df <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/stats_df.csv"</span>)</span>
<span id="cb679-4"><a href="writing-efficient-python-code.html#cb679-4" aria-hidden="true" tabindex="-1"></a>stats <span class="op">=</span> stats_df.to_numpy()</span>
<span id="cb679-5"><a href="writing-efficient-python-code.html#cb679-5" aria-hidden="true" tabindex="-1"></a>poke_list <span class="op">=</span> []</span>
<span id="cb679-6"><a href="writing-efficient-python-code.html#cb679-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb679-7"><a href="writing-efficient-python-code.html#cb679-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pokemon,row <span class="kw">in</span> <span class="bu">zip</span>(names, stats):</span>
<span id="cb679-8"><a href="writing-efficient-python-code.html#cb679-8" aria-hidden="true" tabindex="-1"></a>    total_stats <span class="op">=</span> np.<span class="bu">sum</span>(row)</span>
<span id="cb679-9"><a href="writing-efficient-python-code.html#cb679-9" aria-hidden="true" tabindex="-1"></a>    avg_stats <span class="op">=</span> np.mean(row)</span>
<span id="cb679-10"><a href="writing-efficient-python-code.html#cb679-10" aria-hidden="true" tabindex="-1"></a>    poke_list.append((pokemon, total_stats, avg_stats))</span></code></pre></div>
</div>
<li>
Replace the above for loop using NumPy:
<ul>
<li>
Create a total stats array (<code>total_stats_np</code>) using the <code>.sum()</code> method and specifying the correct axis.
</li>
<li>
Create an average stats array (<code>avg_stats_np</code>) using the <code>.mean()</code> method and specifying the correct axis.
</li>
<li>
Create a final output list (<code>poke_list_np</code>) by combining the <code>names</code> list, the <code>total_stats_np</code> array, and the <code>avg_stats_np</code> array.
</li>
</ul>
</li>
<div>
<div class="sourceCode" id="cb680"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb680-1"><a href="writing-efficient-python-code.html#cb680-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a total stats array</span></span>
<span id="cb680-2"><a href="writing-efficient-python-code.html#cb680-2" aria-hidden="true" tabindex="-1"></a>total_stats_np <span class="op">=</span> stats.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb680-3"><a href="writing-efficient-python-code.html#cb680-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb680-4"><a href="writing-efficient-python-code.html#cb680-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an average stats array</span></span>
<span id="cb680-5"><a href="writing-efficient-python-code.html#cb680-5" aria-hidden="true" tabindex="-1"></a>avg_stats_np <span class="op">=</span> stats.mean(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb680-6"><a href="writing-efficient-python-code.html#cb680-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb680-7"><a href="writing-efficient-python-code.html#cb680-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine names, total_stats_np, and avg_stats_np into a list</span></span>
<span id="cb680-8"><a href="writing-efficient-python-code.html#cb680-8" aria-hidden="true" tabindex="-1"></a>poke_list_np <span class="op">=</span> [<span class="op">*</span><span class="bu">zip</span>(names, total_stats_np, avg_stats_np)]</span>
<span id="cb680-9"><a href="writing-efficient-python-code.html#cb680-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb680-10"><a href="writing-efficient-python-code.html#cb680-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(poke_list_np <span class="op">==</span> poke_list, <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## True</code></pre>
<div class="sourceCode" id="cb682"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb682-1"><a href="writing-efficient-python-code.html#cb682-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(poke_list_np[:<span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [('Abomasnow', 494, 82.33333333333333), ('Abra', 310, 51.666666666666664), ('Absol', 465, 77.5)]</code></pre>
<div class="sourceCode" id="cb684"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb684-1"><a href="writing-efficient-python-code.html#cb684-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(poke_list[:<span class="dv">3</span>], <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## [('Abomasnow', 494, 82.33333333333333), ('Abra', 310, 51.666666666666664), ('Absol', 465, 77.5)]</code></pre>
<div class="sourceCode" id="cb686"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb686-1"><a href="writing-efficient-python-code.html#cb686-1" aria-hidden="true" tabindex="-1"></a>top_3 <span class="op">=</span> <span class="bu">sorted</span>(poke_list_np, key<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="dv">1</span>], reverse<span class="op">=</span><span class="va">True</span>)[:<span class="dv">3</span>]</span>
<span id="cb686-2"><a href="writing-efficient-python-code.html#cb686-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'3 strongest Pokémon:</span><span class="ch">\n</span><span class="sc">{}</span><span class="st">'</span>.<span class="bu">format</span>(top_3))</span></code></pre></div>
<pre><code>## 3 strongest Pokémon:
## [('GroudonPrimal Groudon', 770, 128.33333333333334), ('KyogrePrimal Kyogre', 770, 128.33333333333334), ('KyuremBlack Kyurem', 700, 116.66666666666667)]</code></pre>
</div>
<p class>
Great work! You used NumPy’s <code>.sum()</code> and <code>.mean()</code> methods with a specific axis to eliminate a for loop. With this approach, you were able to quickly see that ‘GroudonPrimal Groudon’, ‘KyogrePrimal Kyogre’, and ‘Arceus’ were the strongest Pokémon in your list based on total stats. <br><br> If you were to gather run times, the for loop would have taken <em>milliseconds</em> to execute while the NumPy approach would have taken <em>microseconds</em> to execute. This is quite an improvement!
</p>
</div>
</div>
<div id="writing-better-loops" class="section level3 unnumbered">
<h3>Writing better loops<a class="anchor" aria-label="anchor" href="#writing-better-loops"><i class="fas fa-link"></i></a>
</h3>
<div id="one-time-calculation-loop" class="section level4 unnumbered">
<h4>One-time calculation loop<a class="anchor" aria-label="anchor" href="#one-time-calculation-loop"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
A list of integers that represents each Pokémon’s generation has been loaded into your session called <code>generations</code>. You’d like to gather the counts of each generation and determine what percentage each generation accounts for out of the total count of integers.
</p>
<p>
The below loop was written to accomplish this task:
</p>
<pre><code>for gen,count in gen_counts.items():
    total_count = len(generations)
    gen_percent = round(count / total_count * 100, 2)
    print(
      'generation {}: count = {:3} percentage = {}'
      .format(gen, count, gen_percent)
    )
</code></pre>
<p>
Let’s make this loop more efficient by moving a one-time calculation outside the loop.
</p>
</div>
<li>
Import <code>Counter</code> from the <code>collections</code> module.
</li>
<li>
Use <code>Counter()</code> to collect the count of each generation from the <code>generations</code> list. Save this as <code>gen_counts</code>.
</li>
<li>
Write a better for loop that places a <strong>one-time</strong> calculation outside (above) the loop. Use the exact same syntax as the original for loop (simply copy and paste the one-time calculation above the loop).
</li>
<div>
<div class="sourceCode" id="cb688"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb688-1"><a href="writing-efficient-python-code.html#cb688-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import Counter</span></span>
<span id="cb688-2"><a href="writing-efficient-python-code.html#cb688-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> Counter</span>
<span id="cb688-3"><a href="writing-efficient-python-code.html#cb688-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-4"><a href="writing-efficient-python-code.html#cb688-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect the count of each generation</span></span>
<span id="cb688-5"><a href="writing-efficient-python-code.html#cb688-5" aria-hidden="true" tabindex="-1"></a>gen_counts <span class="op">=</span> Counter(generations)</span>
<span id="cb688-6"><a href="writing-efficient-python-code.html#cb688-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-7"><a href="writing-efficient-python-code.html#cb688-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Improve for loop by moving one calculation above the loop</span></span>
<span id="cb688-8"><a href="writing-efficient-python-code.html#cb688-8" aria-hidden="true" tabindex="-1"></a>total_count <span class="op">=</span> <span class="bu">len</span>(generations)</span>
<span id="cb688-9"><a href="writing-efficient-python-code.html#cb688-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-10"><a href="writing-efficient-python-code.html#cb688-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> gen,count <span class="kw">in</span> gen_counts.items():</span>
<span id="cb688-11"><a href="writing-efficient-python-code.html#cb688-11" aria-hidden="true" tabindex="-1"></a>    gen_percent <span class="op">=</span> <span class="bu">round</span>(count <span class="op">/</span> total_count <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb688-12"><a href="writing-efficient-python-code.html#cb688-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'generation </span><span class="sc">{}</span><span class="st">: count = </span><span class="sc">{:3}</span><span class="st"> percentage = </span><span class="sc">{}</span><span class="st">'</span></span>
<span id="cb688-13"><a href="writing-efficient-python-code.html#cb688-13" aria-hidden="true" tabindex="-1"></a>          .<span class="bu">format</span>(gen, count, gen_percent))</span></code></pre></div>
<pre><code>## generation 2: count =  69 percentage = 13.8
## generation 4: count =  84 percentage = 16.8
## generation 3: count = 107 percentage = 21.4
## generation 5: count =  95 percentage = 19.0
## generation 1: count =  96 percentage = 19.2
## generation 6: count =  49 percentage = 9.8</code></pre>
</div>
<p class>
Well done! You spotted a calculation that could be moved outside a loop to make the loop more efficient. Since the total count is now calculated just once (and not with each loop iteration), you can expect to see an efficiency gain with your new loop. When writing a loop is unavoidable, be sure to analyze the loop and move any one-time calculations outside.
</p>
</div>
<div id="holistic-conversion-loop" class="section level4 unnumbered">
<h4>Holistic conversion loop<a class="anchor" aria-label="anchor" href="#holistic-conversion-loop"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
A list of all possible Pokémon types has been loaded into your session as <code>pokemon_types</code>. It’s been printed in the console for convenience.
</p>
<p>
You’d like to gather all the possible pairs of Pokémon types. You want to store each of these pairs in an individual list with an enumerated index as the first element of each list. This allows you to see the total number of possible pairs and provides an indexed label for each pair.
</p>
<p>
The below loop was written to accomplish this task:
</p>
<pre><code>enumerated_pairs = []

for i,pair in enumerate(possible_pairs, 1):
    enumerated_pair_tuple = (i,) + pair
    enumerated_pair_list = list(enumerated_pair_tuple)
    enumerated_pairs.append(enumerated_pair_list)
</code></pre>
<p>
Let’s make this loop more efficient using a holistic conversion.
</p>
</div>
<div>
<div class="sourceCode" id="cb690"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb690-1"><a href="writing-efficient-python-code.html#cb690-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb690-2"><a href="writing-efficient-python-code.html#cb690-2" aria-hidden="true" tabindex="-1"></a>pokemon_types <span class="op">=</span> [<span class="st">'Bug'</span>, <span class="st">'Dark'</span>, <span class="st">'Dragon'</span>, <span class="st">'Electric'</span>, <span class="st">'Fairy'</span>, <span class="st">'Fighting'</span>, <span class="st">'Fire'</span>, <span class="st">'Flying'</span>, <span class="st">'Ghost'</span>, <span class="st">'Grass'</span>, <span class="st">'Ground'</span>, <span class="st">'Ice'</span>, <span class="st">'Normal'</span>, <span class="st">'Poison'</span>, <span class="st">'Psychic'</span>, <span class="st">'Rock'</span>, <span class="st">'Steel'</span>, <span class="st">'Water'</span>]</span></code></pre></div>
</div>
<li>
<code>combinations</code> from the <code>itertools</code> module has been loaded into your session. Use it to create a list called <code>possible_pairs</code> that contains all possible pairs of Pokémon types (each pair has <code>2</code> Pokémon types).
</li>
<li>
Create an empty list called <code>enumerated_tuples</code> above the for loop.
</li>
<li>
Within the for loop, append each <code>enumerated_pair_tuple</code> to the empty list you created in the above step.
</li>
<li>
Use a built-in function to convert each tuple in <code>enumerated_tuples</code> to a list.
</li>
<div>
<div class="sourceCode" id="cb691"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb691-1"><a href="writing-efficient-python-code.html#cb691-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Collect all possible pairs using combinations()</span></span>
<span id="cb691-2"><a href="writing-efficient-python-code.html#cb691-2" aria-hidden="true" tabindex="-1"></a>possible_pairs <span class="op">=</span> [<span class="op">*</span>combinations(pokemon_types, <span class="dv">2</span>)]</span>
<span id="cb691-3"><a href="writing-efficient-python-code.html#cb691-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb691-4"><a href="writing-efficient-python-code.html#cb691-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty list called enumerated_tuples</span></span>
<span id="cb691-5"><a href="writing-efficient-python-code.html#cb691-5" aria-hidden="true" tabindex="-1"></a>enumerated_tuples <span class="op">=</span> []</span>
<span id="cb691-6"><a href="writing-efficient-python-code.html#cb691-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb691-7"><a href="writing-efficient-python-code.html#cb691-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Append each enumerated_pair_tuple to the empty list above</span></span>
<span id="cb691-8"><a href="writing-efficient-python-code.html#cb691-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,pair <span class="kw">in</span> <span class="bu">enumerate</span>(possible_pairs, <span class="dv">1</span>):</span>
<span id="cb691-9"><a href="writing-efficient-python-code.html#cb691-9" aria-hidden="true" tabindex="-1"></a>    enumerated_pair_tuple <span class="op">=</span> (i,) <span class="op">+</span> pair</span>
<span id="cb691-10"><a href="writing-efficient-python-code.html#cb691-10" aria-hidden="true" tabindex="-1"></a>    enumerated_tuples.append(enumerated_pair_tuple)</span>
<span id="cb691-11"><a href="writing-efficient-python-code.html#cb691-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb691-12"><a href="writing-efficient-python-code.html#cb691-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert all tuples in enumerated_tuples to a list</span></span>
<span id="cb691-13"><a href="writing-efficient-python-code.html#cb691-13" aria-hidden="true" tabindex="-1"></a>enumerated_pairs <span class="op">=</span> [<span class="op">*</span><span class="bu">map</span>(<span class="bu">list</span>, enumerated_tuples)]</span>
<span id="cb691-14"><a href="writing-efficient-python-code.html#cb691-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(enumerated_pairs)</span></code></pre></div>
<pre><code>## [[1, 'Bug', 'Dark'], [2, 'Bug', 'Dragon'], [3, 'Bug', 'Electric'], [4, 'Bug', 'Fairy'], [5, 'Bug', 'Fighting'], [6, 'Bug', 'Fire'], [7, 'Bug', 'Flying'], [8, 'Bug', 'Ghost'], [9, 'Bug', 'Grass'], [10, 'Bug', 'Ground'], [11, 'Bug', 'Ice'], [12, 'Bug', 'Normal'], [13, 'Bug', 'Poison'], [14, 'Bug', 'Psychic'], [15, 'Bug', 'Rock'], [16, 'Bug', 'Steel'], [17, 'Bug', 'Water'], [18, 'Dark', 'Dragon'], [19, 'Dark', 'Electric'], [20, 'Dark', 'Fairy'], [21, 'Dark', 'Fighting'], [22, 'Dark', 'Fire'], [23, 'Dark', 'Flying'], [24, 'Dark', 'Ghost'], [25, 'Dark', 'Grass'], [26, 'Dark', 'Ground'], [27, 'Dark', 'Ice'], [28, 'Dark', 'Normal'], [29, 'Dark', 'Poison'], [30, 'Dark', 'Psychic'], [31, 'Dark', 'Rock'], [32, 'Dark', 'Steel'], [33, 'Dark', 'Water'], [34, 'Dragon', 'Electric'], [35, 'Dragon', 'Fairy'], [36, 'Dragon', 'Fighting'], [37, 'Dragon', 'Fire'], [38, 'Dragon', 'Flying'], [39, 'Dragon', 'Ghost'], [40, 'Dragon', 'Grass'], [41, 'Dragon', 'Ground'], [42, 'Dragon', 'Ice'], [43, 'Dragon', 'Normal'], [44, 'Dragon', 'Poison'], [45, 'Dragon', 'Psychic'], [46, 'Dragon', 'Rock'], [47, 'Dragon', 'Steel'], [48, 'Dragon', 'Water'], [49, 'Electric', 'Fairy'], [50, 'Electric', 'Fighting'], [51, 'Electric', 'Fire'], [52, 'Electric', 'Flying'], [53, 'Electric', 'Ghost'], [54, 'Electric', 'Grass'], [55, 'Electric', 'Ground'], [56, 'Electric', 'Ice'], [57, 'Electric', 'Normal'], [58, 'Electric', 'Poison'], [59, 'Electric', 'Psychic'], [60, 'Electric', 'Rock'], [61, 'Electric', 'Steel'], [62, 'Electric', 'Water'], [63, 'Fairy', 'Fighting'], [64, 'Fairy', 'Fire'], [65, 'Fairy', 'Flying'], [66, 'Fairy', 'Ghost'], [67, 'Fairy', 'Grass'], [68, 'Fairy', 'Ground'], [69, 'Fairy', 'Ice'], [70, 'Fairy', 'Normal'], [71, 'Fairy', 'Poison'], [72, 'Fairy', 'Psychic'], [73, 'Fairy', 'Rock'], [74, 'Fairy', 'Steel'], [75, 'Fairy', 'Water'], [76, 'Fighting', 'Fire'], [77, 'Fighting', 'Flying'], [78, 'Fighting', 'Ghost'], [79, 'Fighting', 'Grass'], [80, 'Fighting', 'Ground'], [81, 'Fighting', 'Ice'], [82, 'Fighting', 'Normal'], [83, 'Fighting', 'Poison'], [84, 'Fighting', 'Psychic'], [85, 'Fighting', 'Rock'], [86, 'Fighting', 'Steel'], [87, 'Fighting', 'Water'], [88, 'Fire', 'Flying'], [89, 'Fire', 'Ghost'], [90, 'Fire', 'Grass'], [91, 'Fire', 'Ground'], [92, 'Fire', 'Ice'], [93, 'Fire', 'Normal'], [94, 'Fire', 'Poison'], [95, 'Fire', 'Psychic'], [96, 'Fire', 'Rock'], [97, 'Fire', 'Steel'], [98, 'Fire', 'Water'], [99, 'Flying', 'Ghost'], [100, 'Flying', 'Grass'], [101, 'Flying', 'Ground'], [102, 'Flying', 'Ice'], [103, 'Flying', 'Normal'], [104, 'Flying', 'Poison'], [105, 'Flying', 'Psychic'], [106, 'Flying', 'Rock'], [107, 'Flying', 'Steel'], [108, 'Flying', 'Water'], [109, 'Ghost', 'Grass'], [110, 'Ghost', 'Ground'], [111, 'Ghost', 'Ice'], [112, 'Ghost', 'Normal'], [113, 'Ghost', 'Poison'], [114, 'Ghost', 'Psychic'], [115, 'Ghost', 'Rock'], [116, 'Ghost', 'Steel'], [117, 'Ghost', 'Water'], [118, 'Grass', 'Ground'], [119, 'Grass', 'Ice'], [120, 'Grass', 'Normal'], [121, 'Grass', 'Poison'], [122, 'Grass', 'Psychic'], [123, 'Grass', 'Rock'], [124, 'Grass', 'Steel'], [125, 'Grass', 'Water'], [126, 'Ground', 'Ice'], [127, 'Ground', 'Normal'], [128, 'Ground', 'Poison'], [129, 'Ground', 'Psychic'], [130, 'Ground', 'Rock'], [131, 'Ground', 'Steel'], [132, 'Ground', 'Water'], [133, 'Ice', 'Normal'], [134, 'Ice', 'Poison'], [135, 'Ice', 'Psychic'], [136, 'Ice', 'Rock'], [137, 'Ice', 'Steel'], [138, 'Ice', 'Water'], [139, 'Normal', 'Poison'], [140, 'Normal', 'Psychic'], [141, 'Normal', 'Rock'], [142, 'Normal', 'Steel'], [143, 'Normal', 'Water'], [144, 'Poison', 'Psychic'], [145, 'Poison', 'Rock'], [146, 'Poison', 'Steel'], [147, 'Poison', 'Water'], [148, 'Psychic', 'Rock'], [149, 'Psychic', 'Steel'], [150, 'Psychic', 'Water'], [151, 'Rock', 'Steel'], [152, 'Rock', 'Water'], [153, 'Steel', 'Water']]</code></pre>
</div>
<p class>
Great job! Rather than converting each tuple to a list <em>within</em> the loop, you used the <code>map()</code> function to convert tuples to lists all at once outside of a loop. You’re getting the hang of writing efficient loops! Remember, you want to avoid looping as much as possible when writing Python code. In cases where looping is unavoidable, be sure to check your loops for one-time calculations and holistic conversions to make them more efficient.
</p>
</div>
<div id="bringing-it-all-together-pokémon-z-scores" class="section level4 unnumbered">
<h4>Bringing it all together: Pokémon z-scores<a class="anchor" aria-label="anchor" href="#bringing-it-all-together-pok%C3%A9mon-z-scores"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
A list of 720 Pokémon has been loaded into your session as <code>names</code>. Each Pokémon’s corresponding Health Points is stored in a NumPy array called <code>hps</code>. You want to analyze the Health Points using the <a href="https://en.wikipedia.org/wiki/Standard_score">z-score</a> to see how many standard deviations each Pokémon’s HP is from the mean of all HPs.
</p>
<p>
The below code was written to calculate the HP z-score for each Pokémon and gather the Pokémon with the highest HPs based on their z-scores:
</p>
<pre><code>poke_zscores = []

for name,hp in zip(names, hps):
    hp_avg = hps.mean()
    hp_std = hps.std()
    z_score = (hp - hp_avg)/hp_std
    poke_zscores.append((name, hp, z_score))
</code></pre>
<pre><code>highest_hp_pokemon = []

for name,hp,zscore in poke_zscores:
    if zscore &gt; 2:
        highest_hp_pokemon.append((name, hp, zscore))
</code></pre>
</div>
<div>
<div class="sourceCode" id="cb693"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb693-1"><a href="writing-efficient-python-code.html#cb693-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb693-2"><a href="writing-efficient-python-code.html#cb693-2" aria-hidden="true" tabindex="-1"></a>hps <span class="op">=</span> stats_df.HP.values</span>
<span id="cb693-3"><a href="writing-efficient-python-code.html#cb693-3" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(hps)</span></code></pre></div>
<pre><code>## 720</code></pre>
</div>
<li>
Use NumPy to eliminate the for loop used to create the z-scores.
</li>
<li>
Then, combine the <code>names</code>, <code>hps</code>, and <code>z_scores</code> objects together into a list called <code>poke_zscores2</code>.
</li>
<div>
<div class="sourceCode" id="cb695"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb695-1"><a href="writing-efficient-python-code.html#cb695-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the total HP avg and total HP standard deviation</span></span>
<span id="cb695-2"><a href="writing-efficient-python-code.html#cb695-2" aria-hidden="true" tabindex="-1"></a>hp_avg <span class="op">=</span> hps.mean()</span>
<span id="cb695-3"><a href="writing-efficient-python-code.html#cb695-3" aria-hidden="true" tabindex="-1"></a>hp_std <span class="op">=</span> hps.std()</span>
<span id="cb695-4"><a href="writing-efficient-python-code.html#cb695-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb695-5"><a href="writing-efficient-python-code.html#cb695-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Use NumPy to eliminate the previous for loop</span></span>
<span id="cb695-6"><a href="writing-efficient-python-code.html#cb695-6" aria-hidden="true" tabindex="-1"></a>z_scores <span class="op">=</span> (hps <span class="op">-</span> hp_avg)<span class="op">/</span>hp_std</span>
<span id="cb695-7"><a href="writing-efficient-python-code.html#cb695-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb695-8"><a href="writing-efficient-python-code.html#cb695-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine names, hps, and z_scores</span></span>
<span id="cb695-9"><a href="writing-efficient-python-code.html#cb695-9" aria-hidden="true" tabindex="-1"></a>poke_zscores2 <span class="op">=</span> [<span class="op">*</span><span class="bu">zip</span>(names, hps, z_scores)]</span>
<span id="cb695-10"><a href="writing-efficient-python-code.html#cb695-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>poke_zscores2[:<span class="dv">3</span>], sep<span class="op">=</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## ('Abomasnow', 90, 0.8432264096861816)
## ('Abra', 25, -1.673706811393817)
## ('Absol', 65, -0.12482482919074096)</code></pre>
</div>
<li>
Use list comprehension to replace the for loop used to collect Pokémon with the highest HPs based on their z-score.
</li>
<div>
<div class="sourceCode" id="cb697"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb697-1"><a href="writing-efficient-python-code.html#cb697-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the total HP avg and total HP standard deviation</span></span>
<span id="cb697-2"><a href="writing-efficient-python-code.html#cb697-2" aria-hidden="true" tabindex="-1"></a>hp_avg <span class="op">=</span> hps.mean()</span>
<span id="cb697-3"><a href="writing-efficient-python-code.html#cb697-3" aria-hidden="true" tabindex="-1"></a>hp_std <span class="op">=</span> hps.std()</span>
<span id="cb697-4"><a href="writing-efficient-python-code.html#cb697-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb697-5"><a href="writing-efficient-python-code.html#cb697-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Use NumPy to eliminate the previous for loop</span></span>
<span id="cb697-6"><a href="writing-efficient-python-code.html#cb697-6" aria-hidden="true" tabindex="-1"></a>z_scores <span class="op">=</span> (hps <span class="op">-</span> hp_avg)<span class="op">/</span>hp_std</span>
<span id="cb697-7"><a href="writing-efficient-python-code.html#cb697-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb697-8"><a href="writing-efficient-python-code.html#cb697-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine names, hps, and z_scores</span></span>
<span id="cb697-9"><a href="writing-efficient-python-code.html#cb697-9" aria-hidden="true" tabindex="-1"></a>poke_zscores2 <span class="op">=</span> [<span class="op">*</span><span class="bu">zip</span>(names, hps, z_scores)]</span>
<span id="cb697-10"><a href="writing-efficient-python-code.html#cb697-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>poke_zscores2[:<span class="dv">3</span>], sep<span class="op">=</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## ('Abomasnow', 90, 0.8432264096861816)
## ('Abra', 25, -1.673706811393817)
## ('Absol', 65, -0.12482482919074096)</code></pre>
</div>
<div>
<div class="sourceCode" id="cb699"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb699-1"><a href="writing-efficient-python-code.html#cb699-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use list comprehension with the same logic as the highest_hp_pokemon code block</span></span>
<span id="cb699-2"><a href="writing-efficient-python-code.html#cb699-2" aria-hidden="true" tabindex="-1"></a>highest_hp_pokemon2 <span class="op">=</span> [(name, hp, zscore) <span class="cf">for</span> name,hp,zscore <span class="kw">in</span> poke_zscores2 <span class="cf">if</span> zscore <span class="op">&gt;</span> <span class="dv">2</span>]</span>
<span id="cb699-3"><a href="writing-efficient-python-code.html#cb699-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="op">*</span>highest_hp_pokemon2, sep<span class="op">=</span><span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## ('Alomomola', 165, 3.747380126316949)
## ('Arceus', 120, 2.0048878963384884)
## ('Aurorus', 123, 2.1210540450037194)
## ('Blissey', 255, 7.232364586273871)
## ('Chansey', 250, 7.038754338498486)
## ('Cresselia', 120, 2.0048878963384884)
## ('Drifblim', 150, 3.166549382990796)
## ('Gogoat', 123, 2.1210540450037194)
## ('Hariyama', 144, 2.9342170856603342)
## ('Kyurem', 125, 2.198498144113873)
## ('KyuremBlack Kyurem', 125, 2.198498144113873)
## ('KyuremWhite Kyurem', 125, 2.198498144113873)
## ('Lanturn', 125, 2.198498144113873)
## ('Lapras', 130, 2.3921083918892574)
## ('Munchlax', 135, 2.585718639664642)
## ('Slaking', 150, 3.166549382990796)
## ('Snorlax', 160, 3.553769878541565)
## ('Throh', 120, 2.0048878963384884)
## ('Vaporeon', 130, 2.3921083918892574)
## ('Wailmer', 130, 2.3921083918892574)
## ('Wailord', 170, 3.9409903740923338)
## ('Wigglytuff', 140, 2.7793288874400264)
## ('Wobbuffet', 190, 4.715431365193871)
## ('Xerneas', 126, 2.23722019366895)
## ('Yveltal', 126, 2.23722019366895)</code></pre>
</div>
<div>
<p>
Use <code>%%timeit</code> (<em>cell magic mode</em>) <strong>within your IPython console</strong> to compare the runtimes between the original code blocks and the new code you developed using NumPy and list comprehension.
</p>
<p>
<strong>Don’t include the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> statements when timing.</strong> You should include <strong>ten lines of code</strong> when timing the original code blocks and <strong>five lines of code</strong> when timing the new code you developed. You may need to press <code>SHIFT+ENTER</code> after entering <code>%%timeit</code> to get to a new line within your IPython console.
</p>
<p>
<strong>Which approach was the faster?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>The total time for executing both of the original code blocks was faster.</li>
<li>
<input type="checkbox" disabled checked>The total time for executing the updated solution using NumPy and list comprehension was faster.</li>
<li>
<input type="checkbox" disabled>Both approaches had the same execution time.</li>
</ul>
<p class>
Great job! You’re Catching ’Em All (efficiencies that is). You eliminated two loops using NumPy broadcasting and list comprehension. Did you notice how much faster the approach you developed was compared to the original loops? What a great improvement! <br><br> Remember the techniques you’ve learned throughout this chapter as you continue writing Python code outside this course. Keep in mind the built-in functions and modules you covered to eliminate loops and remember to check your unavoidable loops for things that can be moved outside.
</p>
</div>
</div>
</div>
<div id="basic-pandas-optimizations" class="section level2 unnumbered">
<h2>Basic pandas optimizations<a class="anchor" aria-label="anchor" href="#basic-pandas-optimizations"><i class="fas fa-link"></i></a>
</h2>
<p class>
This chapter offers a brief introduction on how to efficiently work with pandas DataFrames. You’ll learn the various options you have for iterating over a DataFrame. Then, you’ll learn how to efficiently apply functions to data stored in a DataFrame.
</p>
<div id="intro-to-pandas-dataframe-iteration" class="section level3 unnumbered">
<h3>Intro to pandas DataFrame iteration<a class="anchor" aria-label="anchor" href="#intro-to-pandas-dataframe-iteration"><i class="fas fa-link"></i></a>
</h3>
<div id="iterating-with-.iterrows" class="section level4 unnumbered">
<h4>Iterating with .iterrows()<a class="anchor" aria-label="anchor" href="#iterating-with-.iterrows"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
In the video, we discussed that <code>.iterrows()</code> returns each DataFrame row as a tuple of (index, <code>pandas</code> Series) pairs. But, what does this mean? Let’s explore with a few coding exercises.
</p>
<p>
A <code>pandas</code> DataFrame has been loaded into your session called <code>pit_df</code>. This DataFrame contains the stats for the Major League Baseball team named the Pittsburgh Pirates (abbreviated as <code>‘PIT’</code>) from the year 2008 to the year 2012. It has been printed into your console for convenience.
</p>
</div>
<div class="exercise--instructions__content">
<p>
Use <code>.iterrows()</code> to loop over <code>pit_df</code> and print each row. Save the first item from <code>.iterrows()</code> as <code>i</code> and the second as <code>row</code>.
</p>
</div>
<div>
<div class="sourceCode" id="cb701"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb701-1"><a href="writing-efficient-python-code.html#cb701-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb701-2"><a href="writing-efficient-python-code.html#cb701-2" aria-hidden="true" tabindex="-1"></a>baseball_df <span class="op">=</span> pd.read_csv(<span class="st">"datasets/Writing-Efficient-Python-Code/baseball_df.csv"</span>)</span>
<span id="cb701-3"><a href="writing-efficient-python-code.html#cb701-3" aria-hidden="true" tabindex="-1"></a>pit_df <span class="op">=</span> baseball_df[baseball_df.Team <span class="op">==</span> <span class="st">'PIT'</span>]</span>
<span id="cb701-4"><a href="writing-efficient-python-code.html#cb701-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb701-5"><a href="writing-efficient-python-code.html#cb701-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over pit_df and print each row</span></span>
<span id="cb701-6"><a href="writing-efficient-python-code.html#cb701-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,row <span class="kw">in</span> pit_df.iterrows():</span>
<span id="cb701-7"><a href="writing-efficient-python-code.html#cb701-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(row)</span></code></pre></div>
<pre><code>## Team              PIT
## League             NL
## Year             2012
## RS                651
## RA                674
## W                  79
## OBP             0.304
## SLG             0.395
## BA              0.243
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.314
## OSLG             0.39
## Name: 21, dtype: object
## Team              PIT
## League             NL
## Year             2011
## RS                610
## RA                712
## W                  72
## OBP             0.309
## SLG             0.368
## BA              0.244
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.338
## OSLG            0.409
## Name: 51, dtype: object
## Team              PIT
## League             NL
## Year             2010
## RS                587
## RA                866
## W                  57
## OBP             0.304
## SLG             0.373
## BA              0.242
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.348
## OSLG            0.449
## Name: 81, dtype: object
## Team              PIT
## League             NL
## Year             2009
## RS                636
## RA                768
## W                  62
## OBP             0.318
## SLG             0.387
## BA              0.252
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.346
## OSLG            0.442
## Name: 111, dtype: object
## Team              PIT
## League             NL
## Year             2008
## RS                735
## RA                884
## W                  67
## OBP              0.32
## SLG             0.403
## BA              0.258
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.362
## OSLG            0.454
## Name: 141, dtype: object
## Team              PIT
## League             NL
## Year             2007
## RS                724
## RA                846
## W                  68
## OBP             0.325
## SLG             0.411
## BA              0.263
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.352
## OSLG            0.447
## Name: 171, dtype: object
## Team              PIT
## League             NL
## Year             2006
## RS                691
## RA                797
## W                  67
## OBP             0.327
## SLG             0.397
## BA              0.263
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.357
## OSLG            0.431
## Name: 201, dtype: object
## Team              PIT
## League             NL
## Year             2005
## RS                680
## RA                769
## W                  67
## OBP             0.322
## SLG               0.4
## BA              0.259
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.344
## OSLG            0.424
## Name: 231, dtype: object
## Team              PIT
## League             NL
## Year             2004
## RS                680
## RA                744
## W                  72
## OBP             0.321
## SLG             0.401
## BA               0.26
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.342
## OSLG            0.416
## Name: 262, dtype: object
## Team              PIT
## League             NL
## Year             2003
## RS                753
## RA                801
## W                  75
## OBP             0.338
## SLG              0.42
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.336
## OSLG            0.431
## Name: 292, dtype: object
## Team              PIT
## League             NL
## Year             2002
## RS                641
## RA                730
## W                  72
## OBP             0.319
## SLG             0.381
## BA              0.244
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.342
## OSLG            0.423
## Name: 322, dtype: object
## Team              PIT
## League             NL
## Year             2001
## RS                657
## RA                858
## W                  62
## OBP             0.313
## SLG             0.393
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.344
## OSLG            0.433
## Name: 352, dtype: object
## Team              PIT
## League             NL
## Year             2000
## RS                793
## RA                888
## W                  69
## OBP             0.339
## SLG             0.424
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.361
## OSLG            0.432
## Name: 382, dtype: object
## Team              PIT
## League             NL
## Year             1999
## RS                775
## RA                782
## W                  78
## OBP             0.334
## SLG             0.419
## BA              0.259
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.343
## OSLG             0.42
## Name: 412, dtype: object
## Team              PIT
## League             NL
## Year             1998
## RS                650
## RA                718
## W                  69
## OBP             0.311
## SLG             0.374
## BA              0.254
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 442, dtype: object
## Team              PIT
## League             NL
## Year             1997
## RS                725
## RA                760
## W                  79
## OBP             0.329
## SLG             0.404
## BA              0.262
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 471, dtype: object
## Team              PIT
## League             NL
## Year             1996
## RS                776
## RA                833
## W                  73
## OBP             0.329
## SLG             0.407
## BA              0.266
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 499, dtype: object
## Team              PIT
## League             NL
## Year             1993
## RS                707
## RA                806
## W                  75
## OBP             0.335
## SLG             0.393
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 527, dtype: object
## Team              PIT
## League             NL
## Year             1992
## RS                693
## RA                595
## W                  96
## OBP             0.324
## SLG             0.381
## BA              0.255
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 553, dtype: object
## Team              PIT
## League             NL
## Year             1991
## RS                768
## RA                632
## W                  98
## OBP             0.338
## SLG             0.398
## BA              0.263
## Playoffs            1
## RankSeason        1.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 579, dtype: object
## Team              PIT
## League             NL
## Year             1990
## RS                733
## RA                619
## W                  95
## OBP              0.33
## SLG             0.405
## BA              0.259
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 605, dtype: object
## Team              PIT
## League             NL
## Year             1989
## RS                637
## RA                680
## W                  74
## OBP             0.311
## SLG             0.359
## BA              0.241
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 164
## OOBP              NaN
## OSLG              NaN
## Name: 631, dtype: object
## Team              PIT
## League             NL
## Year             1988
## RS                651
## RA                616
## W                  85
## OBP             0.317
## SLG             0.369
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 160
## OOBP              NaN
## OSLG              NaN
## Name: 657, dtype: object
## Team              PIT
## League             NL
## Year             1987
## RS                723
## RA                744
## W                  80
## OBP              0.33
## SLG             0.403
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 683, dtype: object
## Team              PIT
## League             NL
## Year             1986
## RS                663
## RA                700
## W                  64
## OBP             0.321
## SLG             0.374
## BA               0.25
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 709, dtype: object
## Team              PIT
## League             NL
## Year             1985
## RS                568
## RA                708
## W                  57
## OBP             0.311
## SLG             0.347
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 735, dtype: object
## Team              PIT
## League             NL
## Year             1984
## RS                615
## RA                567
## W                  75
## OBP              0.31
## SLG             0.363
## BA              0.255
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 761, dtype: object
## Team              PIT
## League             NL
## Year             1983
## RS                659
## RA                648
## W                  84
## OBP             0.325
## SLG             0.383
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 787, dtype: object
## Team              PIT
## League             NL
## Year             1982
## RS                724
## RA                696
## W                  84
## OBP             0.327
## SLG             0.408
## BA              0.273
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 813, dtype: object
## Team              PIT
## League             NL
## Year             1980
## RS                666
## RA                646
## W                  83
## OBP             0.322
## SLG             0.388
## BA              0.266
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 839, dtype: object
## Team              PIT
## League             NL
## Year             1979
## RS                775
## RA                643
## W                  98
## OBP              0.33
## SLG             0.416
## BA              0.272
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      1.0
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 865, dtype: object
## Team              PIT
## League             NL
## Year             1978
## RS                684
## RA                637
## W                  88
## OBP              0.32
## SLG             0.385
## BA              0.257
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 891, dtype: object
## Team              PIT
## League             NL
## Year             1977
## RS                734
## RA                665
## W                  96
## OBP             0.331
## SLG             0.413
## BA              0.274
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 917, dtype: object
## Team              PIT
## League             NL
## Year             1976
## RS                708
## RA                630
## W                  92
## OBP             0.321
## SLG             0.391
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 943, dtype: object
## Team              PIT
## League             NL
## Year             1975
## RS                712
## RA                565
## W                  92
## OBP             0.323
## SLG             0.402
## BA              0.263
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 967, dtype: object
## Team              PIT
## League             NL
## Year             1974
## RS                751
## RA                657
## W                  88
## OBP             0.335
## SLG             0.391
## BA              0.274
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 991, dtype: object
## Team              PIT
## League             NL
## Year             1973
## RS                704
## RA                693
## W                  80
## OBP             0.315
## SLG             0.405
## BA              0.261
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1015, dtype: object
## Team              PIT
## League             NL
## Year             1971
## RS                788
## RA                599
## W                  97
## OBP              0.33
## SLG             0.416
## BA              0.274
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      1.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1039, dtype: object
## Team              PIT
## League             NL
## Year             1970
## RS                729
## RA                664
## W                  89
## OBP             0.325
## SLG             0.406
## BA               0.27
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1063, dtype: object
## Team              PIT
## League             NL
## Year             1969
## RS                725
## RA                652
## W                  88
## OBP             0.334
## SLG             0.398
## BA              0.277
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1086, dtype: object
## Team              PIT
## League             NL
## Year             1968
## RS                583
## RA                532
## W                  80
## OBP             0.306
## SLG             0.343
## BA              0.252
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1108, dtype: object
## Team              PIT
## League             NL
## Year             1967
## RS                679
## RA                693
## W                  81
## OBP             0.324
## SLG              0.38
## BA              0.277
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1128, dtype: object
## Team              PIT
## League             NL
## Year             1966
## RS                759
## RA                641
## W                  92
## OBP             0.329
## SLG             0.428
## BA              0.279
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1148, dtype: object
## Team              PIT
## League             NL
## Year             1965
## RS                675
## RA                580
## W                  90
## OBP             0.317
## SLG             0.382
## BA              0.265
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1168, dtype: object
## Team              PIT
## League             NL
## Year             1964
## RS                663
## RA                636
## W                  80
## OBP             0.315
## SLG             0.389
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1188, dtype: object
## Team              PIT
## League             NL
## Year             1963
## RS                567
## RA                595
## W                  74
## OBP             0.309
## SLG             0.359
## BA               0.25
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1208, dtype: object
## Team              PIT
## League             NL
## Year             1962
## RS                706
## RA                626
## W                  93
## OBP             0.321
## SLG             0.394
## BA              0.268
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 1228, dtype: object</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
Add <strong>two</strong> lines to the loop: one <em>before</em> <code>print(row)</code> to print each index variable and one <em>after</em> to print each row’s type.
</p>
</div>
<div>
<div class="sourceCode" id="cb703"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb703-1"><a href="writing-efficient-python-code.html#cb703-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over pit_df and print each index variable, row, and row type</span></span>
<span id="cb703-2"><a href="writing-efficient-python-code.html#cb703-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,row <span class="kw">in</span> pit_df.iterrows():</span>
<span id="cb703-3"><a href="writing-efficient-python-code.html#cb703-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i)</span>
<span id="cb703-4"><a href="writing-efficient-python-code.html#cb703-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(row)</span>
<span id="cb703-5"><a href="writing-efficient-python-code.html#cb703-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="bu">type</span>(row))</span></code></pre></div>
<pre><code>## 21
## Team              PIT
## League             NL
## Year             2012
## RS                651
## RA                674
## W                  79
## OBP             0.304
## SLG             0.395
## BA              0.243
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.314
## OSLG             0.39
## Name: 21, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 51
## Team              PIT
## League             NL
## Year             2011
## RS                610
## RA                712
## W                  72
## OBP             0.309
## SLG             0.368
## BA              0.244
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.338
## OSLG            0.409
## Name: 51, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 81
## Team              PIT
## League             NL
## Year             2010
## RS                587
## RA                866
## W                  57
## OBP             0.304
## SLG             0.373
## BA              0.242
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.348
## OSLG            0.449
## Name: 81, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 111
## Team              PIT
## League             NL
## Year             2009
## RS                636
## RA                768
## W                  62
## OBP             0.318
## SLG             0.387
## BA              0.252
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.346
## OSLG            0.442
## Name: 111, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 141
## Team              PIT
## League             NL
## Year             2008
## RS                735
## RA                884
## W                  67
## OBP              0.32
## SLG             0.403
## BA              0.258
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.362
## OSLG            0.454
## Name: 141, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 171
## Team              PIT
## League             NL
## Year             2007
## RS                724
## RA                846
## W                  68
## OBP             0.325
## SLG             0.411
## BA              0.263
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.352
## OSLG            0.447
## Name: 171, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 201
## Team              PIT
## League             NL
## Year             2006
## RS                691
## RA                797
## W                  67
## OBP             0.327
## SLG             0.397
## BA              0.263
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.357
## OSLG            0.431
## Name: 201, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 231
## Team              PIT
## League             NL
## Year             2005
## RS                680
## RA                769
## W                  67
## OBP             0.322
## SLG               0.4
## BA              0.259
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.344
## OSLG            0.424
## Name: 231, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 262
## Team              PIT
## League             NL
## Year             2004
## RS                680
## RA                744
## W                  72
## OBP             0.321
## SLG             0.401
## BA               0.26
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.342
## OSLG            0.416
## Name: 262, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 292
## Team              PIT
## League             NL
## Year             2003
## RS                753
## RA                801
## W                  75
## OBP             0.338
## SLG              0.42
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.336
## OSLG            0.431
## Name: 292, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 322
## Team              PIT
## League             NL
## Year             2002
## RS                641
## RA                730
## W                  72
## OBP             0.319
## SLG             0.381
## BA              0.244
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.342
## OSLG            0.423
## Name: 322, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 352
## Team              PIT
## League             NL
## Year             2001
## RS                657
## RA                858
## W                  62
## OBP             0.313
## SLG             0.393
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.344
## OSLG            0.433
## Name: 352, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 382
## Team              PIT
## League             NL
## Year             2000
## RS                793
## RA                888
## W                  69
## OBP             0.339
## SLG             0.424
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.361
## OSLG            0.432
## Name: 382, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 412
## Team              PIT
## League             NL
## Year             1999
## RS                775
## RA                782
## W                  78
## OBP             0.334
## SLG             0.419
## BA              0.259
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.343
## OSLG             0.42
## Name: 412, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 442
## Team              PIT
## League             NL
## Year             1998
## RS                650
## RA                718
## W                  69
## OBP             0.311
## SLG             0.374
## BA              0.254
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 442, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 471
## Team              PIT
## League             NL
## Year             1997
## RS                725
## RA                760
## W                  79
## OBP             0.329
## SLG             0.404
## BA              0.262
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 471, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 499
## Team              PIT
## League             NL
## Year             1996
## RS                776
## RA                833
## W                  73
## OBP             0.329
## SLG             0.407
## BA              0.266
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 499, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 527
## Team              PIT
## League             NL
## Year             1993
## RS                707
## RA                806
## W                  75
## OBP             0.335
## SLG             0.393
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 527, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 553
## Team              PIT
## League             NL
## Year             1992
## RS                693
## RA                595
## W                  96
## OBP             0.324
## SLG             0.381
## BA              0.255
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 553, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 579
## Team              PIT
## League             NL
## Year             1991
## RS                768
## RA                632
## W                  98
## OBP             0.338
## SLG             0.398
## BA              0.263
## Playoffs            1
## RankSeason        1.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 579, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 605
## Team              PIT
## League             NL
## Year             1990
## RS                733
## RA                619
## W                  95
## OBP              0.33
## SLG             0.405
## BA              0.259
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 605, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 631
## Team              PIT
## League             NL
## Year             1989
## RS                637
## RA                680
## W                  74
## OBP             0.311
## SLG             0.359
## BA              0.241
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 164
## OOBP              NaN
## OSLG              NaN
## Name: 631, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 657
## Team              PIT
## League             NL
## Year             1988
## RS                651
## RA                616
## W                  85
## OBP             0.317
## SLG             0.369
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 160
## OOBP              NaN
## OSLG              NaN
## Name: 657, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 683
## Team              PIT
## League             NL
## Year             1987
## RS                723
## RA                744
## W                  80
## OBP              0.33
## SLG             0.403
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 683, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 709
## Team              PIT
## League             NL
## Year             1986
## RS                663
## RA                700
## W                  64
## OBP             0.321
## SLG             0.374
## BA               0.25
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 709, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 735
## Team              PIT
## League             NL
## Year             1985
## RS                568
## RA                708
## W                  57
## OBP             0.311
## SLG             0.347
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 735, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 761
## Team              PIT
## League             NL
## Year             1984
## RS                615
## RA                567
## W                  75
## OBP              0.31
## SLG             0.363
## BA              0.255
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 761, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 787
## Team              PIT
## League             NL
## Year             1983
## RS                659
## RA                648
## W                  84
## OBP             0.325
## SLG             0.383
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 787, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 813
## Team              PIT
## League             NL
## Year             1982
## RS                724
## RA                696
## W                  84
## OBP             0.327
## SLG             0.408
## BA              0.273
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 813, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 839
## Team              PIT
## League             NL
## Year             1980
## RS                666
## RA                646
## W                  83
## OBP             0.322
## SLG             0.388
## BA              0.266
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 839, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 865
## Team              PIT
## League             NL
## Year             1979
## RS                775
## RA                643
## W                  98
## OBP              0.33
## SLG             0.416
## BA              0.272
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      1.0
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 865, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 891
## Team              PIT
## League             NL
## Year             1978
## RS                684
## RA                637
## W                  88
## OBP              0.32
## SLG             0.385
## BA              0.257
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 891, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 917
## Team              PIT
## League             NL
## Year             1977
## RS                734
## RA                665
## W                  96
## OBP             0.331
## SLG             0.413
## BA              0.274
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 917, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 943
## Team              PIT
## League             NL
## Year             1976
## RS                708
## RA                630
## W                  92
## OBP             0.321
## SLG             0.391
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 943, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 967
## Team              PIT
## League             NL
## Year             1975
## RS                712
## RA                565
## W                  92
## OBP             0.323
## SLG             0.402
## BA              0.263
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 967, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 991
## Team              PIT
## League             NL
## Year             1974
## RS                751
## RA                657
## W                  88
## OBP             0.335
## SLG             0.391
## BA              0.274
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 991, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1015
## Team              PIT
## League             NL
## Year             1973
## RS                704
## RA                693
## W                  80
## OBP             0.315
## SLG             0.405
## BA              0.261
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1015, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1039
## Team              PIT
## League             NL
## Year             1971
## RS                788
## RA                599
## W                  97
## OBP              0.33
## SLG             0.416
## BA              0.274
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      1.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1039, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1063
## Team              PIT
## League             NL
## Year             1970
## RS                729
## RA                664
## W                  89
## OBP             0.325
## SLG             0.406
## BA               0.27
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1063, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1086
## Team              PIT
## League             NL
## Year             1969
## RS                725
## RA                652
## W                  88
## OBP             0.334
## SLG             0.398
## BA              0.277
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1086, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1108
## Team              PIT
## League             NL
## Year             1968
## RS                583
## RA                532
## W                  80
## OBP             0.306
## SLG             0.343
## BA              0.252
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1108, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1128
## Team              PIT
## League             NL
## Year             1967
## RS                679
## RA                693
## W                  81
## OBP             0.324
## SLG              0.38
## BA              0.277
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1128, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1148
## Team              PIT
## League             NL
## Year             1966
## RS                759
## RA                641
## W                  92
## OBP             0.329
## SLG             0.428
## BA              0.279
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1148, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1168
## Team              PIT
## League             NL
## Year             1965
## RS                675
## RA                580
## W                  90
## OBP             0.317
## SLG             0.382
## BA              0.265
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1168, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1188
## Team              PIT
## League             NL
## Year             1964
## RS                663
## RA                636
## W                  80
## OBP             0.315
## SLG             0.389
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1188, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1208
## Team              PIT
## League             NL
## Year             1963
## RS                567
## RA                595
## W                  74
## OBP             0.309
## SLG             0.359
## BA               0.25
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1208, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;
## 1228
## Team              PIT
## League             NL
## Year             1962
## RS                706
## RA                626
## W                  93
## OBP             0.321
## SLG             0.394
## BA              0.268
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 1228, dtype: object
## &lt;class 'pandas.core.series.Series'&gt;</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
Instead of using <code>i</code> and <code>row</code> in the for statement to store the output of <code>.iterrows()</code>, use <strong>one</strong> variable named <code>row_tuple</code>.
</p>
</div>
<div>
<div class="sourceCode" id="cb705"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb705-1"><a href="writing-efficient-python-code.html#cb705-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use one variable instead of two to store the result of .iterrows()</span></span>
<span id="cb705-2"><a href="writing-efficient-python-code.html#cb705-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row_tuple <span class="kw">in</span> pit_df.iterrows():</span>
<span id="cb705-3"><a href="writing-efficient-python-code.html#cb705-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(row_tuple)</span></code></pre></div>
<pre><code>## (21, Team              PIT
## League             NL
## Year             2012
## RS                651
## RA                674
## W                  79
## OBP             0.304
## SLG             0.395
## BA              0.243
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.314
## OSLG             0.39
## Name: 21, dtype: object)
## (51, Team              PIT
## League             NL
## Year             2011
## RS                610
## RA                712
## W                  72
## OBP             0.309
## SLG             0.368
## BA              0.244
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.338
## OSLG            0.409
## Name: 51, dtype: object)
## (81, Team              PIT
## League             NL
## Year             2010
## RS                587
## RA                866
## W                  57
## OBP             0.304
## SLG             0.373
## BA              0.242
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.348
## OSLG            0.449
## Name: 81, dtype: object)
## (111, Team              PIT
## League             NL
## Year             2009
## RS                636
## RA                768
## W                  62
## OBP             0.318
## SLG             0.387
## BA              0.252
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.346
## OSLG            0.442
## Name: 111, dtype: object)
## (141, Team              PIT
## League             NL
## Year             2008
## RS                735
## RA                884
## W                  67
## OBP              0.32
## SLG             0.403
## BA              0.258
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.362
## OSLG            0.454
## Name: 141, dtype: object)
## (171, Team              PIT
## League             NL
## Year             2007
## RS                724
## RA                846
## W                  68
## OBP             0.325
## SLG             0.411
## BA              0.263
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.352
## OSLG            0.447
## Name: 171, dtype: object)
## (201, Team              PIT
## League             NL
## Year             2006
## RS                691
## RA                797
## W                  67
## OBP             0.327
## SLG             0.397
## BA              0.263
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.357
## OSLG            0.431
## Name: 201, dtype: object)
## (231, Team              PIT
## League             NL
## Year             2005
## RS                680
## RA                769
## W                  67
## OBP             0.322
## SLG               0.4
## BA              0.259
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.344
## OSLG            0.424
## Name: 231, dtype: object)
## (262, Team              PIT
## League             NL
## Year             2004
## RS                680
## RA                744
## W                  72
## OBP             0.321
## SLG             0.401
## BA               0.26
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.342
## OSLG            0.416
## Name: 262, dtype: object)
## (292, Team              PIT
## League             NL
## Year             2003
## RS                753
## RA                801
## W                  75
## OBP             0.338
## SLG              0.42
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.336
## OSLG            0.431
## Name: 292, dtype: object)
## (322, Team              PIT
## League             NL
## Year             2002
## RS                641
## RA                730
## W                  72
## OBP             0.319
## SLG             0.381
## BA              0.244
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.342
## OSLG            0.423
## Name: 322, dtype: object)
## (352, Team              PIT
## League             NL
## Year             2001
## RS                657
## RA                858
## W                  62
## OBP             0.313
## SLG             0.393
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.344
## OSLG            0.433
## Name: 352, dtype: object)
## (382, Team              PIT
## League             NL
## Year             2000
## RS                793
## RA                888
## W                  69
## OBP             0.339
## SLG             0.424
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.361
## OSLG            0.432
## Name: 382, dtype: object)
## (412, Team              PIT
## League             NL
## Year             1999
## RS                775
## RA                782
## W                  78
## OBP             0.334
## SLG             0.419
## BA              0.259
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.343
## OSLG             0.42
## Name: 412, dtype: object)
## (442, Team              PIT
## League             NL
## Year             1998
## RS                650
## RA                718
## W                  69
## OBP             0.311
## SLG             0.374
## BA              0.254
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 442, dtype: object)
## (471, Team              PIT
## League             NL
## Year             1997
## RS                725
## RA                760
## W                  79
## OBP             0.329
## SLG             0.404
## BA              0.262
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 471, dtype: object)
## (499, Team              PIT
## League             NL
## Year             1996
## RS                776
## RA                833
## W                  73
## OBP             0.329
## SLG             0.407
## BA              0.266
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 499, dtype: object)
## (527, Team              PIT
## League             NL
## Year             1993
## RS                707
## RA                806
## W                  75
## OBP             0.335
## SLG             0.393
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 527, dtype: object)
## (553, Team              PIT
## League             NL
## Year             1992
## RS                693
## RA                595
## W                  96
## OBP             0.324
## SLG             0.381
## BA              0.255
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 553, dtype: object)
## (579, Team              PIT
## League             NL
## Year             1991
## RS                768
## RA                632
## W                  98
## OBP             0.338
## SLG             0.398
## BA              0.263
## Playoffs            1
## RankSeason        1.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 579, dtype: object)
## (605, Team              PIT
## League             NL
## Year             1990
## RS                733
## RA                619
## W                  95
## OBP              0.33
## SLG             0.405
## BA              0.259
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 605, dtype: object)
## (631, Team              PIT
## League             NL
## Year             1989
## RS                637
## RA                680
## W                  74
## OBP             0.311
## SLG             0.359
## BA              0.241
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 164
## OOBP              NaN
## OSLG              NaN
## Name: 631, dtype: object)
## (657, Team              PIT
## League             NL
## Year             1988
## RS                651
## RA                616
## W                  85
## OBP             0.317
## SLG             0.369
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 160
## OOBP              NaN
## OSLG              NaN
## Name: 657, dtype: object)
## (683, Team              PIT
## League             NL
## Year             1987
## RS                723
## RA                744
## W                  80
## OBP              0.33
## SLG             0.403
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 683, dtype: object)
## (709, Team              PIT
## League             NL
## Year             1986
## RS                663
## RA                700
## W                  64
## OBP             0.321
## SLG             0.374
## BA               0.25
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 709, dtype: object)
## (735, Team              PIT
## League             NL
## Year             1985
## RS                568
## RA                708
## W                  57
## OBP             0.311
## SLG             0.347
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 735, dtype: object)
## (761, Team              PIT
## League             NL
## Year             1984
## RS                615
## RA                567
## W                  75
## OBP              0.31
## SLG             0.363
## BA              0.255
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 761, dtype: object)
## (787, Team              PIT
## League             NL
## Year             1983
## RS                659
## RA                648
## W                  84
## OBP             0.325
## SLG             0.383
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 787, dtype: object)
## (813, Team              PIT
## League             NL
## Year             1982
## RS                724
## RA                696
## W                  84
## OBP             0.327
## SLG             0.408
## BA              0.273
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 813, dtype: object)
## (839, Team              PIT
## League             NL
## Year             1980
## RS                666
## RA                646
## W                  83
## OBP             0.322
## SLG             0.388
## BA              0.266
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 839, dtype: object)
## (865, Team              PIT
## League             NL
## Year             1979
## RS                775
## RA                643
## W                  98
## OBP              0.33
## SLG             0.416
## BA              0.272
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      1.0
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 865, dtype: object)
## (891, Team              PIT
## League             NL
## Year             1978
## RS                684
## RA                637
## W                  88
## OBP              0.32
## SLG             0.385
## BA              0.257
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 891, dtype: object)
## (917, Team              PIT
## League             NL
## Year             1977
## RS                734
## RA                665
## W                  96
## OBP             0.331
## SLG             0.413
## BA              0.274
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 917, dtype: object)
## (943, Team              PIT
## League             NL
## Year             1976
## RS                708
## RA                630
## W                  92
## OBP             0.321
## SLG             0.391
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 943, dtype: object)
## (967, Team              PIT
## League             NL
## Year             1975
## RS                712
## RA                565
## W                  92
## OBP             0.323
## SLG             0.402
## BA              0.263
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 967, dtype: object)
## (991, Team              PIT
## League             NL
## Year             1974
## RS                751
## RA                657
## W                  88
## OBP             0.335
## SLG             0.391
## BA              0.274
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 991, dtype: object)
## (1015, Team              PIT
## League             NL
## Year             1973
## RS                704
## RA                693
## W                  80
## OBP             0.315
## SLG             0.405
## BA              0.261
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1015, dtype: object)
## (1039, Team              PIT
## League             NL
## Year             1971
## RS                788
## RA                599
## W                  97
## OBP              0.33
## SLG             0.416
## BA              0.274
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      1.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1039, dtype: object)
## (1063, Team              PIT
## League             NL
## Year             1970
## RS                729
## RA                664
## W                  89
## OBP             0.325
## SLG             0.406
## BA               0.27
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1063, dtype: object)
## (1086, Team              PIT
## League             NL
## Year             1969
## RS                725
## RA                652
## W                  88
## OBP             0.334
## SLG             0.398
## BA              0.277
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1086, dtype: object)
## (1108, Team              PIT
## League             NL
## Year             1968
## RS                583
## RA                532
## W                  80
## OBP             0.306
## SLG             0.343
## BA              0.252
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1108, dtype: object)
## (1128, Team              PIT
## League             NL
## Year             1967
## RS                679
## RA                693
## W                  81
## OBP             0.324
## SLG              0.38
## BA              0.277
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1128, dtype: object)
## (1148, Team              PIT
## League             NL
## Year             1966
## RS                759
## RA                641
## W                  92
## OBP             0.329
## SLG             0.428
## BA              0.279
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1148, dtype: object)
## (1168, Team              PIT
## League             NL
## Year             1965
## RS                675
## RA                580
## W                  90
## OBP             0.317
## SLG             0.382
## BA              0.265
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1168, dtype: object)
## (1188, Team              PIT
## League             NL
## Year             1964
## RS                663
## RA                636
## W                  80
## OBP             0.315
## SLG             0.389
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1188, dtype: object)
## (1208, Team              PIT
## League             NL
## Year             1963
## RS                567
## RA                595
## W                  74
## OBP             0.309
## SLG             0.359
## BA               0.25
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1208, dtype: object)
## (1228, Team              PIT
## League             NL
## Year             1962
## RS                706
## RA                626
## W                  93
## OBP             0.321
## SLG             0.394
## BA              0.268
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 1228, dtype: object)</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
Add a line in the for loop to print the type of each <code>row_tuple</code>.
</p>
</div>
<div>
<div class="sourceCode" id="cb707"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb707-1"><a href="writing-efficient-python-code.html#cb707-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the row and type of each row</span></span>
<span id="cb707-2"><a href="writing-efficient-python-code.html#cb707-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row_tuple <span class="kw">in</span> pit_df.iterrows():</span>
<span id="cb707-3"><a href="writing-efficient-python-code.html#cb707-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(row_tuple)</span>
<span id="cb707-4"><a href="writing-efficient-python-code.html#cb707-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="bu">type</span>(row_tuple))</span></code></pre></div>
<pre><code>## (21, Team              PIT
## League             NL
## Year             2012
## RS                651
## RA                674
## W                  79
## OBP             0.304
## SLG             0.395
## BA              0.243
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.314
## OSLG             0.39
## Name: 21, dtype: object)
## &lt;class 'tuple'&gt;
## (51, Team              PIT
## League             NL
## Year             2011
## RS                610
## RA                712
## W                  72
## OBP             0.309
## SLG             0.368
## BA              0.244
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.338
## OSLG            0.409
## Name: 51, dtype: object)
## &lt;class 'tuple'&gt;
## (81, Team              PIT
## League             NL
## Year             2010
## RS                587
## RA                866
## W                  57
## OBP             0.304
## SLG             0.373
## BA              0.242
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.348
## OSLG            0.449
## Name: 81, dtype: object)
## &lt;class 'tuple'&gt;
## (111, Team              PIT
## League             NL
## Year             2009
## RS                636
## RA                768
## W                  62
## OBP             0.318
## SLG             0.387
## BA              0.252
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.346
## OSLG            0.442
## Name: 111, dtype: object)
## &lt;class 'tuple'&gt;
## (141, Team              PIT
## League             NL
## Year             2008
## RS                735
## RA                884
## W                  67
## OBP              0.32
## SLG             0.403
## BA              0.258
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.362
## OSLG            0.454
## Name: 141, dtype: object)
## &lt;class 'tuple'&gt;
## (171, Team              PIT
## League             NL
## Year             2007
## RS                724
## RA                846
## W                  68
## OBP             0.325
## SLG             0.411
## BA              0.263
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.352
## OSLG            0.447
## Name: 171, dtype: object)
## &lt;class 'tuple'&gt;
## (201, Team              PIT
## League             NL
## Year             2006
## RS                691
## RA                797
## W                  67
## OBP             0.327
## SLG             0.397
## BA              0.263
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.357
## OSLG            0.431
## Name: 201, dtype: object)
## &lt;class 'tuple'&gt;
## (231, Team              PIT
## League             NL
## Year             2005
## RS                680
## RA                769
## W                  67
## OBP             0.322
## SLG               0.4
## BA              0.259
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.344
## OSLG            0.424
## Name: 231, dtype: object)
## &lt;class 'tuple'&gt;
## (262, Team              PIT
## League             NL
## Year             2004
## RS                680
## RA                744
## W                  72
## OBP             0.321
## SLG             0.401
## BA               0.26
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.342
## OSLG            0.416
## Name: 262, dtype: object)
## &lt;class 'tuple'&gt;
## (292, Team              PIT
## League             NL
## Year             2003
## RS                753
## RA                801
## W                  75
## OBP             0.338
## SLG              0.42
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.336
## OSLG            0.431
## Name: 292, dtype: object)
## &lt;class 'tuple'&gt;
## (322, Team              PIT
## League             NL
## Year             2002
## RS                641
## RA                730
## W                  72
## OBP             0.319
## SLG             0.381
## BA              0.244
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.342
## OSLG            0.423
## Name: 322, dtype: object)
## &lt;class 'tuple'&gt;
## (352, Team              PIT
## League             NL
## Year             2001
## RS                657
## RA                858
## W                  62
## OBP             0.313
## SLG             0.393
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.344
## OSLG            0.433
## Name: 352, dtype: object)
## &lt;class 'tuple'&gt;
## (382, Team              PIT
## League             NL
## Year             2000
## RS                793
## RA                888
## W                  69
## OBP             0.339
## SLG             0.424
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP            0.361
## OSLG            0.432
## Name: 382, dtype: object)
## &lt;class 'tuple'&gt;
## (412, Team              PIT
## League             NL
## Year             1999
## RS                775
## RA                782
## W                  78
## OBP             0.334
## SLG             0.419
## BA              0.259
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP            0.343
## OSLG             0.42
## Name: 412, dtype: object)
## &lt;class 'tuple'&gt;
## (442, Team              PIT
## League             NL
## Year             1998
## RS                650
## RA                718
## W                  69
## OBP             0.311
## SLG             0.374
## BA              0.254
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 442, dtype: object)
## &lt;class 'tuple'&gt;
## (471, Team              PIT
## League             NL
## Year             1997
## RS                725
## RA                760
## W                  79
## OBP             0.329
## SLG             0.404
## BA              0.262
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 471, dtype: object)
## &lt;class 'tuple'&gt;
## (499, Team              PIT
## League             NL
## Year             1996
## RS                776
## RA                833
## W                  73
## OBP             0.329
## SLG             0.407
## BA              0.266
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 499, dtype: object)
## &lt;class 'tuple'&gt;
## (527, Team              PIT
## League             NL
## Year             1993
## RS                707
## RA                806
## W                  75
## OBP             0.335
## SLG             0.393
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 527, dtype: object)
## &lt;class 'tuple'&gt;
## (553, Team              PIT
## League             NL
## Year             1992
## RS                693
## RA                595
## W                  96
## OBP             0.324
## SLG             0.381
## BA              0.255
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 553, dtype: object)
## &lt;class 'tuple'&gt;
## (579, Team              PIT
## League             NL
## Year             1991
## RS                768
## RA                632
## W                  98
## OBP             0.338
## SLG             0.398
## BA              0.263
## Playoffs            1
## RankSeason        1.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 579, dtype: object)
## &lt;class 'tuple'&gt;
## (605, Team              PIT
## League             NL
## Year             1990
## RS                733
## RA                619
## W                  95
## OBP              0.33
## SLG             0.405
## BA              0.259
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 605, dtype: object)
## &lt;class 'tuple'&gt;
## (631, Team              PIT
## League             NL
## Year             1989
## RS                637
## RA                680
## W                  74
## OBP             0.311
## SLG             0.359
## BA              0.241
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 164
## OOBP              NaN
## OSLG              NaN
## Name: 631, dtype: object)
## &lt;class 'tuple'&gt;
## (657, Team              PIT
## League             NL
## Year             1988
## RS                651
## RA                616
## W                  85
## OBP             0.317
## SLG             0.369
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 160
## OOBP              NaN
## OSLG              NaN
## Name: 657, dtype: object)
## &lt;class 'tuple'&gt;
## (683, Team              PIT
## League             NL
## Year             1987
## RS                723
## RA                744
## W                  80
## OBP              0.33
## SLG             0.403
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 683, dtype: object)
## &lt;class 'tuple'&gt;
## (709, Team              PIT
## League             NL
## Year             1986
## RS                663
## RA                700
## W                  64
## OBP             0.321
## SLG             0.374
## BA               0.25
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 709, dtype: object)
## &lt;class 'tuple'&gt;
## (735, Team              PIT
## League             NL
## Year             1985
## RS                568
## RA                708
## W                  57
## OBP             0.311
## SLG             0.347
## BA              0.247
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 735, dtype: object)
## &lt;class 'tuple'&gt;
## (761, Team              PIT
## League             NL
## Year             1984
## RS                615
## RA                567
## W                  75
## OBP              0.31
## SLG             0.363
## BA              0.255
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 761, dtype: object)
## &lt;class 'tuple'&gt;
## (787, Team              PIT
## League             NL
## Year             1983
## RS                659
## RA                648
## W                  84
## OBP             0.325
## SLG             0.383
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 787, dtype: object)
## &lt;class 'tuple'&gt;
## (813, Team              PIT
## League             NL
## Year             1982
## RS                724
## RA                696
## W                  84
## OBP             0.327
## SLG             0.408
## BA              0.273
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 813, dtype: object)
## &lt;class 'tuple'&gt;
## (839, Team              PIT
## League             NL
## Year             1980
## RS                666
## RA                646
## W                  83
## OBP             0.322
## SLG             0.388
## BA              0.266
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 839, dtype: object)
## &lt;class 'tuple'&gt;
## (865, Team              PIT
## League             NL
## Year             1979
## RS                775
## RA                643
## W                  98
## OBP              0.33
## SLG             0.416
## BA              0.272
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      1.0
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 865, dtype: object)
## &lt;class 'tuple'&gt;
## (891, Team              PIT
## League             NL
## Year             1978
## RS                684
## RA                637
## W                  88
## OBP              0.32
## SLG             0.385
## BA              0.257
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 891, dtype: object)
## &lt;class 'tuple'&gt;
## (917, Team              PIT
## League             NL
## Year             1977
## RS                734
## RA                665
## W                  96
## OBP             0.331
## SLG             0.413
## BA              0.274
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 917, dtype: object)
## &lt;class 'tuple'&gt;
## (943, Team              PIT
## League             NL
## Year             1976
## RS                708
## RA                630
## W                  92
## OBP             0.321
## SLG             0.391
## BA              0.267
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 943, dtype: object)
## &lt;class 'tuple'&gt;
## (967, Team              PIT
## League             NL
## Year             1975
## RS                712
## RA                565
## W                  92
## OBP             0.323
## SLG             0.402
## BA              0.263
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 967, dtype: object)
## &lt;class 'tuple'&gt;
## (991, Team              PIT
## League             NL
## Year             1974
## RS                751
## RA                657
## W                  88
## OBP             0.335
## SLG             0.391
## BA              0.274
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 991, dtype: object)
## &lt;class 'tuple'&gt;
## (1015, Team              PIT
## League             NL
## Year             1973
## RS                704
## RA                693
## W                  80
## OBP             0.315
## SLG             0.405
## BA              0.261
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1015, dtype: object)
## &lt;class 'tuple'&gt;
## (1039, Team              PIT
## League             NL
## Year             1971
## RS                788
## RA                599
## W                  97
## OBP              0.33
## SLG             0.416
## BA              0.274
## Playoffs            1
## RankSeason        2.0
## RankPlayoffs      1.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1039, dtype: object)
## &lt;class 'tuple'&gt;
## (1063, Team              PIT
## League             NL
## Year             1970
## RS                729
## RA                664
## W                  89
## OBP             0.325
## SLG             0.406
## BA               0.27
## Playoffs            1
## RankSeason        4.0
## RankPlayoffs      3.0
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1063, dtype: object)
## &lt;class 'tuple'&gt;
## (1086, Team              PIT
## League             NL
## Year             1969
## RS                725
## RA                652
## W                  88
## OBP             0.334
## SLG             0.398
## BA              0.277
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1086, dtype: object)
## &lt;class 'tuple'&gt;
## (1108, Team              PIT
## League             NL
## Year             1968
## RS                583
## RA                532
## W                  80
## OBP             0.306
## SLG             0.343
## BA              0.252
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1108, dtype: object)
## &lt;class 'tuple'&gt;
## (1128, Team              PIT
## League             NL
## Year             1967
## RS                679
## RA                693
## W                  81
## OBP             0.324
## SLG              0.38
## BA              0.277
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1128, dtype: object)
## &lt;class 'tuple'&gt;
## (1148, Team              PIT
## League             NL
## Year             1966
## RS                759
## RA                641
## W                  92
## OBP             0.329
## SLG             0.428
## BA              0.279
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1148, dtype: object)
## &lt;class 'tuple'&gt;
## (1168, Team              PIT
## League             NL
## Year             1965
## RS                675
## RA                580
## W                  90
## OBP             0.317
## SLG             0.382
## BA              0.265
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 163
## OOBP              NaN
## OSLG              NaN
## Name: 1168, dtype: object)
## &lt;class 'tuple'&gt;
## (1188, Team              PIT
## League             NL
## Year             1964
## RS                663
## RA                636
## W                  80
## OBP             0.315
## SLG             0.389
## BA              0.264
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1188, dtype: object)
## &lt;class 'tuple'&gt;
## (1208, Team              PIT
## League             NL
## Year             1963
## RS                567
## RA                595
## W                  74
## OBP             0.309
## SLG             0.359
## BA               0.25
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 162
## OOBP              NaN
## OSLG              NaN
## Name: 1208, dtype: object)
## &lt;class 'tuple'&gt;
## (1228, Team              PIT
## League             NL
## Year             1962
## RS                706
## RA                626
## W                  93
## OBP             0.321
## SLG             0.394
## BA              0.268
## Playoffs            0
## RankSeason        NaN
## RankPlayoffs      NaN
## G                 161
## OOBP              NaN
## OSLG              NaN
## Name: 1228, dtype: object)
## &lt;class 'tuple'&gt;</code></pre>
</div>
<p class>
Nice work! Since <code>.iterrows()</code> returns each DataFrame row as a tuple of (index, <code>pandas</code> Series) pairs, you can either split this tuple and use the index and row-values separately (as you did with <code>for i,row in pit_df.iterrows()</code>), or you can keep the result of <code>.iterrows()</code> in the tuple form (as you did with <code>for row_tuple in pit_df.iterrows()</code>).<br><br>If using <code>i,row</code>, you can access things from the row using square brackets (i.e., <code>row[‘Team’]</code>). If using <code>row_tuple</code>, you would have to specify which element of the tuple you’d like to access before grabbing the team name (i.e., <code>row_tuple[1][‘Team’]</code>). <br><br> With either approach, using <code>.iterrows()</code> will still be substantially faster than using <code>.iloc</code> as you saw in the video.
</p>
</div>
<div id="run-differentials-with-.iterrows" class="section level4 unnumbered">
<h4>Run differentials with .iterrows()<a class="anchor" aria-label="anchor" href="#run-differentials-with-.iterrows"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
You’ve been hired by the San Francisco Giants as an analyst—congrats! The team’s owner wants you to calculate a metric called the <em>run differential</em> for each season from the year 2008 to 2012. This metric is calculated by subtracting the total number of runs a team allowed in a season from the team’s total number of runs scored in a season. <code>‘RS’</code> means runs scored and <code>‘RA’</code> means runs allowed.
</p>
<p>
The below function calculates this metric:
</p>
<pre><code>def calc_run_diff(runs_scored, runs_allowed):

    run_diff = runs_scored - runs_allowed

    return run_diff
</code></pre>
<p>
A DataFrame has been loaded into your session as <code>giants_df</code> and printed into the console. Let’s practice using <code>.iterrows()</code> to add a <em>run differential</em> column to this DataFrame.
</p>
</div>
<div>
<div class="sourceCode" id="cb709"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb709-1"><a href="writing-efficient-python-code.html#cb709-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb709-2"><a href="writing-efficient-python-code.html#cb709-2" aria-hidden="true" tabindex="-1"></a>giants_df <span class="op">=</span> baseball_df[(baseball_df.Team <span class="op">==</span> <span class="st">'SFG'</span>) <span class="op">&amp;</span> (baseball_df.Year.between(<span class="dv">2008</span>,<span class="dv">2012</span>))][[<span class="st">'Team'</span>, <span class="st">'League'</span>, <span class="st">'Year'</span>, <span class="st">'RS'</span>, <span class="st">'RA'</span>, <span class="st">'W'</span>, <span class="st">'G'</span>, <span class="st">'Playoffs'</span>]]</span>
<span id="cb709-3"><a href="writing-efficient-python-code.html#cb709-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb709-4"><a href="writing-efficient-python-code.html#cb709-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calc_run_diff(runs_scored, runs_allowed):</span>
<span id="cb709-5"><a href="writing-efficient-python-code.html#cb709-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb709-6"><a href="writing-efficient-python-code.html#cb709-6" aria-hidden="true" tabindex="-1"></a>    run_diff <span class="op">=</span> runs_scored <span class="op">-</span> runs_allowed</span>
<span id="cb709-7"><a href="writing-efficient-python-code.html#cb709-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb709-8"><a href="writing-efficient-python-code.html#cb709-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> run_diff</span></code></pre></div>
</div>
<li>
Create an empty list called <code>run_diffs</code> that will be used to store the <em>run differentials</em> you will calculate.
</li>
<div>
<div class="sourceCode" id="cb710"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb710-1"><a href="writing-efficient-python-code.html#cb710-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty list to store run differentials</span></span>
<span id="cb710-2"><a href="writing-efficient-python-code.html#cb710-2" aria-hidden="true" tabindex="-1"></a>run_diffs <span class="op">=</span> []</span></code></pre></div>
</div>
<li>
Write a for loop that uses <code>.iterrows()</code> to loop over <code>giants_df</code> and collects each row’s runs scored and runs allowed.
</li>
<div>
<div class="sourceCode" id="cb711"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb711-1"><a href="writing-efficient-python-code.html#cb711-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty list to store run differentials</span></span>
<span id="cb711-2"><a href="writing-efficient-python-code.html#cb711-2" aria-hidden="true" tabindex="-1"></a>run_diffs <span class="op">=</span> []</span>
<span id="cb711-3"><a href="writing-efficient-python-code.html#cb711-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb711-4"><a href="writing-efficient-python-code.html#cb711-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a for loop and collect runs allowed and runs scored for each row</span></span>
<span id="cb711-5"><a href="writing-efficient-python-code.html#cb711-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,row <span class="kw">in</span> giants_df.iterrows():</span>
<span id="cb711-6"><a href="writing-efficient-python-code.html#cb711-6" aria-hidden="true" tabindex="-1"></a>    runs_scored <span class="op">=</span> row[<span class="st">'RS'</span>]</span>
<span id="cb711-7"><a href="writing-efficient-python-code.html#cb711-7" aria-hidden="true" tabindex="-1"></a>    runs_allowed <span class="op">=</span> row[<span class="st">'RA'</span>]</span></code></pre></div>
</div>
<li>
Add a line to the for loop that uses the provided function to calculate each row’s <em>run differential</em>.
</li>
<div>
<div class="sourceCode" id="cb712"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb712-1"><a href="writing-efficient-python-code.html#cb712-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty list to store run differentials</span></span>
<span id="cb712-2"><a href="writing-efficient-python-code.html#cb712-2" aria-hidden="true" tabindex="-1"></a>run_diffs <span class="op">=</span> []</span>
<span id="cb712-3"><a href="writing-efficient-python-code.html#cb712-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb712-4"><a href="writing-efficient-python-code.html#cb712-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a for loop and collect runs allowed and runs scored for each row</span></span>
<span id="cb712-5"><a href="writing-efficient-python-code.html#cb712-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,row <span class="kw">in</span> giants_df.iterrows():</span>
<span id="cb712-6"><a href="writing-efficient-python-code.html#cb712-6" aria-hidden="true" tabindex="-1"></a>    runs_scored <span class="op">=</span> row[<span class="st">'RS'</span>]</span>
<span id="cb712-7"><a href="writing-efficient-python-code.html#cb712-7" aria-hidden="true" tabindex="-1"></a>    runs_allowed <span class="op">=</span> row[<span class="st">'RA'</span>]</span>
<span id="cb712-8"><a href="writing-efficient-python-code.html#cb712-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb712-9"><a href="writing-efficient-python-code.html#cb712-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use the provided function to calculate run_diff for each row</span></span>
<span id="cb712-10"><a href="writing-efficient-python-code.html#cb712-10" aria-hidden="true" tabindex="-1"></a>    run_diff <span class="op">=</span> calc_run_diff(runs_scored, runs_allowed)</span></code></pre></div>
</div>
<li>
Add a line to the loop that appends each row’s <em>run differential</em> to the <code>run_diffs</code> list.
</li>
<div>
<div class="sourceCode" id="cb713"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb713-1"><a href="writing-efficient-python-code.html#cb713-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an empty list to store run differentials</span></span>
<span id="cb713-2"><a href="writing-efficient-python-code.html#cb713-2" aria-hidden="true" tabindex="-1"></a>run_diffs <span class="op">=</span> []</span>
<span id="cb713-3"><a href="writing-efficient-python-code.html#cb713-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb713-4"><a href="writing-efficient-python-code.html#cb713-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a for loop and collect runs allowed and runs scored for each row</span></span>
<span id="cb713-5"><a href="writing-efficient-python-code.html#cb713-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,row <span class="kw">in</span> giants_df.iterrows():</span>
<span id="cb713-6"><a href="writing-efficient-python-code.html#cb713-6" aria-hidden="true" tabindex="-1"></a>    runs_scored <span class="op">=</span> row[<span class="st">'RS'</span>]</span>
<span id="cb713-7"><a href="writing-efficient-python-code.html#cb713-7" aria-hidden="true" tabindex="-1"></a>    runs_allowed <span class="op">=</span> row[<span class="st">'RA'</span>]</span>
<span id="cb713-8"><a href="writing-efficient-python-code.html#cb713-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb713-9"><a href="writing-efficient-python-code.html#cb713-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use the provided function to calculate run_diff for each row</span></span>
<span id="cb713-10"><a href="writing-efficient-python-code.html#cb713-10" aria-hidden="true" tabindex="-1"></a>    run_diff <span class="op">=</span> calc_run_diff(runs_scored, runs_allowed)</span>
<span id="cb713-11"><a href="writing-efficient-python-code.html#cb713-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb713-12"><a href="writing-efficient-python-code.html#cb713-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Append each run differential to the output list</span></span>
<span id="cb713-13"><a href="writing-efficient-python-code.html#cb713-13" aria-hidden="true" tabindex="-1"></a>    run_diffs.append(run_diff)</span>
<span id="cb713-14"><a href="writing-efficient-python-code.html#cb713-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb713-15"><a href="writing-efficient-python-code.html#cb713-15" aria-hidden="true" tabindex="-1"></a>giants_df[<span class="st">'RD'</span>] <span class="op">=</span> run_diffs</span>
<span id="cb713-16"><a href="writing-efficient-python-code.html#cb713-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(giants_df)</span></code></pre></div>
<pre><code>##     Team League  Year   RS   RA   W    G  Playoffs   RD
## 24   SFG     NL  2012  718  649  94  162         1   69
## 54   SFG     NL  2011  570  578  86  162         0   -8
## 84   SFG     NL  2010  697  583  92  162         1  114
## 114  SFG     NL  2009  657  611  88  162         0   46
## 144  SFG     NL  2008  640  759  72  162         0 -119</code></pre>
</div>
<p class>
Great job! Take a look at the <code>giants_df</code> DataFrame with the new run differential column (<code>‘RD’</code>) you created (it has been printed in the console).<br><br>The <code>‘Playoffs’</code> column tells you if a team made the playoffs for a given season. A <code>1</code> means that the team made the playoffs in that season and a <code>0</code> means the team did not make the playoffs in that season.<br><br>Did you notice that in the seasons with the highest run differentials the Giants made the playoffs? In fact, in both of these seasons (2010 and 2012), the San Francisco Giants not only made the playoffs but also won the World Series! Cool!
</p>
</div>
</div>
<div id="another-iterator-method-.itertuples" class="section level3 unnumbered">
<h3>Another iterator method: .itertuples()<a class="anchor" aria-label="anchor" href="#another-iterator-method-.itertuples"><i class="fas fa-link"></i></a>
</h3>
<div id="iterating-with-.itertuples" class="section level4 unnumbered">
<h4>Iterating with .itertuples()<a class="anchor" aria-label="anchor" href="#iterating-with-.itertuples"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Remember, <code>.itertuples()</code> returns each DataFrame row as a special data type called a <strong>namedtuple</strong>. You can look up an attribute within a namedtuple with a special syntax. Let’s practice working with namedtuples.
</p>
<p>
A <code>pandas</code> DataFrame has been loaded into your session called <code>rangers_df</code>. This DataFrame contains the stats (<code>‘Team’</code>, <code>‘League’</code>, <code>‘Year’</code>, <code>‘RS’</code>, <code>‘RA’</code>, ‘<code>W’</code>, <code>‘G’</code>, and <code>‘Playoffs’</code>) for the Major League baseball team named the Texas Rangers (abbreviated as <code>‘TEX’</code>).
</p>
</div>
<div class="exercise--instructions__content">
<p>
Use <code>.itertuples()</code> to loop over <code>rangers_df</code> and print each row.
</p>
</div>
<div>
<div class="sourceCode" id="cb715"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb715-1"><a href="writing-efficient-python-code.html#cb715-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb715-2"><a href="writing-efficient-python-code.html#cb715-2" aria-hidden="true" tabindex="-1"></a>rangers_df <span class="op">=</span> baseball_df[(baseball_df.Team <span class="op">==</span> <span class="st">'TEX'</span>) <span class="op">&amp;</span> (baseball_df.Year.between(<span class="dv">1973</span>,<span class="dv">2012</span>))][[<span class="st">'Team'</span>, <span class="st">'League'</span>, <span class="st">'Year'</span>, <span class="st">'RS'</span>, <span class="st">'RA'</span>, <span class="st">'W'</span>, <span class="st">'G'</span>, <span class="st">'Playoffs'</span>]]</span>
<span id="cb715-3"><a href="writing-efficient-python-code.html#cb715-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb715-4"><a href="writing-efficient-python-code.html#cb715-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over the DataFrame and print each row</span></span>
<span id="cb715-5"><a href="writing-efficient-python-code.html#cb715-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> rangers_df.itertuples():</span>
<span id="cb715-6"><a href="writing-efficient-python-code.html#cb715-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(row)</span></code></pre></div>
<pre><code>## Pandas(Index=27, Team='TEX', League='AL', Year=2012, RS=808, RA=707, W=93, G=162, Playoffs=1)
## Pandas(Index=57, Team='TEX', League='AL', Year=2011, RS=855, RA=677, W=96, G=162, Playoffs=1)
## Pandas(Index=87, Team='TEX', League='AL', Year=2010, RS=787, RA=687, W=90, G=162, Playoffs=1)
## Pandas(Index=117, Team='TEX', League='AL', Year=2009, RS=784, RA=740, W=87, G=162, Playoffs=0)
## Pandas(Index=147, Team='TEX', League='AL', Year=2008, RS=901, RA=967, W=79, G=162, Playoffs=0)
## Pandas(Index=177, Team='TEX', League='AL', Year=2007, RS=816, RA=844, W=75, G=162, Playoffs=0)
## Pandas(Index=207, Team='TEX', League='AL', Year=2006, RS=835, RA=784, W=80, G=162, Playoffs=0)
## Pandas(Index=237, Team='TEX', League='AL', Year=2005, RS=865, RA=858, W=79, G=162, Playoffs=0)
## Pandas(Index=268, Team='TEX', League='AL', Year=2004, RS=860, RA=794, W=89, G=162, Playoffs=0)
## Pandas(Index=298, Team='TEX', League='AL', Year=2003, RS=826, RA=969, W=71, G=162, Playoffs=0)
## Pandas(Index=328, Team='TEX', League='AL', Year=2002, RS=843, RA=882, W=72, G=162, Playoffs=0)
## Pandas(Index=358, Team='TEX', League='AL', Year=2001, RS=890, RA=968, W=73, G=162, Playoffs=0)
## Pandas(Index=388, Team='TEX', League='AL', Year=2000, RS=848, RA=974, W=71, G=162, Playoffs=0)
## Pandas(Index=418, Team='TEX', League='AL', Year=1999, RS=945, RA=859, W=95, G=162, Playoffs=1)
## Pandas(Index=448, Team='TEX', League='AL', Year=1998, RS=940, RA=871, W=88, G=162, Playoffs=1)
## Pandas(Index=476, Team='TEX', League='AL', Year=1997, RS=807, RA=823, W=77, G=162, Playoffs=0)
## Pandas(Index=504, Team='TEX', League='AL', Year=1996, RS=928, RA=799, W=90, G=163, Playoffs=1)
## Pandas(Index=532, Team='TEX', League='AL', Year=1993, RS=835, RA=751, W=86, G=162, Playoffs=0)
## Pandas(Index=558, Team='TEX', League='AL', Year=1992, RS=682, RA=753, W=77, G=162, Playoffs=0)
## Pandas(Index=584, Team='TEX', League='AL', Year=1991, RS=829, RA=814, W=85, G=162, Playoffs=0)
## Pandas(Index=610, Team='TEX', League='AL', Year=1990, RS=676, RA=696, W=83, G=162, Playoffs=0)
## Pandas(Index=636, Team='TEX', League='AL', Year=1989, RS=695, RA=714, W=83, G=162, Playoffs=0)
## Pandas(Index=662, Team='TEX', League='AL', Year=1988, RS=637, RA=735, W=70, G=161, Playoffs=0)
## Pandas(Index=688, Team='TEX', League='AL', Year=1987, RS=823, RA=849, W=75, G=162, Playoffs=0)
## Pandas(Index=714, Team='TEX', League='AL', Year=1986, RS=771, RA=743, W=87, G=162, Playoffs=0)
## Pandas(Index=740, Team='TEX', League='AL', Year=1985, RS=617, RA=785, W=62, G=161, Playoffs=0)
## Pandas(Index=766, Team='TEX', League='AL', Year=1984, RS=656, RA=714, W=69, G=161, Playoffs=0)
## Pandas(Index=792, Team='TEX', League='AL', Year=1983, RS=639, RA=609, W=77, G=163, Playoffs=0)
## Pandas(Index=818, Team='TEX', League='AL', Year=1982, RS=590, RA=749, W=64, G=162, Playoffs=0)
## Pandas(Index=844, Team='TEX', League='AL', Year=1980, RS=756, RA=752, W=76, G=163, Playoffs=0)
## Pandas(Index=870, Team='TEX', League='AL', Year=1979, RS=750, RA=698, W=83, G=162, Playoffs=0)
## Pandas(Index=896, Team='TEX', League='AL', Year=1978, RS=692, RA=632, W=87, G=162, Playoffs=0)
## Pandas(Index=922, Team='TEX', League='AL', Year=1977, RS=767, RA=657, W=94, G=162, Playoffs=0)
## Pandas(Index=947, Team='TEX', League='AL', Year=1976, RS=616, RA=652, W=76, G=162, Playoffs=0)
## Pandas(Index=971, Team='TEX', League='AL', Year=1975, RS=714, RA=733, W=79, G=162, Playoffs=0)
## Pandas(Index=995, Team='TEX', League='AL', Year=1974, RS=690, RA=698, W=83, G=161, Playoffs=0)
## Pandas(Index=1019, Team='TEX', League='AL', Year=1973, RS=619, RA=844, W=57, G=162, Playoffs=0)</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
Loop over <code>rangers_df</code> with <code>.itertuples()</code> and save each row’s <code>Index</code>, <code>Year</code>, and Wins (<code>W</code>) attribute as <code>i</code>, <code>year</code>, and <code>wins</code>.
</p>
</div>
<div>
<div class="sourceCode" id="cb717"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb717-1"><a href="writing-efficient-python-code.html#cb717-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over the DataFrame and print each row's Index, Year and Wins (W)</span></span>
<span id="cb717-2"><a href="writing-efficient-python-code.html#cb717-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> rangers_df.itertuples():</span>
<span id="cb717-3"><a href="writing-efficient-python-code.html#cb717-3" aria-hidden="true" tabindex="-1"></a>  i <span class="op">=</span> row.Index</span>
<span id="cb717-4"><a href="writing-efficient-python-code.html#cb717-4" aria-hidden="true" tabindex="-1"></a>  year <span class="op">=</span> row.Year</span>
<span id="cb717-5"><a href="writing-efficient-python-code.html#cb717-5" aria-hidden="true" tabindex="-1"></a>  wins <span class="op">=</span> row.W</span>
<span id="cb717-6"><a href="writing-efficient-python-code.html#cb717-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(i, year, wins)</span></code></pre></div>
<pre><code>## 27 2012 93
## 57 2011 96
## 87 2010 90
## 117 2009 87
## 147 2008 79
## 177 2007 75
## 207 2006 80
## 237 2005 79
## 268 2004 89
## 298 2003 71
## 328 2002 72
## 358 2001 73
## 388 2000 71
## 418 1999 95
## 448 1998 88
## 476 1997 77
## 504 1996 90
## 532 1993 86
## 558 1992 77
## 584 1991 85
## 610 1990 83
## 636 1989 83
## 662 1988 70
## 688 1987 75
## 714 1986 87
## 740 1985 62
## 766 1984 69
## 792 1983 77
## 818 1982 64
## 844 1980 76
## 870 1979 83
## 896 1978 87
## 922 1977 94
## 947 1976 76
## 971 1975 79
## 995 1974 83
## 1019 1973 57</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
Now, loop over <code>rangers_df</code> and print these values <strong>only for those rows</strong> where the Rangers made the playoffs.
</p>
</div>
<div>
<div class="sourceCode" id="cb719"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb719-1"><a href="writing-efficient-python-code.html#cb719-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over the DataFrame and print each row's Index, Year and Wins (W)</span></span>
<span id="cb719-2"><a href="writing-efficient-python-code.html#cb719-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> rangers_df.itertuples():</span>
<span id="cb719-3"><a href="writing-efficient-python-code.html#cb719-3" aria-hidden="true" tabindex="-1"></a>  i <span class="op">=</span> row.Index</span>
<span id="cb719-4"><a href="writing-efficient-python-code.html#cb719-4" aria-hidden="true" tabindex="-1"></a>  year <span class="op">=</span> row.Year</span>
<span id="cb719-5"><a href="writing-efficient-python-code.html#cb719-5" aria-hidden="true" tabindex="-1"></a>  wins <span class="op">=</span> row.W</span>
<span id="cb719-6"><a href="writing-efficient-python-code.html#cb719-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb719-7"><a href="writing-efficient-python-code.html#cb719-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if rangers made Playoffs (1 means yes; 0 means no)</span></span>
<span id="cb719-8"><a href="writing-efficient-python-code.html#cb719-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> row.Playoffs <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb719-9"><a href="writing-efficient-python-code.html#cb719-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i, year, wins)</span></code></pre></div>
<pre><code>## 27 2012 93
## 57 2011 96
## 87 2010 90
## 418 1999 95
## 448 1998 88
## 504 1996 90</code></pre>
</div>
<p class>
Awesome! You’re getting the hang of using <code>.itertuples()</code>. Remember, you need to use the <em>dot</em> syntax for referencing an attribute in a <strong>namedtuple</strong>.<br><br> You can create a new variable using a row’s dot reference (as you did when storing <code>row.Index</code> as the variable <code>i</code>). Or you can use the row’s dot reference directly to perform calculations and checks. Notice that you did not have to save <code>row.Playoffs</code> to a new variable in your check statement (you were able to use <code>row.Playoffs</code> directly in your check).<br><br> Did you notice the pattern in the Texas Rangers playoff appearances? Only six appearances and two distinct sets of groupings (one from 2010 - 2012 and one from 1996 - 1999).
</p>
</div>
<div id="run-differentials-with-.itertuples" class="section level4 unnumbered">
<h4>Run differentials with .itertuples()<a class="anchor" aria-label="anchor" href="#run-differentials-with-.itertuples"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
The New York Yankees have made a trade with the San Francisco Giants for your analyst contract— you’re a hot commodity! Your new boss has seen your work with the Giants and now wants you to do something similar with the Yankees data. He’d like you to calculate <em>run differentials</em> for the Yankees from the year 1962 to the year 2012 and find which season they had the best <em>run differential</em>.
</p>
<p>
You’ve remembered the function you used when working with the Giants and quickly write it down:
</p>
<pre><code>def calc_run_diff(runs_scored, runs_allowed):

    run_diff = runs_scored - runs_allowed

    return run_diff
</code></pre>
<p>
Let’s use <code>.itertuples()</code> to loop over the <code>yankees_df</code> DataFrame (which has been loaded into your session) and calculate <em>run differentials</em>.
</p>
</div>
<div>
<div class="sourceCode" id="cb721"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb721-1"><a href="writing-efficient-python-code.html#cb721-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb721-2"><a href="writing-efficient-python-code.html#cb721-2" aria-hidden="true" tabindex="-1"></a>yankees_df <span class="op">=</span> baseball_df[(baseball_df.Team <span class="op">==</span> <span class="st">'NYY'</span>) <span class="op">&amp;</span> (baseball_df.Year.between(<span class="dv">1962</span>,<span class="dv">2012</span>))][[<span class="st">'Team'</span>, <span class="st">'League'</span>, <span class="st">'Year'</span>, <span class="st">'RS'</span>, <span class="st">'RA'</span>, <span class="st">'W'</span>, <span class="st">'G'</span>, <span class="st">'Playoffs'</span>]]</span></code></pre></div>
</div>
<li>
Use <code>.itertuples()</code> to loop over <code>yankees_df</code> and grab each row’s runs scored and runs allowed values.
</li>
<div>
<div class="sourceCode" id="cb722"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb722-1"><a href="writing-efficient-python-code.html#cb722-1" aria-hidden="true" tabindex="-1"></a>run_diffs <span class="op">=</span> []</span>
<span id="cb722-2"><a href="writing-efficient-python-code.html#cb722-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb722-3"><a href="writing-efficient-python-code.html#cb722-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over the DataFrame and calculate each row's run differential</span></span>
<span id="cb722-4"><a href="writing-efficient-python-code.html#cb722-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> yankees_df.itertuples():</span>
<span id="cb722-5"><a href="writing-efficient-python-code.html#cb722-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb722-6"><a href="writing-efficient-python-code.html#cb722-6" aria-hidden="true" tabindex="-1"></a>    runs_scored <span class="op">=</span> row.RS</span>
<span id="cb722-7"><a href="writing-efficient-python-code.html#cb722-7" aria-hidden="true" tabindex="-1"></a>    runs_allowed <span class="op">=</span> row.RA</span></code></pre></div>
</div>
<li>
Now, calculate each row’s <em>run differential</em> using <code>calc_run_diff()</code>. Be sure to append each row’s <em>run differential</em> to <code>run_diffs</code>.
</li>
<div>
<div class="sourceCode" id="cb723"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb723-1"><a href="writing-efficient-python-code.html#cb723-1" aria-hidden="true" tabindex="-1"></a>run_diffs <span class="op">=</span> []</span>
<span id="cb723-2"><a href="writing-efficient-python-code.html#cb723-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb723-3"><a href="writing-efficient-python-code.html#cb723-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over the DataFrame and calculate each row's run differential</span></span>
<span id="cb723-4"><a href="writing-efficient-python-code.html#cb723-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> yankees_df.itertuples():</span>
<span id="cb723-5"><a href="writing-efficient-python-code.html#cb723-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb723-6"><a href="writing-efficient-python-code.html#cb723-6" aria-hidden="true" tabindex="-1"></a>    runs_scored <span class="op">=</span> row.RS</span>
<span id="cb723-7"><a href="writing-efficient-python-code.html#cb723-7" aria-hidden="true" tabindex="-1"></a>    runs_allowed <span class="op">=</span> row.RA</span>
<span id="cb723-8"><a href="writing-efficient-python-code.html#cb723-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb723-9"><a href="writing-efficient-python-code.html#cb723-9" aria-hidden="true" tabindex="-1"></a>    run_diff <span class="op">=</span> calc_run_diff(runs_scored, runs_allowed)</span>
<span id="cb723-10"><a href="writing-efficient-python-code.html#cb723-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb723-11"><a href="writing-efficient-python-code.html#cb723-11" aria-hidden="true" tabindex="-1"></a>    run_diffs.append(run_diff)</span></code></pre></div>
</div>
<li>
Append a new column called <code>‘RD’</code> to the <code>yankees_df</code> DataFrame that contains the <em>run differentials</em> you calculated.
</li>
<div>
<div class="sourceCode" id="cb724"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb724-1"><a href="writing-efficient-python-code.html#cb724-1" aria-hidden="true" tabindex="-1"></a>run_diffs <span class="op">=</span> []</span>
<span id="cb724-2"><a href="writing-efficient-python-code.html#cb724-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb724-3"><a href="writing-efficient-python-code.html#cb724-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop over the DataFrame and calculate each row's run differential</span></span>
<span id="cb724-4"><a href="writing-efficient-python-code.html#cb724-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> yankees_df.itertuples():</span>
<span id="cb724-5"><a href="writing-efficient-python-code.html#cb724-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb724-6"><a href="writing-efficient-python-code.html#cb724-6" aria-hidden="true" tabindex="-1"></a>    runs_scored <span class="op">=</span> row.RS</span>
<span id="cb724-7"><a href="writing-efficient-python-code.html#cb724-7" aria-hidden="true" tabindex="-1"></a>    runs_allowed <span class="op">=</span> row.RA</span>
<span id="cb724-8"><a href="writing-efficient-python-code.html#cb724-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb724-9"><a href="writing-efficient-python-code.html#cb724-9" aria-hidden="true" tabindex="-1"></a>    run_diff <span class="op">=</span> calc_run_diff(runs_scored, runs_allowed)</span>
<span id="cb724-10"><a href="writing-efficient-python-code.html#cb724-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb724-11"><a href="writing-efficient-python-code.html#cb724-11" aria-hidden="true" tabindex="-1"></a>    run_diffs.append(run_diff)</span>
<span id="cb724-12"><a href="writing-efficient-python-code.html#cb724-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb724-13"><a href="writing-efficient-python-code.html#cb724-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Append new column</span></span>
<span id="cb724-14"><a href="writing-efficient-python-code.html#cb724-14" aria-hidden="true" tabindex="-1"></a>yankees_df[<span class="st">'RD'</span>] <span class="op">=</span> run_diffs</span>
<span id="cb724-15"><a href="writing-efficient-python-code.html#cb724-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(yankees_df)</span></code></pre></div>
<pre><code>##      Team League  Year   RS   RA    W    G  Playoffs   RD
## 18    NYY     AL  2012  804  668   95  162         1  136
## 48    NYY     AL  2011  867  657   97  162         1  210
## 78    NYY     AL  2010  859  693   95  162         1  166
## 108   NYY     AL  2009  915  753  103  162         1  162
## 138   NYY     AL  2008  789  727   89  162         0   62
## 168   NYY     AL  2007  968  777   94  162         1  191
## 198   NYY     AL  2006  930  767   97  162         1  163
## 228   NYY     AL  2005  886  789   95  162         1   97
## 259   NYY     AL  2004  897  808  101  162         1   89
## 289   NYY     AL  2003  877  716  101  163         1  161
## 319   NYY     AL  2002  897  697  103  161         1  200
## 349   NYY     AL  2001  804  713   95  161         1   91
## 379   NYY     AL  2000  871  814   87  161         1   57
## 409   NYY     AL  1999  900  731   98  162         1  169
## 439   NYY     AL  1998  965  656  114  162         1  309
## 468   NYY     AL  1997  891  688   96  162         1  203
## 496   NYY     AL  1996  871  787   92  162         1   84
## 524   NYY     AL  1993  821  761   88  162         0   60
## 550   NYY     AL  1992  733  746   76  162         0  -13
## 576   NYY     AL  1991  674  777   71  162         0 -103
## 602   NYY     AL  1990  603  749   67  162         0 -146
## 628   NYY     AL  1989  698  792   74  161         0  -94
## 654   NYY     AL  1988  772  748   85  161         0   24
## 680   NYY     AL  1987  788  758   89  162         0   30
## 706   NYY     AL  1986  797  738   90  162         0   59
## 732   NYY     AL  1985  839  660   97  161         0  179
## 758   NYY     AL  1984  758  679   87  162         0   79
## 784   NYY     AL  1983  770  703   91  162         0   67
## 810   NYY     AL  1982  709  716   79  162         0   -7
## 836   NYY     AL  1980  820  662  103  162         1  158
## 862   NYY     AL  1979  734  672   89  160         0   62
## 888   NYY     AL  1978  735  582  100  163         1  153
## 914   NYY     AL  1977  831  651  100  162         1  180
## 940   NYY     AL  1976  730  575   97  159         1  155
## 964   NYY     AL  1975  681  588   83  160         0   93
## 988   NYY     AL  1974  671  623   89  162         0   48
## 1012  NYY     AL  1973  641  610   80  162         0   31
## 1036  NYY     AL  1971  648  641   81  162         0    7
## 1060  NYY     AL  1970  680  612   93  163         0   68
## 1083  NYY     AL  1969  562  587   80  162         0  -25
## 1105  NYY     AL  1968  536  531   83  164         0    5
## 1126  NYY     AL  1967  522  621   72  163         0  -99
## 1146  NYY     AL  1966  611  612   70  160         0   -1
## 1166  NYY     AL  1965  611  604   77  162         0    7
## 1186  NYY     AL  1964  730  577   99  164         1  153
## 1206  NYY     AL  1963  714  547  104  161         1  167
## 1226  NYY     AL  1962  817  680   96  162         1  137</code></pre>
</div>
<div>
<ul>
<li>
In what year within your DataFrame did the New York Yankees have the highest <em>run differential</em>?
</li>
</ul>
<p>
<strong>You’ll need to rerun the code that creates the <code>‘RD’</code> column if you’d like to analyze the DataFrame with code rather than looking at the console output.</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>In <strong>2011</strong> (with a <em>Run Differential</em> of <strong>210</strong>)</li>
<li>
<input type="checkbox" disabled checked>In <strong>1998</strong> (with a <em>Run Differential</em> of <strong>309</strong>)</li>
<li>
<input type="checkbox" disabled>In <strong>1962</strong> (with a <em>Run Differential</em> of <strong>503</strong>)</li>
<li>
<input type="checkbox" disabled>In <strong>1985</strong> (with a <em>Run Differential</em> of <strong>315</strong>)</li>
</ul>
<p class>
Great job! You used <code>.itertuples()</code> to help the Yankees calculate <em>run differentials</em>. Remember, using <code>.itertuples()</code> is just like using <code>.iterrows()</code> except it tends to be faster. You also have to use a <em>dot</em> reference when looking up attributes with <code>.itertuples()</code>.<br><br> You found that the Yankees’ highest <em>run differential</em> was in 1998. Did you know they actually hold the record for the highest <em>run differential</em> in an MLB season (411 in the year 1939 where they scored 967 runs and allowed 556)? Wow!
</p>
</div>
</div>
<div id="pandas-alternative-to-looping" class="section level3 unnumbered">
<h3>pandas alternative to looping<a class="anchor" aria-label="anchor" href="#pandas-alternative-to-looping"><i class="fas fa-link"></i></a>
</h3>
<div id="analyzing-baseball-stats-with-.apply" class="section level4 unnumbered">
<h4>Analyzing baseball stats with .apply()<a class="anchor" aria-label="anchor" href="#analyzing-baseball-stats-with-.apply"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
The Tampa Bay Rays want you to analyze their data.
</p>
<p>
They’d like the following metrics:
</p>
<ul>
<li>
The sum of each column in the data
</li>
<li>
The total amount of runs scored in a year (<code>‘RS’</code> + <code>‘RA’</code> for each year)
</li>
<li>
The <code>‘Playoffs’</code> column in text format rather than using <code>1</code>’s and <code>0</code>’s
</li>
</ul>
<p>
The below function can be used to convert the <code>‘Playoffs’</code> column to text:
</p>
<pre><code>def text_playoffs(num_playoffs): 
    if num_playoffs == 1:
        return 'Yes'
    else:
        return 'No' 
</code></pre>
<p>
Use <code>.apply()</code> to get these metrics. A DataFrame (<code>rays_df</code>) has been loaded and printed to the console. This DataFrame is indexed on the <code>‘Year’</code> column.
</p>
</div>
<div class="exercise--instructions__content">
<p>
Apply <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> to each <strong>column</strong> of <code>rays_df</code> to collect the sum of each column. Be sure to specify the correct <code>axis</code>.
</p>
</div>
<div>
<div class="sourceCode" id="cb726"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb726-1"><a href="writing-efficient-python-code.html#cb726-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb726-2"><a href="writing-efficient-python-code.html#cb726-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> text_playoffs(num_playoffs): </span>
<span id="cb726-3"><a href="writing-efficient-python-code.html#cb726-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> num_playoffs <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb726-4"><a href="writing-efficient-python-code.html#cb726-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Yes'</span></span>
<span id="cb726-5"><a href="writing-efficient-python-code.html#cb726-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb726-6"><a href="writing-efficient-python-code.html#cb726-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'No'</span> </span>
<span id="cb726-7"><a href="writing-efficient-python-code.html#cb726-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb726-8"><a href="writing-efficient-python-code.html#cb726-8" aria-hidden="true" tabindex="-1"></a>rays_df <span class="op">=</span> baseball_df[baseball_df.Team <span class="op">==</span> <span class="st">'TBR'</span>][[<span class="st">'Year'</span>, <span class="st">'RS'</span>, <span class="st">'RA'</span>, <span class="st">'W'</span>, <span class="st">'Playoffs'</span>]].set_index(<span class="st">'Year'</span>)</span>
<span id="cb726-9"><a href="writing-efficient-python-code.html#cb726-9" aria-hidden="true" tabindex="-1"></a>rays_df.index.names <span class="op">=</span> [<span class="va">None</span>]</span>
<span id="cb726-10"><a href="writing-efficient-python-code.html#cb726-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb726-11"><a href="writing-efficient-python-code.html#cb726-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Gather sum of all columns</span></span>
<span id="cb726-12"><a href="writing-efficient-python-code.html#cb726-12" aria-hidden="true" tabindex="-1"></a>stat_totals <span class="op">=</span> rays_df.<span class="bu">apply</span>(<span class="bu">sum</span>, axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb726-13"><a href="writing-efficient-python-code.html#cb726-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stat_totals)</span></code></pre></div>
<pre><code>## RS          3783
## RA          3265
## W            458
## Playoffs       3
## dtype: int64</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
Apply <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> to each <strong>row</strong> of <code>rays_df</code>, only looking at the <code>‘RS’</code> and <code>‘RA’</code> columns, and specify the correct <code>axis</code>.
</p>
</div>
<div>
<div class="sourceCode" id="cb728"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb728-1"><a href="writing-efficient-python-code.html#cb728-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gather total runs scored in all games per year</span></span>
<span id="cb728-2"><a href="writing-efficient-python-code.html#cb728-2" aria-hidden="true" tabindex="-1"></a>total_runs_scored <span class="op">=</span> rays_df[[<span class="st">'RS'</span>, <span class="st">'RA'</span>]].<span class="bu">apply</span>(<span class="bu">sum</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb728-3"><a href="writing-efficient-python-code.html#cb728-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(total_runs_scored)</span></code></pre></div>
<pre><code>## 2012    1274
## 2011    1321
## 2010    1451
## 2009    1557
## 2008    1445
## dtype: int64</code></pre>
</div>
<div class="exercise--instructions__content">
<p>
Use <code>.apply()</code> and a <code>lambda</code> function to apply <code>text_playoffs()</code> to each <strong>row</strong>‘s <code>’Playoffs’</code> value of the <code>rays_df</code> DataFrame.
</p>
</div>
<div>
<div class="sourceCode" id="cb730"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb730-1"><a href="writing-efficient-python-code.html#cb730-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert numeric playoffs to text by applying text_playoffs()</span></span>
<span id="cb730-2"><a href="writing-efficient-python-code.html#cb730-2" aria-hidden="true" tabindex="-1"></a>textual_playoffs <span class="op">=</span> rays_df.<span class="bu">apply</span>(<span class="kw">lambda</span> row: text_playoffs(row[<span class="st">'Playoffs'</span>]), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb730-3"><a href="writing-efficient-python-code.html#cb730-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(textual_playoffs)</span></code></pre></div>
<pre><code>## 2012     No
## 2011    Yes
## 2010    Yes
## 2009     No
## 2008    Yes
## dtype: object</code></pre>
</div>
<p class>
Great work! The <code>.apply()</code> method let’s you apply functions to all rows or columns of a DataFrame by specifying an axis.<br><br>If you’ve been using <code>pandas</code> for some time, you may have noticed that a better way to find these stats would use the <code>pandas</code> built-in <code>.sum()</code> method.<br><br> You could have used <code>rays_df.sum(axis=0)</code> to get columnar sums and <code>rays_df[[‘RS’, ‘RA’]].sum(axis=1)</code> to get row sums.<br><br> You could have also used <code>.apply()</code> <strong>directly</strong> on a Series (or column) of the DataFrame. For example, you could use <code>rays_df[‘Playoffs’].apply(text_playoffs)</code> to convert the <code>‘Playoffs’</code> column to text.
</p>
</div>
<div id="settle-a-debate-with-.apply" class="section level4 unnumbered">
<h4>Settle a debate with .apply()<a class="anchor" aria-label="anchor" href="#settle-a-debate-with-.apply"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Word has gotten to the Arizona Diamondbacks about your awesome analytics skills. They’d like for you to help settle a debate amongst the managers. One manager claims that the team has made the playoffs every year they have had a win percentage of <code>0.50</code> or greater. Another manager says this is not true.
</p>
<p>
Let’s use the below function and the <code>.apply()</code> method to see which manager is correct.
</p>
<pre><code>def calc_win_perc(wins, games_played):
    win_perc = wins / games_played
    return np.round(win_perc,2)
</code></pre>
<p>
A DataFrame named <code>dbacks_df</code> has been loaded into your session.
</p>
</div>
<div>
<div class="sourceCode" id="cb732"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb732-1"><a href="writing-efficient-python-code.html#cb732-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb732-2"><a href="writing-efficient-python-code.html#cb732-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calc_win_perc(wins, games_played):</span>
<span id="cb732-3"><a href="writing-efficient-python-code.html#cb732-3" aria-hidden="true" tabindex="-1"></a>    win_perc <span class="op">=</span> wins <span class="op">/</span> games_played</span>
<span id="cb732-4"><a href="writing-efficient-python-code.html#cb732-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.<span class="bu">round</span>(win_perc,<span class="dv">2</span>)</span>
<span id="cb732-5"><a href="writing-efficient-python-code.html#cb732-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb732-6"><a href="writing-efficient-python-code.html#cb732-6" aria-hidden="true" tabindex="-1"></a>dbacks_df <span class="op">=</span> baseball_df[(baseball_df.Team <span class="op">==</span> <span class="st">'ARI'</span>) <span class="op">&amp;</span> (baseball_df.Year.between(<span class="dv">1998</span>,<span class="dv">2012</span>))][[<span class="st">'Team'</span>, <span class="st">'League'</span>, <span class="st">'Year'</span>, <span class="st">'RS'</span>, <span class="st">'RA'</span>, <span class="st">'W'</span>, <span class="st">'G'</span>, <span class="st">'Playoffs'</span>]]</span></code></pre></div>
</div>
<li>
Print the first five rows of the <code>dbacks_df</code> DataFrame to see what the data looks like.
</li>
<div>
<div class="sourceCode" id="cb733"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb733-1"><a href="writing-efficient-python-code.html#cb733-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first five rows of the DataFrame</span></span>
<span id="cb733-2"><a href="writing-efficient-python-code.html#cb733-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dbacks_df.head())</span></code></pre></div>
<pre><code>##     Team League  Year   RS   RA   W    G  Playoffs
## 0    ARI     NL  2012  734  688  81  162         0
## 30   ARI     NL  2011  731  662  94  162         1
## 60   ARI     NL  2010  713  836  65  162         0
## 90   ARI     NL  2009  720  782  70  162         0
## 120  ARI     NL  2008  720  706  82  162         0</code></pre>
</div>
<li>
Create a <code>pandas</code> Series called <code>win_percs</code> by <em>applying</em> the <code>calc_win_perc()</code> function to each <strong>row</strong> of the DataFrame with a <code>lambda</code> function.
</li>
<div>
<div class="sourceCode" id="cb735"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb735-1"><a href="writing-efficient-python-code.html#cb735-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first five rows of the DataFrame</span></span>
<span id="cb735-2"><a href="writing-efficient-python-code.html#cb735-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dbacks_df.head())</span></code></pre></div>
<pre><code>##     Team League  Year   RS   RA   W    G  Playoffs
## 0    ARI     NL  2012  734  688  81  162         0
## 30   ARI     NL  2011  731  662  94  162         1
## 60   ARI     NL  2010  713  836  65  162         0
## 90   ARI     NL  2009  720  782  70  162         0
## 120  ARI     NL  2008  720  706  82  162         0</code></pre>
</div>
<div>
<div class="sourceCode" id="cb737"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb737-1"><a href="writing-efficient-python-code.html#cb737-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a win percentage Series </span></span>
<span id="cb737-2"><a href="writing-efficient-python-code.html#cb737-2" aria-hidden="true" tabindex="-1"></a>win_percs <span class="op">=</span> dbacks_df.<span class="bu">apply</span>(<span class="kw">lambda</span> row: calc_win_perc(row[<span class="st">'W'</span>], row[<span class="st">'G'</span>]), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb737-3"><a href="writing-efficient-python-code.html#cb737-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(win_percs, <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## 0      0.50
## 30     0.58
## 60     0.40
## 90     0.43
## 120    0.51
## 150    0.56
## 180    0.47
## 210    0.48
## 241    0.31
## 271    0.52
## 301    0.60
## 331    0.57
## 361    0.52
## 391    0.62
## 421    0.40
## dtype: float64</code></pre>
</div>
<li>
Create a new column in <code>dbacks_df</code> called <code>WP</code> that contains the win percentages you calculated in the above step.
</li>
<div>
<div class="sourceCode" id="cb739"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb739-1"><a href="writing-efficient-python-code.html#cb739-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the first five rows of the DataFrame</span></span>
<span id="cb739-2"><a href="writing-efficient-python-code.html#cb739-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dbacks_df.head())</span></code></pre></div>
<pre><code>##     Team League  Year   RS   RA   W    G  Playoffs
## 0    ARI     NL  2012  734  688  81  162         0
## 30   ARI     NL  2011  731  662  94  162         1
## 60   ARI     NL  2010  713  836  65  162         0
## 90   ARI     NL  2009  720  782  70  162         0
## 120  ARI     NL  2008  720  706  82  162         0</code></pre>
</div>
<div>
<div class="sourceCode" id="cb741"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb741-1"><a href="writing-efficient-python-code.html#cb741-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a win percentage Series </span></span>
<span id="cb741-2"><a href="writing-efficient-python-code.html#cb741-2" aria-hidden="true" tabindex="-1"></a>win_percs <span class="op">=</span> dbacks_df.<span class="bu">apply</span>(<span class="kw">lambda</span> row: calc_win_perc(row[<span class="st">'W'</span>], row[<span class="st">'G'</span>]), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb741-3"><a href="writing-efficient-python-code.html#cb741-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(win_percs, <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>## 0      0.50
## 30     0.58
## 60     0.40
## 90     0.43
## 120    0.51
## 150    0.56
## 180    0.47
## 210    0.48
## 241    0.31
## 271    0.52
## 301    0.60
## 331    0.57
## 361    0.52
## 391    0.62
## 421    0.40
## dtype: float64</code></pre>
</div>
<div>
<div class="sourceCode" id="cb743"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb743-1"><a href="writing-efficient-python-code.html#cb743-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Append a new column to dbacks_df</span></span>
<span id="cb743-2"><a href="writing-efficient-python-code.html#cb743-2" aria-hidden="true" tabindex="-1"></a>dbacks_df[<span class="st">'WP'</span>] <span class="op">=</span> win_percs</span>
<span id="cb743-3"><a href="writing-efficient-python-code.html#cb743-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dbacks_df, <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</span></code></pre></div>
<pre><code>##     Team League  Year   RS   RA    W    G  Playoffs    WP
## 0    ARI     NL  2012  734  688   81  162         0  0.50
## 30   ARI     NL  2011  731  662   94  162         1  0.58
## 60   ARI     NL  2010  713  836   65  162         0  0.40
## 90   ARI     NL  2009  720  782   70  162         0  0.43
## 120  ARI     NL  2008  720  706   82  162         0  0.51
## 150  ARI     NL  2007  712  732   90  162         1  0.56
## 180  ARI     NL  2006  773  788   76  162         0  0.47
## 210  ARI     NL  2005  696  856   77  162         0  0.48
## 241  ARI     NL  2004  615  899   51  162         0  0.31
## 271  ARI     NL  2003  717  685   84  162         0  0.52
## 301  ARI     NL  2002  819  674   98  162         1  0.60
## 331  ARI     NL  2001  818  677   92  162         1  0.57
## 361  ARI     NL  2000  792  754   85  162         0  0.52
## 391  ARI     NL  1999  908  676  100  162         1  0.62
## 421  ARI     NL  1998  665  812   65  162         0  0.40</code></pre>
</div>
<div>
<div class="sourceCode" id="cb745"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb745-1"><a href="writing-efficient-python-code.html#cb745-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display dbacks_df where WP is greater than 0.50</span></span>
<span id="cb745-2"><a href="writing-efficient-python-code.html#cb745-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dbacks_df[dbacks_df[<span class="st">'WP'</span>] <span class="op">&gt;=</span> <span class="fl">0.50</span>])</span></code></pre></div>
<pre><code>##     Team League  Year   RS   RA    W    G  Playoffs    WP
## 0    ARI     NL  2012  734  688   81  162         0  0.50
## 30   ARI     NL  2011  731  662   94  162         1  0.58
## 120  ARI     NL  2008  720  706   82  162         0  0.51
## 150  ARI     NL  2007  712  732   90  162         1  0.56
## 271  ARI     NL  2003  717  685   84  162         0  0.52
## 301  ARI     NL  2002  819  674   98  162         1  0.60
## 331  ARI     NL  2001  818  677   92  162         1  0.57
## 361  ARI     NL  2000  792  754   85  162         0  0.52
## 391  ARI     NL  1999  908  676  100  162         1  0.62</code></pre>
</div>
<div>
<ul>
<li>
Which manager was correct in their claim?
</li>
</ul>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>The manager who claimed the team <strong>made</strong> the playoffs every year they’ve had a win percentage of <code>0.50</code> or greater.</li>
<li>
<input type="checkbox" disabled checked>The manager who claimed the team <strong>has not made</strong> the playoffs every year they’ve had a win percentage of <code>0.50</code> or greater.</li>
<li>
<input type="checkbox" disabled>Both managers are crazy! The Arizona Diamondbacks have never made the playoffs.</li>
</ul>
<p class>
Nicely done! Using the <code>.apply()</code> method with a <code>lambda</code> function allows you to apply a function to a DataFrame without the need to write a for loop.<br><br>Sadly, the second manager was correct. In the year 2012, 2008, 2003, and 2000 the Arizona Diamondbacks had a win percentage greater than or equal to 0.50, but still <strong>did not</strong> make the playoffs.
</p>
</div>
</div>
<div id="optimal-pandas-iterating" class="section level3 unnumbered">
<h3>Optimal pandas iterating<a class="anchor" aria-label="anchor" href="#optimal-pandas-iterating"><i class="fas fa-link"></i></a>
</h3>
<div id="replacing-.iloc-with-underlying-arrays" class="section level4 unnumbered">
<h4>Replacing .iloc with underlying arrays<a class="anchor" aria-label="anchor" href="#replacing-.iloc-with-underlying-arrays"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
Now that you have a better grasp on a DataFrame’s internals let’s update one of your previous analyses to leverage a DataFrame’s underlying arrays. You’ll revisit the win percentage calculations you performed row by row with the <code>.iloc</code> method:
</p>
<pre><code>def calc_win_perc(wins, games_played):
    win_perc = wins / games_played
    return np.round(win_perc,2)

win_percs_list = []

for i in range(len(baseball_df)):
    row = baseball_df.iloc[i]

    wins = row['W']
    games_played = row['G']

    win_perc = calc_win_perc(wins, games_played)

    win_percs_list.append(win_perc)

baseball_df['WP'] = win_percs_list
</code></pre>
<p>
Let’s update this analysis to use arrays instead of the <code>.iloc</code> method. A DataFrame (<code>baseball_df</code>) has been loaded into your session.
</p>
</div>
<li>
Use <em>the right method</em> to collect the underlying <code>‘W’</code> and <code>‘G’</code> arrays of <code>baseball_df</code> and pass them <strong>directly into</strong> the <code>calc_win_perc()</code> function. Store the result as a variable called <code>win_percs_np</code>.
</li>
<div>
<div class="sourceCode" id="cb747"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb747-1"><a href="writing-efficient-python-code.html#cb747-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the W array and G array to calculate win percentages</span></span>
<span id="cb747-2"><a href="writing-efficient-python-code.html#cb747-2" aria-hidden="true" tabindex="-1"></a>win_percs_np <span class="op">=</span> calc_win_perc(baseball_df[<span class="st">'W'</span>].values, baseball_df[<span class="st">'G'</span>].values)</span></code></pre></div>
</div>
<li>
Create a new column in <code>baseball_df</code> called <code>‘WP’</code> that contains the win percentages you just calculated.
</li>
<div>
<div class="sourceCode" id="cb748"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb748-1"><a href="writing-efficient-python-code.html#cb748-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use the W array and G array to calculate win percentages</span></span>
<span id="cb748-2"><a href="writing-efficient-python-code.html#cb748-2" aria-hidden="true" tabindex="-1"></a>win_percs_np <span class="op">=</span> calc_win_perc(baseball_df[<span class="st">'W'</span>].values, baseball_df[<span class="st">'G'</span>].values)</span>
<span id="cb748-3"><a href="writing-efficient-python-code.html#cb748-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-4"><a href="writing-efficient-python-code.html#cb748-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Append a new column to baseball_df that stores all win percentages</span></span>
<span id="cb748-5"><a href="writing-efficient-python-code.html#cb748-5" aria-hidden="true" tabindex="-1"></a>baseball_df[<span class="st">'WP'</span>] <span class="op">=</span> win_percs_np</span>
<span id="cb748-6"><a href="writing-efficient-python-code.html#cb748-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb748-7"><a href="writing-efficient-python-code.html#cb748-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(baseball_df.head())</span></code></pre></div>
<pre><code>##   Team League  Year   RS   RA   W    OBP    SLG     BA  Playoffs  RankSeason  RankPlayoffs    G   OOBP   OSLG    WP
## 0  ARI     NL  2012  734  688  81  0.328  0.418  0.259         0         NaN           NaN  162  0.317  0.415  0.50
## 1  ATL     NL  2012  700  600  94  0.320  0.389  0.247         1         4.0           5.0  162  0.306  0.378  0.58
## 2  BAL     AL  2012  712  705  93  0.311  0.417  0.247         1         5.0           4.0  162  0.315  0.403  0.57
## 3  BOS     AL  2012  734  806  69  0.315  0.415  0.260         0         NaN           NaN  162  0.331  0.428  0.43
## 4  CHC     NL  2012  613  759  61  0.302  0.378  0.240         0         NaN           NaN  162  0.335  0.424  0.38</code></pre>
</div>
<div>
<p>
Use <code>timeit</code> in <em>cell magic mode</em> <strong>within your IPython console</strong> to compare the runtimes between the old code block using <code>.iloc</code> and the new code you developed using NumPy arrays.
</p>
<p>
<strong>Don’t include the code that defines the <code>calc_win_perc()</code> function or the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> statements or when timing</strong>.
</p>
<p>
You should include <strong>eight lines of code</strong> when timing the old code block and <strong>two lines of code</strong> when timing the new code you developed. You may need to press <code>SHIFT+ENTER</code> when using <code>timeit</code> in <em>cell magic mode</em> to get to a new line within your IPython console.
</p>
<p>
<strong>Which approach was the faster?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>The original code with <code>.iloc</code> is much faster than using NumPy arrays</li>
<li>
<input type="checkbox" disabled>The old code block with <code>.iloc</code> and the new code with NumPy arrays have similar runtimes.</li>
<li>
<input type="checkbox" disabled checked>The NumPy array approach is faster than the <code>.iloc</code> approach.</li>
</ul>
<p class>
Great job! You’re knocking it out of the park! Using a DataFrame’s underlying arrays to perform calculations can really speed up your code and yields some significant efficiency gains. Did you notice that the NumPy array approach was not just faster, but that it also used fewer lines of code and was easier to read?
</p>
</div>
<div id="bringing-it-all-together-predict-win-percentage" class="section level4 unnumbered">
<h4>Bringing it all together: Predict win percentage<a class="anchor" aria-label="anchor" href="#bringing-it-all-together-predict-win-percentage"><i class="fas fa-link"></i></a>
</h4>
<div>
<p>
A <code>pandas</code> DataFrame (<code>baseball_df</code>) has been loaded into your session. For convenience, a dictionary describing each column within <code>baseball_df</code> has been printed into your console. You can reference these descriptions throughout the exercise.
</p>
<p>
You’d like to attempt to <em>predict</em> a team’s win percentage for a given season by using the team’s total runs scored in a season (<code>‘RS’</code>) and total runs allowed in a season (<code>‘RA’</code>) with the following function:
</p>
<pre><code>def predict_win_perc(RS, RA):
    prediction = RS ** 2 / (RS ** 2 + RA ** 2)
    return np.round(prediction, 2)
</code></pre>
<p>
Let’s compare the approaches you’ve learned to calculate a <em>predicted win percentage</em> for each season (or row) in your DataFrame.
</p>
</div>
<div>
<div class="sourceCode" id="cb750"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb750-1"><a href="writing-efficient-python-code.html#cb750-1" aria-hidden="true" tabindex="-1"></a><span class="co"># edited/added</span></span>
<span id="cb750-2"><a href="writing-efficient-python-code.html#cb750-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> predict_win_perc(RS, RA):</span>
<span id="cb750-3"><a href="writing-efficient-python-code.html#cb750-3" aria-hidden="true" tabindex="-1"></a>    prediction <span class="op">=</span> RS <span class="op">**</span> <span class="dv">2</span> <span class="op">/</span> (RS <span class="op">**</span> <span class="dv">2</span> <span class="op">+</span> RA <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb750-4"><a href="writing-efficient-python-code.html#cb750-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.<span class="bu">round</span>(prediction, <span class="dv">2</span>)</span></code></pre></div>
</div>
<li>
Use a for loop and <code>.itertuples()</code> to predict the win percentage for each row of <code>baseball_df</code> with the <code>predict_win_perc()</code> function. Save each row’s predicted win percentage as <code>win_perc_pred</code> and append each to the <code>win_perc_preds_loop</code> list.
</li>
<div>
<div class="sourceCode" id="cb751"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb751-1"><a href="writing-efficient-python-code.html#cb751-1" aria-hidden="true" tabindex="-1"></a>win_perc_preds_loop <span class="op">=</span> []</span>
<span id="cb751-2"><a href="writing-efficient-python-code.html#cb751-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb751-3"><a href="writing-efficient-python-code.html#cb751-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a loop and .itertuples() to collect each row's predicted win percentage</span></span>
<span id="cb751-4"><a href="writing-efficient-python-code.html#cb751-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> baseball_df.itertuples():</span>
<span id="cb751-5"><a href="writing-efficient-python-code.html#cb751-5" aria-hidden="true" tabindex="-1"></a>    runs_scored <span class="op">=</span> row.RS</span>
<span id="cb751-6"><a href="writing-efficient-python-code.html#cb751-6" aria-hidden="true" tabindex="-1"></a>    runs_allowed <span class="op">=</span> row.RA</span>
<span id="cb751-7"><a href="writing-efficient-python-code.html#cb751-7" aria-hidden="true" tabindex="-1"></a>    win_perc_pred <span class="op">=</span> predict_win_perc(runs_scored, runs_allowed)</span>
<span id="cb751-8"><a href="writing-efficient-python-code.html#cb751-8" aria-hidden="true" tabindex="-1"></a>    win_perc_preds_loop.append(win_perc_pred)</span></code></pre></div>
</div>
<li>
Apply <code>predict_win_perc()</code> to each row of the <code>baseball_df</code> DataFrame using a <code>lambda</code> function. Save the predicted win percentage as <code>win_perc_preds_apply</code>.
</li>
<div>
<div class="sourceCode" id="cb752"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb752-1"><a href="writing-efficient-python-code.html#cb752-1" aria-hidden="true" tabindex="-1"></a>win_perc_preds_loop <span class="op">=</span> []</span>
<span id="cb752-2"><a href="writing-efficient-python-code.html#cb752-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb752-3"><a href="writing-efficient-python-code.html#cb752-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a loop and .itertuples() to collect each row's predicted win percentage</span></span>
<span id="cb752-4"><a href="writing-efficient-python-code.html#cb752-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> baseball_df.itertuples():</span>
<span id="cb752-5"><a href="writing-efficient-python-code.html#cb752-5" aria-hidden="true" tabindex="-1"></a>    runs_scored <span class="op">=</span> row.RS</span>
<span id="cb752-6"><a href="writing-efficient-python-code.html#cb752-6" aria-hidden="true" tabindex="-1"></a>    runs_allowed <span class="op">=</span> row.RA</span>
<span id="cb752-7"><a href="writing-efficient-python-code.html#cb752-7" aria-hidden="true" tabindex="-1"></a>    win_perc_pred <span class="op">=</span> predict_win_perc(runs_scored, runs_allowed)</span>
<span id="cb752-8"><a href="writing-efficient-python-code.html#cb752-8" aria-hidden="true" tabindex="-1"></a>    win_perc_preds_loop.append(win_perc_pred)</span>
<span id="cb752-9"><a href="writing-efficient-python-code.html#cb752-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb752-10"><a href="writing-efficient-python-code.html#cb752-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply predict_win_perc to each row of the DataFrame</span></span>
<span id="cb752-11"><a href="writing-efficient-python-code.html#cb752-11" aria-hidden="true" tabindex="-1"></a>win_perc_preds_apply <span class="op">=</span> baseball_df.<span class="bu">apply</span>(<span class="kw">lambda</span> row: predict_win_perc(row[<span class="st">'RS'</span>], row[<span class="st">'RA'</span>]), axis<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div>
</div>
<li>
Calculate the predicted win percentages by passing the underlying <code>‘RS’</code> and <code>‘RA’</code> <strong>arrays</strong> from <code>baseball_df</code> into <code>predict_win_perc()</code>. Save these predictions as <code>win_perc_preds_np</code>.
</li>
<div>
<div class="sourceCode" id="cb753"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb753-1"><a href="writing-efficient-python-code.html#cb753-1" aria-hidden="true" tabindex="-1"></a>win_perc_preds_loop <span class="op">=</span> []</span>
<span id="cb753-2"><a href="writing-efficient-python-code.html#cb753-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb753-3"><a href="writing-efficient-python-code.html#cb753-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a loop and .itertuples() to collect each row's predicted win percentage</span></span>
<span id="cb753-4"><a href="writing-efficient-python-code.html#cb753-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> baseball_df.itertuples():</span>
<span id="cb753-5"><a href="writing-efficient-python-code.html#cb753-5" aria-hidden="true" tabindex="-1"></a>    runs_scored <span class="op">=</span> row.RS</span>
<span id="cb753-6"><a href="writing-efficient-python-code.html#cb753-6" aria-hidden="true" tabindex="-1"></a>    runs_allowed <span class="op">=</span> row.RA</span>
<span id="cb753-7"><a href="writing-efficient-python-code.html#cb753-7" aria-hidden="true" tabindex="-1"></a>    win_perc_pred <span class="op">=</span> predict_win_perc(runs_scored, runs_allowed)</span>
<span id="cb753-8"><a href="writing-efficient-python-code.html#cb753-8" aria-hidden="true" tabindex="-1"></a>    win_perc_preds_loop.append(win_perc_pred)</span>
<span id="cb753-9"><a href="writing-efficient-python-code.html#cb753-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb753-10"><a href="writing-efficient-python-code.html#cb753-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply predict_win_perc to each row of the DataFrame</span></span>
<span id="cb753-11"><a href="writing-efficient-python-code.html#cb753-11" aria-hidden="true" tabindex="-1"></a>win_perc_preds_apply <span class="op">=</span> baseball_df.<span class="bu">apply</span>(<span class="kw">lambda</span> row: predict_win_perc(row[<span class="st">'RS'</span>], row[<span class="st">'RA'</span>]), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb753-12"><a href="writing-efficient-python-code.html#cb753-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb753-13"><a href="writing-efficient-python-code.html#cb753-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the win percentage predictions using NumPy arrays</span></span>
<span id="cb753-14"><a href="writing-efficient-python-code.html#cb753-14" aria-hidden="true" tabindex="-1"></a>win_perc_preds_np <span class="op">=</span> predict_win_perc(baseball_df[<span class="st">'RS'</span>].values, baseball_df[<span class="st">'RA'</span>].values)</span>
<span id="cb753-15"><a href="writing-efficient-python-code.html#cb753-15" aria-hidden="true" tabindex="-1"></a>baseball_df[<span class="st">'WP_preds'</span>] <span class="op">=</span> win_perc_preds_np</span>
<span id="cb753-16"><a href="writing-efficient-python-code.html#cb753-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(baseball_df.head())</span></code></pre></div>
<pre><code>##   Team League  Year   RS   RA   W    OBP    SLG     BA  Playoffs  RankSeason  RankPlayoffs    G   OOBP   OSLG    WP  WP_preds
## 0  ARI     NL  2012  734  688  81  0.328  0.418  0.259         0         NaN           NaN  162  0.317  0.415  0.50      0.53
## 1  ATL     NL  2012  700  600  94  0.320  0.389  0.247         1         4.0           5.0  162  0.306  0.378  0.58      0.58
## 2  BAL     AL  2012  712  705  93  0.311  0.417  0.247         1         5.0           4.0  162  0.315  0.403  0.57      0.50
## 3  BOS     AL  2012  734  806  69  0.315  0.415  0.260         0         NaN           NaN  162  0.331  0.428  0.43      0.45
## 4  CHC     NL  2012  613  759  61  0.302  0.378  0.240         0         NaN           NaN  162  0.335  0.424  0.38      0.39</code></pre>
</div>
<div>
<p>
Compare runtimes <strong>within your IPython console</strong> between <strong>all three</strong> approaches used to calculate the predicted win percentages.
</p>
<p>
Use <strong><code>%%timeit</code></strong> (<em>cell magic mode</em>) to time the <strong>six lines of code</strong> (not including comment lines) for the <code>.itertuples()</code> approach. You may need to press <code>SHIFT+ENTER</code> after entering <code>%%timeit</code> to get to a new line within your IPython console.
</p>
<p>
Use <strong><code>%timeit</code></strong> (<em>line magic mode</em>) to time the <code>.apply()</code> approach and the NumPy array approach separately. Each has only <strong>one line of code</strong> (not including comment lines).
</p>
<p>
<strong>What is the order of approaches from fastest to slowest?</strong>
</p>
</div>
<ul class="task-list">
<li>
<input type="checkbox" disabled>The <code>.apply()</code> with a <code>lambda</code> function was the <strong>fastest</strong>, followed by the <code>.itertuples()</code> approach, and the array approach was <strong>slowest</strong>.</li>
<li>
<input type="checkbox" disabled checked>Using NumPy arrays was the <strong>fastest</strong> approach, followed by the <code>.itertuples()</code> approach, and the <code>.apply()</code> approach was <strong>slowest</strong>.</li>
<li>
<input type="checkbox" disabled>The <code>.itertuples()</code> approach was <strong>fastest</strong>, followed by the array approach, and the <code>.apply()</code> approach was <strong>slowest</strong>.</li>
<li>
<input type="checkbox" disabled>All three approaches had comparable runtimes.</li>
</ul>
<p class>
Great job! That’s a home run! You practiced using three different approaches to iterate over a <code>pandas</code> DataFrame and perform calculations. Did you notice that the <code>.itertuples()</code> approach beat the <code>.apply()</code> approach? Even though both these implementations can be useful, you should default to using a DataFrame’s underlying arrays to perform calculations.<br><br>Take a look at your win percentage predictions (column <code>‘WP_preds’</code>) and compare them to the actual win percentages (column <code>‘WP’</code>). Not bad!<br><br>You’ve done a great job throughout the course! Now, you are well on your way to writing efficient Python and <code>pandas</code> code!
</p>
</div>
</div>
<div id="congratulations-3" class="section level3 unnumbered">
<h3>Congratulations!<a class="anchor" aria-label="anchor" href="#congratulations-3"><i class="fas fa-link"></i></a>
</h3>
<div id="congratulations-4" class="section level4 unnumbered">
<h4>Congratulations!<a class="anchor" aria-label="anchor" href="#congratulations-4"><i class="fas fa-link"></i></a>
</h4>
<p>Congratulations on completing the course! Now, you have the necessary tools to start writing efficient Python code!</p>
</div>
<div id="what-you-have-learned" class="section level4 unnumbered">
<h4>What you have learned<a class="anchor" aria-label="anchor" href="#what-you-have-learned"><i class="fas fa-link"></i></a>
</h4>
<p>Over the four chapters of this course, you have learned what writing efficient code truly means, and that writing Pythonic code often yields efficient code. You’ve explored Python’s Standard Library and practiced using built-in functions like range, enumerate, and map. You know the power of NumPy arrays and can use them for fast, efficient calculations. You’re a whiz at using magic commands like %timeit and know how to profile your code with the line_profiler and memory_profiler packages. You’ve also applied more advanced techniques to gain efficiencies by using built-in functions like zip, built-in modules like itertools and collections, and a branch of mathematics called set theory. Finally, you explored looping patterns in Python and why they are not always the most efficient approach to solving problems. You successfully eliminated loops in your code and even learned how to efficiently iterate over pandas DataFrames.</p>
</div>
<div id="well-done" class="section level4 unnumbered">
<h4>Well done!<a class="anchor" aria-label="anchor" href="#well-done"><i class="fas fa-link"></i></a>
</h4>
<p>Well done! It has been an absolute pleasure working with you! Thank you for taking the course, and I hope to see you again in the future!</p>

</div>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="python-data-science-toolbox-part-2.html">Python Data Science Toolbox (Part 2)</a></div>
<div class="next"><a href="writing-functions-in-python.html">Writing Functions in Python</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#writing-efficient-python-code">Writing Efficient Python Code</a></li>
<li>
<a class="nav-link" href="#foundations-for-efficiencies">Foundations for efficiencies</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#welcome">Welcome!</a></li>
<li><a class="nav-link" href="#building-with-built-ins">Building with built-ins</a></li>
<li><a class="nav-link" href="#the-power-of-numpy-arrays">The power of NumPy arrays</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#timing-and-profiling-code">Timing and profiling code</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#examining-runtime">Examining runtime</a></li>
<li><a class="nav-link" href="#code-profiling-for-runtime">Code profiling for runtime</a></li>
<li><a class="nav-link" href="#code-profiling-for-memory-usage">Code profiling for memory usage</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#gaining-efficiencies">Gaining efficiencies</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#efficiently-combining-counting-and-iterating">Efficiently combining, counting, and iterating</a></li>
<li><a class="nav-link" href="#set-theory">Set theory</a></li>
<li><a class="nav-link" href="#eliminating-loops">Eliminating loops</a></li>
<li><a class="nav-link" href="#writing-better-loops">Writing better loops</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#basic-pandas-optimizations">Basic pandas optimizations</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#intro-to-pandas-dataframe-iteration">Intro to pandas DataFrame iteration</a></li>
<li><a class="nav-link" href="#another-iterator-method-.itertuples">Another iterator method: .itertuples()</a></li>
<li><a class="nav-link" href="#pandas-alternative-to-looping">pandas alternative to looping</a></li>
<li><a class="nav-link" href="#optimal-pandas-iterating">Optimal pandas iterating</a></li>
<li><a class="nav-link" href="#congratulations-3">Congratulations!</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/mcllix85/https://github.com/mclix85/python-fundamentals/blob/master/Writing-Efficient-Python-Code.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/mcllix85/https://github.com/mclix85/python-fundamentals/edit/master/Writing-Efficient-Python-Code.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Python Fundamenals</strong>" was written by Dat Tran. It was last built on 2023-01-13.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
